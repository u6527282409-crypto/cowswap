const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["7c93fa6a/chunk.embedded-wallet-DVGm7-g7.js","7c93fa6a/chunk.if-defined-Cm4VnrCK.js","7c93fa6a/chunk.index-HBlsagCN.js","7c93fa6a/chunk.index-DC1lEsHD.js","7c93fa6a/chunk.ref-CbFyjana.js","7c93fa6a/chunk.index-BIWr8oOq.js","7c93fa6a/chunk.index-DkVnt3je.js","7c93fa6a/chunk.index--nZbJi5f.js","7c93fa6a/chunk.index-DPOz19Hi.js","7c93fa6a/chunk.index-DaJPGthf.js","7c93fa6a/chunk.index-l-pPUC4P.js","7c93fa6a/chunk.index-C4zanXWC.js","7c93fa6a/chunk.email-B2cBLtDF.js","7c93fa6a/chunk.index-DZus8W4U.js","7c93fa6a/chunk.socials-DCYOWAeP.js","7c93fa6a/chunk.index-C-QWRKwK.js","7c93fa6a/chunk.ConstantsUtil-Dmg8YACJ.js","7c93fa6a/chunk.index-a4neIPZM.js","7c93fa6a/chunk.index-CTf-lNr2.js","7c93fa6a/chunk.index-McTSlqLv.js","7c93fa6a/chunk.index-DjNDzx_B.js","7c93fa6a/chunk.swaps-DtXEwcHU.js","7c93fa6a/chunk.index-JuWyh_SF.js","7c93fa6a/chunk.index-DNLf6sEW.js","7c93fa6a/chunk.index-CcXe4rv6.js","7c93fa6a/chunk.send-mf9F4b81.js","7c93fa6a/chunk.index-C3m_xxvw.js","7c93fa6a/chunk.index--AjA6Dkb.js","7c93fa6a/chunk.receive-CxraBBt8.js","7c93fa6a/chunk.index-CtwnuF2p.js","7c93fa6a/chunk.onramp-Ci8c_WMp.js","7c93fa6a/chunk.index-B8xruEqP.js","7c93fa6a/chunk.index-BULP1hIR.js","7c93fa6a/chunk.index-DuxlQ7-w.js","7c93fa6a/chunk.transactions-CHsmNtxd.js","7c93fa6a/chunk.index-CP3nanSh.js","7c93fa6a/chunk.index-DbhJyiJW.js","7c93fa6a/chunk.index-CGSCW6e_.js","7c93fa6a/chunk.index-ClBDkVN4.js","7c93fa6a/chunk.index-PV5TVhcl.js","7c93fa6a/chunk.w3m-modal-s7bnvSM9.js"])))=>i.map(i=>d[i]);
var Up=t=>{throw TypeError(t)};var Ll=(t,e,r)=>e.has(t)||Up("Cannot "+r);var L=(t,e,r)=>(Ll(t,e,"read from private field"),r?r.call(t):e.get(t)),xe=(t,e,r)=>e.has(t)?Up("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),we=(t,e,r,n)=>(Ll(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Lt=(t,e,r)=>(Ll(t,e,"access private method"),r);var Lc=(t,e,r,n)=>({set _(s){we(t,e,s,r)},get _(){return L(t,e,n)}});import*as sb from"https://esm.sh/react@18.3.1";import If,{useState as ch,useEffect as Nu,useRef as ib,createElement as Mp,createContext as L_,useContext as B_,useMemo as F_,StrictMode as j_}from"https://esm.sh/react@18.3.1";import q_ from"https://esm.sh/react-dom@18.3.1";import{createClient as ob,custom as z_,weiUnits as H_,ContractFunctionExecutionError as W_,hexToString as ab,trim as V_,formatUnits as rl,getAddress as Xi,SwitchChainError as xa,numberToHex as Pu,UserRejectedRequestError as xr,withRetry as G_,withTimeout as K_,ResourceUnavailableRpcError as Bl,recoverAddress as Y_,fallback as Lp,http as Bc,toHex as Bp,parseUnits as Z_}from"https://esm.sh/viem@2.26.2";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function J_(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Fl={exports:{}},zo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp;function Q_(){if(Fp)return zo;Fp=1;var t=If,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var l,d={},h=null,p=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(p=c.ref);for(l in c)n.call(c,l)&&!i.hasOwnProperty(l)&&(d[l]=c[l]);if(a&&a.defaultProps)for(l in c=a.defaultProps,c)d[l]===void 0&&(d[l]=c[l]);return{$$typeof:e,type:a,key:h,ref:p,props:d,_owner:s.current}}return zo.Fragment=r,zo.jsx=o,zo.jsxs=o,zo}var jp;function X_(){return jp||(jp=1,Fl.exports=Q_()),Fl.exports}var ci=X_(),Fc={},qp;function eC(){if(qp)return Fc;qp=1;var t=q_;return Fc.createRoot=t.createRoot,Fc.hydrateRoot=t.hydrateRoot,Fc}var tC=eC();const Ho="Reown",jc="ReOwnKit",rC=()=>{var i,o;const t=document.title,e=window.location.href,r=((i=document.querySelector('meta[name="description"]'))==null?void 0:i.content)||"No description available",n=((o=document.querySelector('link[rel="icon"]'))==null?void 0:o.href)||null;return{title:t,url:e,description:r,favicon:n}},cb=()=>(window==null?void 0:window.projectId)||"9aaf8c285e3ef2ee97dec73922407731",nC=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},qc=(t,e)=>{const r=new CustomEvent(t,{detail:e});window.dispatchEvent(r)};function Pe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const ub="2.29.4";let Wo={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${ub}`},F=class uh extends Error{constructor(e,r={}){var a;const n=(()=>{var c;return r.cause instanceof uh?r.cause.details:(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof uh&&r.cause.docsPath||r.docsPath,i=(a=Wo.getDocsUrl)==null?void 0:a.call(Wo,{...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...Wo.version?[`Version: ${Wo.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=ub}walk(e){return lb(this,e)}};function lb(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?lb(t.cause,e):e?null:t}let db=class extends F{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}};class sC extends F{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class iC extends F{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Ts(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ht(t){return Ts(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Gn(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let s=0;s<r.length-1&&r[e==="left"?s:r.length-s-1].toString()==="0";s++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}class hb extends F{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}let fb=class extends F{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};class zp extends F{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Ei(t,{dir:e,size:r=32}={}){return typeof t=="string"?Cs(t,{dir:e,size:r}):oC(t,{dir:e,size:r})}function Cs(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new fb({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function oC(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new fb({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}const aC=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function oe(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ne(t,e):typeof t=="string"?Sf(t,e):typeof t=="boolean"?pb(t,e):Jt(t,e)}function pb(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Sn(r,{size:e.size}),Ei(r,{size:e.size})):r}function Jt(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=aC[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(Sn(n,{size:e.size}),Ei(n,{dir:"right",size:e.size})):n}function Ne(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new db({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Ei(a,{size:n}):a}const cC=new TextEncoder;function Sf(t,e={}){const r=cC.encode(t);return Jt(r,e)}const uC=new TextEncoder;function ni(t,e={}){return typeof t=="number"||typeof t=="bigint"?dC(t,e):typeof t=="boolean"?lC(t,e):Ts(t)?kr(t,e):gb(t,e)}function lC(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Sn(r,{size:e.size}),Ei(r,{size:e.size})):r}const Pn={zero:48,nine:57,A:65,F:70,a:97,f:102};function Hp(t){if(t>=Pn.zero&&t<=Pn.nine)return t-Pn.zero;if(t>=Pn.A&&t<=Pn.F)return t-(Pn.A-10);if(t>=Pn.a&&t<=Pn.f)return t-(Pn.a-10)}function kr(t,e={}){let r=t;e.size&&(Sn(r,{size:e.size}),r=Ei(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=Hp(n.charCodeAt(a++)),u=Hp(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new F(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function dC(t,e){const r=Ne(t,e);return kr(r)}function gb(t,e={}){const r=uC.encode(t);return typeof e.size=="number"?(Sn(r,{size:e.size}),Ei(r,{dir:"right",size:e.size})):r}function Sn(t,{size:e}){if(ht(t)>e)throw new iC({givenSize:ht(t),maxSize:e})}function Je(t,e={}){const{signed:r}=e;e.size&&Sn(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Kn(t,e={}){return Number(Je(t,e))}function sl(t,e){return({exclude:r,format:n})=>({exclude:r,format:s=>{const i=e(s);if(r)for(const o of r)delete i[o];return{...i,...n(s)}},type:t})}const mb={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function hc(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Kn(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Kn(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?mb[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=hC(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const Nf=sl("transaction",hc);function hC(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function yb(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:hc(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const Pf=sl("block",yb);function Tf(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}const fC={"0x0":"reverted","0x1":"success"};function wb(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>Tf(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Kn(t.transactionIndex):null,status:t.status?fC[t.status]:null,type:t.type?mb[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const bb=sl("transactionReceipt",wb),pC={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function fc(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=gC(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>Jt(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ne(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ne(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ne(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ne(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ne(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ne(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=pC[t.type]),typeof t.value<"u"&&(e.value=Ne(t.value)),e}const vb=sl("transactionRequest",fc);function gC(t){return t.map(e=>({address:e.address,r:e.r?Ne(BigInt(e.r)):e.r,s:e.s?Ne(BigInt(e.s)):e.s,chainId:Ne(e.chainId),nonce:Ne(e.nonce),...typeof e.yParity<"u"?{yParity:Ne(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ne(e.v)}:{}}))}const mC=2n**16n-1n,pc=2n**256n-1n,xf=50000n,Wp=mC*32n,Eb={block:Pf({format(t){var r;const e=(r=t.transactions)==null?void 0:r.map(n=>{var i;if(typeof n=="string")return n;const s=(i=Eb.transaction)==null?void 0:i.format(n);return s.typeHex==="0x71"?s.type="eip712":s.typeHex==="0xff"&&(s.type="priority"),s});return{l1BatchNumber:t.l1BatchNumber?Je(t.l1BatchNumber):null,l1BatchTimestamp:t.l1BatchTimestamp?Je(t.l1BatchTimestamp):null,transactions:e}}}),transaction:Nf({format(t){const e={};return t.type==="0x71"?e.type="eip712":t.type==="0xff"&&(e.type="priority"),{...e,l1BatchNumber:t.l1BatchNumber?Je(t.l1BatchNumber):null,l1BatchTxIndex:t.l1BatchTxIndex?Je(t.l1BatchTxIndex):null}}}),transactionReceipt:bb({format(t){return{l1BatchNumber:t.l1BatchNumber?Je(t.l1BatchNumber):null,l1BatchTxIndex:t.l1BatchTxIndex?Je(t.l1BatchTxIndex):null,logs:t.logs.map(e=>({...Tf(e),l1BatchNumber:e.l1BatchNumber?Je(e.l1BatchNumber):null,transactionLogIndex:Kn(e.transactionLogIndex),logType:e.logType})),l2ToL1Logs:t.l2ToL1Logs.map(e=>({blockNumber:Je(e.blockHash),blockHash:e.blockHash,l1BatchNumber:e.l1BatchNumber?Je(e.l1BatchNumber):null,transactionIndex:Je(e.transactionIndex),shardId:Je(e.shardId),isService:e.isService,sender:e.sender,key:e.key,value:e.value,transactionHash:e.transactionHash,logIndex:Je(e.logIndex)}))}}}),transactionRequest:vb({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format(t){return t.gasPerPubdata||t.paymaster&&t.paymasterInput||t.factoryDeps||t.customSignature?{eip712Meta:{...t.gasPerPubdata?{gasPerPubdata:oe(t.gasPerPubdata)}:{gasPerPubdata:oe(xf)},...t.paymaster&&t.paymasterInput?{paymasterParams:{paymaster:t.paymaster,paymasterInput:Array.from(kr(t.paymasterInput))}}:{},...t.factoryDeps?{factoryDeps:t.factoryDeps.map(e=>Array.from(kr(e)))}:{},...t.customSignature?{customSignature:Array.from(kr(t.customSignature))}:{}},type:"0x71"}:{}}})};function wo(t){return typeof t[0]=="string"?nn(t):yC(t)}function yC(t){let e=0;for(const s of t)e+=s.length;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function nn(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}class Vp extends F{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class _b extends F{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class wC extends F{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const bC={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new wC({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new _b({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Vp({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Vp({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Of(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(bC);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}function _n(t,e="hex"){const r=Cb(t),n=Of(new Uint8Array(r.length));return r.encode(n),e==="hex"?Jt(n.bytes):n.bytes}function Cb(t){return Array.isArray(t)?vC(t.map(e=>Cb(e))):EC(t)}function vC(t){const e=t.reduce((s,i)=>s+i.length,0),r=Ab(e);return{length:e<=55?1+e:1+r+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+r),r===1?s.pushUint8(e):r===2?s.pushUint16(e):r===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function EC(t){const e=typeof t=="string"?kr(t):t,r=Ab(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+r),r===1?s.pushUint8(e.length):r===2?s.pushUint16(e.length):r===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Ab(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new F("Length is too large.")}const _C={gwei:9,wei:18},CC={ether:-9,wei:9};function Ib(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function Rf(t,e="wei"){return Ib(t,_C[e])}function lr(t,e="wei"){return Ib(t,CC[e])}function gc(t){const e=Object.entries(t).map(([n,s])=>s===void 0||s===!1?null:[n,s]).filter(Boolean),r=e.reduce((n,[s])=>Math.max(n,s.length),0);return e.map(([n,s])=>`  ${`${n}:`.padEnd(r+1)}  ${s}`).join(`
`)}class AC extends F{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class IC extends F{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class SC extends F{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",gc(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class NC extends F{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class PC extends F{constructor(e,{account:r,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){var f;const p=gc({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:r==null?void 0:r.address,to:d,value:typeof h<"u"&&`${Rf(h)} ${((f=s==null?void 0:s.nativeCurrency)==null?void 0:f.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lr(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${lr(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Sb extends F{constructor({blockHash:e,blockNumber:r,blockTag:n,hash:s,index:i}){let o="Transaction";n&&i!==void 0&&(o=`Transaction at block time "${n}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),r&&i!==void 0&&(o=`Transaction at block number "${r}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Nb extends F{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class TC extends F{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}function xC(t){if(!t||t.length===0)return[];const e=[];for(const r of t){const{chainId:n,nonce:s,...i}=r,o=r.address;e.push([n?oe(n):"0x",o,s?oe(s):"0x",...ko({},i)])}return e}function Df(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(i=>kr(i)):t.blobs,s=[];for(const i of n)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return r==="bytes"?s:s.map(i=>Jt(i))}function kf(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>kr(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>kr(o)):t.commitments,i=[];for(let o=0;o<n.length;o++){const a=n[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return r==="bytes"?i:i.map(o=>Jt(o))}function Tu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function OC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function il(t,...e){if(!OC(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function c7(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tu(t.outputLen),Tu(t.blockLen)}function xu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Pb(t,e){il(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const xi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function RC(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jl(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function on(t,e){return t<<32-e|t>>>e}const Gp=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function DC(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Kp(t){for(let e=0;e<t.length;e++)t[e]=DC(t[e])}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function kC(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function $f(t){return typeof t=="string"&&(t=kC(t)),il(t),t}function u7(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];il(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class Tb{clone(){return this._cloneInto()}}function xb(t){const e=n=>t().update($f(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function l7(t=32){if(xi&&typeof xi.getRandomValues=="function")return xi.getRandomValues(new Uint8Array(t));if(xi&&typeof xi.randomBytes=="function")return Uint8Array.from(xi.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function $C(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function UC(t,e,r){return t&e^~t&r}function MC(t,e,r){return t&e^t&r^e&r}class LC extends Tb{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=jl(this.buffer)}update(e){xu(this);const{view:r,buffer:n,blockLen:s}=this;e=$f(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=jl(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xu(this),Pb(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;$C(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=jl(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const BC=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),es=new Uint32Array(64);class FC extends LC{constructor(e=32){super(64,e,8,!1),this.A=Xn[0]|0,this.B=Xn[1]|0,this.C=Xn[2]|0,this.D=Xn[3]|0,this.E=Xn[4]|0,this.F=Xn[5]|0,this.G=Xn[6]|0,this.H=Xn[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)es[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=es[d-15],p=es[d-2],f=on(h,7)^on(h,18)^h>>>3,g=on(p,17)^on(p,19)^p>>>10;es[d]=g+es[d-7]+f+es[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=on(a,6)^on(a,11)^on(a,25),p=l+h+UC(a,c,u)+BC[d]+es[d]|0,g=(on(n,2)^on(n,13)^on(n,22))+MC(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){es.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const jC=xb(()=>new FC);function Ob(t,e){const r=e||"hex",n=jC(Ts(t,{strict:!1})?ni(t):t);return r==="bytes"?n:oe(n)}function qC(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),s=Ob(e,"bytes");return s.set([r],0),n==="bytes"?s:Jt(s)}function Rb(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(qC({commitment:i,to:n,version:r}));return s}const Yp=6,Db=32,Uf=4096,kb=Db*Uf,Zp=kb*Yp-1-1*Uf*Yp,$b=1;class zC extends F{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class Ub extends F{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class HC extends F{constructor({hash:e,size:r}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}}class WC extends F{constructor({hash:e,version:r}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${$b}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}}function VC(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?kr(t.data):t.data,n=ht(r);if(!n)throw new Ub;if(n>Zp)throw new zC({maxSize:Zp,size:n});const s=[];let i=!0,o=0;for(;i;){const a=Of(new Uint8Array(kb));let c=0;for(;c<Uf;){const u=r.slice(o,o+(Db-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>Jt(a.bytes))}function Mb(t){const{data:e,kzg:r,to:n}=t,s=t.blobs??VC({data:e,to:n}),i=t.commitments??Df({blobs:s,kzg:r,to:n}),o=t.proofs??kf({blobs:s,commitments:i,kzg:r,to:n}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}class St extends F{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class lh extends F{constructor({blockNumber:e,chain:r,contract:n}){super(`Chain "${r.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class GC extends F{constructor({chain:e,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class KC extends F{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Lb extends F{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Do extends F{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}class eo extends F{constructor({cause:e,message:r}={}){var s;const n=(s=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(eo,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(eo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class xs extends F{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${lr(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(xs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class dh extends F{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${lr(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(dh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class hh extends F{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(hh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class fh extends F{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(fh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ph extends F{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ph,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class gh extends F{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(gh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class mh extends F{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(mh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class yh extends F{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(yh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class wh extends F{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(wh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class bo extends F{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${lr(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${lr(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(bo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class ol extends F{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}class Mf extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const zc=BigInt(2**32-1),Jp=BigInt(32);function YC(t,e=!1){return e?{h:Number(t&zc),l:Number(t>>Jp&zc)}:{h:Number(t>>Jp&zc)|0,l:Number(t&zc)|0}}function ZC(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=YC(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const JC=(t,e,r)=>t<<r|e>>>32-r,QC=(t,e,r)=>e<<r|t>>>32-r,XC=(t,e,r)=>e<<r-32|t>>>64-r,e1=(t,e,r)=>t<<r-32|e>>>64-r,Bb=[],Fb=[],jb=[],t1=BigInt(0),Vo=BigInt(1),r1=BigInt(2),n1=BigInt(7),s1=BigInt(256),i1=BigInt(113);for(let t=0,e=Vo,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Bb.push(2*(5*n+r)),Fb.push((t+1)*(t+2)/2%64);let s=t1;for(let i=0;i<7;i++)e=(e<<Vo^(e>>n1)*i1)%s1,e&r1&&(s^=Vo<<(Vo<<BigInt(i))-Vo);jb.push(s)}const[o1,a1]=ZC(jb,!0),Qp=(t,e,r)=>r>32?XC(t,e,r):JC(t,e,r),Xp=(t,e,r)=>r>32?e1(t,e,r):QC(t,e,r);function c1(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=Qp(u,l,1)^r[a],h=Xp(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Fb[o],c=Qp(s,i,a),u=Xp(s,i,a),l=Bb[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=o1[n],t[1]^=a1[n]}r.fill(0)}class Lf extends Tb{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,Tu(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=RC(this.state)}keccak(){Gp||Kp(this.state32),c1(this.state32,this.rounds),Gp||Kp(this.state32),this.posOut=0,this.pos=0}update(e){xu(this);const{blockLen:r,state:n}=this;e=$f(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){xu(this,!1),il(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Tu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Pb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Lf(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const u1=(t,e,r)=>xb(()=>new Lf(e,t,r)),l1=u1(1,136,256/8);function mc(t,e){const r=e||"hex",n=l1(Ts(t,{strict:!1})?ni(t):t);return r==="bytes"?n:oe(n)}const ql=new Mf(8192);function al(t,e){if(ql.has(`${t}.${e}`))return ql.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=mc(gb(r),"bytes"),s=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return ql.set(`${t}.${e}`,i),i}function d1(t,e){if(!ot(t,{strict:!1}))throw new St({address:t});return al(t,e)}const h1=/^0x[a-fA-F0-9]{40}$/,zl=new Mf(8192);function ot(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(zl.has(n))return zl.get(n);const s=h1.test(t)?t.toLowerCase()===t?!0:r?al(t)===t:!0:!1;return zl.set(n,s),s}function Oa(t,e,r,{strict:n}={}){return Ts(t,{strict:!1})?f1(t,e,r,{strict:n}):Hb(t,e,r,{strict:n})}function qb(t,e){if(typeof e=="number"&&e>0&&e>ht(t)-1)throw new hb({offset:e,position:"start",size:ht(t)})}function zb(t,e,r){if(typeof e=="number"&&typeof r=="number"&&ht(t)!==r-e)throw new hb({offset:r,position:"end",size:ht(t)})}function Hb(t,e,r,{strict:n}={}){qb(t,e);const s=t.slice(e,r);return n&&zb(s,e,r),s}function f1(t,e,r,{strict:n}={}){qb(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&zb(s,e,r),s}function p1(t){const{authorizationList:e}=t;if(e)for(const r of e){const{chainId:n}=r,s=r.address;if(!ot(s))throw new St({address:s});if(n<0)throw new Do({chainId:n})}Bf(t)}function g1(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new Ub;for(const r of e){const n=ht(r),s=Kn(Oa(r,0,1));if(n!==32)throw new HC({hash:r,size:n});if(s!==$b)throw new WC({hash:r,version:s})}}Bf(t)}function Bf(t){const{chainId:e,maxPriorityFeePerGas:r,maxFeePerGas:n,to:s}=t;if(e<=0)throw new Do({chainId:e});if(s&&!ot(s))throw new St({address:s});if(n&&n>pc)throw new xs({maxFeePerGas:n});if(r&&n&&r>n)throw new bo({maxFeePerGas:n,maxPriorityFeePerGas:r})}function m1(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i}=t;if(e<=0)throw new Do({chainId:e});if(i&&!ot(i))throw new St({address:i});if(r||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>pc)throw new xs({maxFeePerGas:n})}function y1(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i}=t;if(i&&!ot(i))throw new St({address:i});if(typeof e<"u"&&e<=0)throw new Do({chainId:e});if(r||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>pc)throw new xs({maxFeePerGas:n})}function Wb(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new SC({transaction:t})}function yc(t){if(!t||t.length===0)return[];const e=[];for(let r=0;r<t.length;r++){const{address:n,storageKeys:s}=t[r];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new NC({storageKey:s[i]});if(!ot(n,{strict:!1}))throw new St({address:n});e.push([n,s])}return e}function Vb(t,e){const r=Wb(t);return r==="eip1559"?v1(t,e):r==="eip2930"?E1(t,e):r==="eip4844"?b1(t,e):r==="eip7702"?w1(t,e):_1(t,e)}function w1(t,e){const{authorizationList:r,chainId:n,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=t;p1(t);const h=yc(l),p=xC(r);return nn(["0x04",_n([oe(n),i?oe(i):"0x",u?oe(u):"0x",c?oe(c):"0x",s?oe(s):"0x",o??"0x",a?oe(a):"0x",d??"0x",h,p,...ko(t,e)])])}function b1(t,e){const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=t;g1(t);let h=t.blobVersionedHashes,p=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof p>"u")){const v=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(y=>Jt(y)),C=t.kzg,E=Df({blobs:v,kzg:C});if(typeof h>"u"&&(h=Rb({commitments:E})),typeof p>"u"){const y=kf({blobs:v,commitments:E,kzg:C});p=Mb({blobs:v,commitments:E,proofs:y})}}const f=yc(l),g=[oe(r),s?oe(s):"0x",u?oe(u):"0x",c?oe(c):"0x",n?oe(n):"0x",i??"0x",o?oe(o):"0x",d??"0x",f,a?oe(a):"0x",h??[],...ko(t,e)],m=[],w=[],b=[];if(p)for(let v=0;v<p.length;v++){const{blob:C,commitment:E,proof:y}=p[v];m.push(C),w.push(E),b.push(y)}return nn(["0x03",_n(p?[g,m,w,b]:g)])}function v1(t,e){const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:l}=t;Bf(t);const d=yc(u),h=[oe(r),s?oe(s):"0x",c?oe(c):"0x",a?oe(a):"0x",n?oe(n):"0x",i??"0x",o?oe(o):"0x",l??"0x",d,...ko(t,e)];return nn(["0x02",_n(h)])}function E1(t,e){const{chainId:r,gas:n,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:u}=t;m1(t);const l=yc(c),d=[oe(r),i?oe(i):"0x",u?oe(u):"0x",n?oe(n):"0x",o??"0x",a?oe(a):"0x",s??"0x",l,...ko(t,e)];return nn(["0x01",_n(d)])}function _1(t,e){const{chainId:r=0,gas:n,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;y1(t);let u=[i?oe(i):"0x",c?oe(c):"0x",n?oe(n):"0x",o??"0x",a?oe(a):"0x",s??"0x"];if(e){const l=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+e.v-27n);const p=27n+(e.v===27n?0n:1n);if(e.v!==p)throw new IC({v:e.v});return p})(),d=Gn(e.r),h=Gn(e.s);u=[...u,oe(l),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else r>0&&(u=[...u,oe(r),"0x","0x"]);return _n(u)}function ko(t,e){const r=e??t,{v:n,yParity:s}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof n>"u"&&typeof s>"u")return[];const i=Gn(r.r),o=Gn(r.s);return[typeof s=="number"?s?oe(1):"0x":n===0n?"0x":n===1n?oe(1):n===27n?"0x":oe(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}class C1 extends F{constructor(){super(["Transaction is not an EIP712 transaction.","","Transaction must:",'  - include `type: "eip712"`',"  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`"].join(`
`),{name:"InvalidEip712TransactionError"})}}function Gb(t){return!!(t.type==="eip712"||"customSignature"in t&&t.customSignature||"paymaster"in t&&t.paymaster||"paymasterInput"in t&&t.paymasterInput||"gasPerPubdata"in t&&typeof t.gasPerPubdata=="bigint"||"factoryDeps"in t&&t.factoryDeps)}function Kb(t){const{chainId:e,to:r,from:n,paymaster:s,paymasterInput:i}=t;if(!Gb(t))throw new C1;if(!e||e<=0)throw new Do({chainId:e});if(r&&!ot(r))throw new St({address:r});if(n&&!ot(n))throw new St({address:n});if(s&&!ot(s))throw new St({address:s});if(s&&!i)throw new F("`paymasterInput` must be provided when `paymaster` is defined");if(!s&&i)throw new F("`paymaster` must be provided when `paymasterInput` is defined")}function A1(t,e){return Gb(t)?S1(t):Vb(t,e)}const I1={transaction:A1};function S1(t){const{chainId:e,gas:r,nonce:n,to:s,from:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,customSignature:u,factoryDeps:l,paymaster:d,paymasterInput:h,gasPerPubdata:p,data:f}=t;Kb(t);const g=[n?oe(n):"0x",c?oe(c):"0x",a?oe(a):"0x",r?oe(r):"0x",s??"0x",o?oe(o):"0x",f??"0x",oe(e),oe(""),oe(""),oe(e),i??"0x",oe(p||xf),l??[],u??"0x",d&&h?[d,h]:[]];return nn(["0x71",_n(g)])}class N1 extends F{constructor({givenLength:e,maxBytecodeSize:r}){super(`Bytecode cannot be longer than ${r} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class P1 extends F{constructor({givenLengthInWords:e}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class T1 extends F{constructor({givenLength:e}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function x1(t){const e=ni(t);if(e.length%32!==0)throw new T1({givenLength:e.length});if(e.length>Wp)throw new N1({givenLength:e.length,maxBytecodeSize:Wp});const r=Ob(e),n=ni(r),s=e.length/32;if(s%2===0)throw new P1({givenLengthInWords:s});const i=ni(s),o=Ei(i,{size:2}),a=new Uint8Array([1,0]);return n.set(a,0),n.set(o,2),n}const O1=t=>{Kb(t);const e=R1(t);return{domain:{name:"zkSync",version:"2",chainId:t.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}};function R1(t){const{gas:e,nonce:r,to:n,from:s,value:i,maxFeePerGas:o,maxPriorityFeePerGas:a,factoryDeps:c,paymaster:u,paymasterInput:l,gasPerPubdata:d,data:h}=t;return{txType:113n,from:BigInt(s),to:n?BigInt(n):0n,gasLimit:e??0n,gasPerPubdataByteLimit:d??xf,maxFeePerGas:o??0n,maxPriorityFeePerGas:a??0n,paymaster:u?BigInt(u):0n,nonce:r?BigInt(r):0n,value:i??0n,data:h||"0x0",factoryDeps:(c==null?void 0:c.map(p=>oe(x1(p))))??[],paymasterInput:l||"0x"}}const D1={formatters:Eb,serializers:I1,custom:{getEip712Domain:O1}},Yb={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},k1={block:Pf({format(t){var r;return{transactions:(r=t.transactions)==null?void 0:r.map(n=>{if(typeof n=="string")return n;const s=hc(n);return s.typeHex==="0x7e"&&(s.isSystemTx=n.isSystemTx,s.mint=n.mint?Je(n.mint):void 0,s.sourceHash=n.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:Nf({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?Je(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:bb({format(t){return{l1GasPrice:t.l1GasPrice?Je(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?Je(t.l1GasUsed):null,l1Fee:t.l1Fee?Je(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function Zb(t,e){return M1(t)?U1(t):Vb(t,e)}const $1={transaction:Zb};function U1(t){L1(t);const{sourceHash:e,data:r,from:n,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,u=[e,n,a??"0x",o?oe(o):"0x",c?oe(c):"0x",s?oe(s):"0x",i?"0x1":"0x",r??"0x"];return nn(["0x7e",_n(u)])}function M1(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function L1(t){const{from:e,to:r}=t;if(e&&!ot(e))throw new St({address:e});if(r&&!ot(r))throw new St({address:r})}const vo={contracts:Yb,formatters:k1,serializers:$1},B1=42161,F1=Pe({id:33139,name:"Ape Chain",nativeCurrency:{name:"ApeCoin",symbol:"APE",decimals:18},rpcUrls:{default:{http:["https://rpc.apechain.com/http"],webSocket:["wss://rpc.apechain.com/ws"]}},blockExplorers:{default:{name:"Apescan",url:"https://apescan.io",apiUrl:"https://api.apescan.io/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:20889}},sourceId:B1}),j1=Pe({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),q1=Pe({id:1313161554,name:"Aurora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://mainnet.aurora.dev"]}},blockExplorers:{default:{name:"Aurorascan",url:"https://aurorascan.dev",apiUrl:"https://aurorascan.dev/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:62907816}}}),z1=Pe({id:43114,name:"Avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://snowtrace.io",apiUrl:"https://api.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),Go=1,H1=Pe({...vo,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...vo.contracts,disputeGameFactory:{[Go]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Go]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Go]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Go]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Go}),W1=Pe({id:4337,name:"Beam",network:"beam",nativeCurrency:{decimals:18,name:"Beam",symbol:"BEAM"},rpcUrls:{default:{http:["https://build.onbeam.com/rpc"],webSocket:["wss://build.onbeam.com/ws"]}},blockExplorers:{default:{name:"Beam Explorer",url:"https://subnets.avax.network/beam"}},contracts:{multicall3:{address:"0x4956f15efdc3dc16645e90cc356eafa65ffc65ec",blockCreated:1}}}),V1=1,G1=Pe({...vo,id:81457,name:"Blast",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.blast.io"]}},blockExplorers:{default:{name:"Blastscan",url:"https://blastscan.io",apiUrl:"https://api.blastscan.io/api"}},contracts:{...vo.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:212929}},sourceId:V1}),K1=Pe({id:288,name:"Boba Network",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://mainnet.boba.network"]}},blockExplorers:{default:{name:"BOBAScan",url:"https://bobascan.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:446859}}}),Y1=Pe({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),Z1={estimateFeesPerGas:async t=>{var s;if(!((s=t.request)!=null&&s.feeCurrency))return null;const[e,r]=await Promise.all([J1(t.client,t.request.feeCurrency),Q1(t.client,t.request.feeCurrency)]);return{maxFeePerGas:t.multiply(e-r)+r,maxPriorityFeePerGas:r}}};async function J1(t,e){const r=await t.request({method:"eth_gasPrice",params:[e]});return BigInt(r)}async function Q1(t,e){const r=await t.request({method:"eth_maxPriorityFeePerGas",params:[e]});return BigInt(r)}function Jb(t){return t===0||t===0n||t===void 0||t===null||t==="0"||t===""||typeof t=="string"&&(Gn(t).toLowerCase()==="0x"||Gn(t).toLowerCase()==="0x00")}function da(t){return!Jb(t)}function X1(t){return typeof t.maxFeePerGas<"u"&&typeof t.maxPriorityFeePerGas<"u"}function Qb(t){return t.type==="cip64"?!0:X1(t)&&da(t.feeCurrency)}const eA={block:Pf({format(t){var r;return{transactions:(r=t.transactions)==null?void 0:r.map(n=>typeof n=="string"?n:{...hc(n),...n.gatewayFee?{gatewayFee:Je(n.gatewayFee),gatewayFeeRecipient:n.gatewayFeeRecipient}:{},feeCurrency:n.feeCurrency})}}}),transaction:Nf({format(t){if(t.type==="0x7e")return{isSystemTx:t.isSystemTx,mint:t.mint?Je(t.mint):void 0,sourceHash:t.sourceHash,type:"deposit"};const e={feeCurrency:t.feeCurrency};return t.type==="0x7b"?e.type="cip64":(t.type==="0x7c"&&(e.type="cip42"),e.gatewayFee=t.gatewayFee?Je(t.gatewayFee):null,e.gatewayFeeRecipient=t.gatewayFeeRecipient),e}}),transactionRequest:vb({format(t){const e={};return t.feeCurrency&&(e.feeCurrency=t.feeCurrency),Qb(t)&&(e.type="0x7b"),e}})};function tA(t,e){return Qb(t)?nA(t,e):Zb(t,e)}const rA={transaction:tA};function nA(t,e){iA(t);const{chainId:r,gas:n,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,feeCurrency:l,data:d}=t,h=[oe(r),s?oe(s):"0x",c?oe(c):"0x",a?oe(a):"0x",n?oe(n):"0x",i??"0x",o?oe(o):"0x",d??"0x",yc(u),l,...ko(t,e)];return nn(["0x7b",_n(h)])}const sA=pc;function iA(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:s,to:i,feeCurrency:o}=t;if(e<=0)throw new Do({chainId:e});if(i&&!ot(i))throw new St({address:i});if(n)throw new F("`gasPrice` is not a valid CIP-64 Transaction attribute.");if(da(s)&&s>sA)throw new xs({maxFeePerGas:s});if(da(r)&&da(s)&&r>s)throw new bo({maxFeePerGas:s,maxPriorityFeePerGas:r});if(da(o)&&!ot(o))throw new F("`feeCurrency` MUST be a token address for CIP-64 transactions.");if(Jb(o))throw new F("`feeCurrency` must be provided for CIP-64 transactions.")}const oA={contracts:Yb,formatters:eA,serializers:rA,fees:Z1},aA=Pe({...oA,id:42220,name:"Celo",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://forno.celo.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://celoscan.io",apiUrl:"https://api.celoscan.io/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:13112599}},testnet:!1}),cA=Pe({id:25,name:"Cronos Mainnet",nativeCurrency:{decimals:18,name:"Cronos",symbol:"CRO"},rpcUrls:{default:{http:["https://evm.cronos.org"]}},blockExplorers:{default:{name:"Cronos Explorer",url:"https://explorer.cronos.org",apiUrl:"https://explorer-api.cronos.org/mainnet/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:1963112}}}),uA=Pe({id:666666666,name:"Degen",nativeCurrency:{decimals:18,name:"Degen",symbol:"DEGEN"},rpcUrls:{default:{http:["https://rpc.degen.tips"],webSocket:["wss://rpc.degen.tips"]}},blockExplorers:{default:{name:"Degen Chain Explorer",url:"https://explorer.degen.tips",apiUrl:"https://explorer.degen.tips/api/v2"}}});function lA({chain:t,currentChainId:e}){if(!t)throw new KC;if(e!==t.id)throw new GC({chain:t,currentChainId:e})}function Xb({blockNumber:t,chain:e,contract:r}){var s;const n=(s=e==null?void 0:e.contracts)==null?void 0:s[r];if(!n)throw new lh({chain:e,contract:{name:r}});if(t&&n.blockCreated&&n.blockCreated>t)throw new lh({blockNumber:t,chain:e,contract:{name:r,blockCreated:n.blockCreated}});return n.address}const dA=Pe({id:250,name:"Fantom",nativeCurrency:{decimals:18,name:"Fantom",symbol:"FTM"},rpcUrls:{default:{http:["https://250.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"FTMScan",url:"https://ftmscan.com",apiUrl:"https://api.ftmscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:33001987}}}),hA=Pe({id:14,name:"Flare Mainnet",nativeCurrency:{decimals:18,name:"Flare",symbol:"FLR"},rpcUrls:{default:{http:["https://flare-api.flare.network/ext/C/rpc"]}},blockExplorers:{default:{name:"Flare Explorer",url:"https://flare-explorer.flare.network",apiUrl:"https://flare-explorer.flare.network/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3002461}}}),fA=Pe({id:122,name:"Fuse",nativeCurrency:{name:"Fuse",symbol:"FUSE",decimals:18},rpcUrls:{default:{http:["https://rpc.fuse.io"]}},blockExplorers:{default:{name:"Fuse Explorer",url:"https://explorer.fuse.io",apiUrl:"https://explorer.fuse.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:16146628}}}),pA=Pe({id:100,name:"Gnosis",nativeCurrency:{decimals:18,name:"xDAI",symbol:"XDAI"},rpcUrls:{default:{http:["https://rpc.gnosischain.com"],webSocket:["wss://rpc.gnosischain.com/wss"]}},blockExplorers:{default:{name:"Gnosisscan",url:"https://gnosisscan.io",apiUrl:"https://api.gnosisscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:21022491}}}),gA=Pe({id:16666e5,name:"Harmony One",nativeCurrency:{name:"Harmony",symbol:"ONE",decimals:18},rpcUrls:{default:{http:["https://1666600000.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Harmony Explorer",url:"https://explorer.harmony.one"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:24185753}}}),mA=Pe({id:2222,name:"Kava EVM",network:"kava-mainnet",nativeCurrency:{name:"Kava",symbol:"KAVA",decimals:18},rpcUrls:{default:{http:["https://evm.kava.io"]}},blockExplorers:{default:{name:"Kava EVM Explorer",url:"https://kavascan.com",apiUrl:"https://kavascan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3661165}},testnet:!1});function Nn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class cl extends F{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Hl extends F{constructor({docsPath:e,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:e,metaMessages:r,name:"AccountTypeNotSupportedError"})}}const yA={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},wA={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},bA={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Os(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new OA(t.type);return`${t.name}(${ul(t.inputs,{includeName:e})})`}function ul(t,{includeName:e=!1}={}){return t?t.map(r=>vA(r,{includeName:e})).join(e?", ":","):""}function vA(t,{includeName:e}){return t.type.startsWith("tuple")?`(${ul(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class EA extends F{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class eg extends F{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class e0 extends F{constructor({data:e,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${ul(r,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=r,this.size=n}}class ll extends F{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class _A extends F{constructor({expectedLength:e,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class CA extends F{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${ht(r)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class AA extends F{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class d7 extends F{constructor(e,{docsPath:r}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:r,name:"AbiErrorInputsNotFoundError"})}}class h7 extends F{constructor(e,{docsPath:r}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:r,name:"AbiErrorNotFoundError"})}}class t0 extends F{constructor(e,{docsPath:r}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class IA extends F{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class r0 extends F{constructor(e,{docsPath:r}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiEventSignatureNotFoundError"})}}class Ou extends F{constructor(e,{docsPath:r}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}}class SA extends F{constructor(e,{docsPath:r}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionOutputsNotFoundError"})}}class f7 extends F{constructor(e,{docsPath:r}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:r,name:"AbiFunctionSignatureNotFoundError"})}}class NA extends F{constructor(e,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Os(e.abiItem)}\`, and`,`\`${r.type}\` in \`${Os(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class bh extends F{constructor({abiItem:e,data:r,params:n,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${ul(n,{includeName:!0})})`,`Data:   ${r} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=r,this.params=n,this.size=s}}class n0 extends F{constructor({abiItem:e,param:r}){super([`Expected a topic for indexed event parameter${r.name?` "${r.name}"`:""} on event "${Os(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class PA extends F{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}}class TA extends F{constructor(e,{docsPath:r}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}}class xA extends F{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class OA extends F{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}const RA=t=>mc(ni(t));function DA(t){return RA(t)}const kA="1.0.8";let Ur=class vh extends Error{constructor(e,r={}){var o;const n=r.cause instanceof vh?r.cause.details:(o=r.cause)!=null&&o.message?r.cause.message:r.details,s=r.cause instanceof vh&&r.cause.docsPath||r.docsPath,i=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${kA}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.shortMessage=e}};function Jn(t,e){const r=t.exec(e);return r==null?void 0:r.groups}const s0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,i0=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,o0=/^\(.+?\).*?$/,tg=/^tuple(?<array>(\[(\d*)\])*)$/;function Eh(t){let e=t.type;if(tg.test(t.type)&&"components"in t){e="(";const r=t.components.length;for(let s=0;s<r;s++){const i=t.components[s];e+=Eh(i),s<r-1&&(e+=", ")}const n=Jn(tg,t.type);return e+=`)${(n==null?void 0:n.array)??""}`,Eh({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ko(t){let e="";const r=t.length;for(let n=0;n<r;n++){const s=t[n];e+=Eh(s),n!==r-1&&(e+=", ")}return e}function $A(t){var e;return t.type==="function"?`function ${t.name}(${Ko(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ko(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ko(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ko(t.inputs)})`:t.type==="constructor"?`constructor(${Ko(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const a0=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function UA(t){return a0.test(t)}function MA(t){return Jn(a0,t)}const c0=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function LA(t){return c0.test(t)}function BA(t){return Jn(c0,t)}const u0=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function FA(t){return u0.test(t)}function jA(t){return Jn(u0,t)}const l0=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function d0(t){return l0.test(t)}function qA(t){return Jn(l0,t)}const h0=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function zA(t){return h0.test(t)}function HA(t){return Jn(h0,t)}const f0=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function WA(t){return f0.test(t)}function VA(t){return Jn(f0,t)}const GA=/^receive\(\) external payable$/;function KA(t){return GA.test(t)}const YA=new Set(["indexed"]),_h=new Set(["calldata","memory","storage"]);class ZA extends Ur{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class JA extends Ur{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class QA extends Ur{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class XA extends Ur{constructor({param:e,name:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class eI extends Ur{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class tI extends Ur{constructor({param:e,type:r,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class rI extends Ur{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class $o extends Ur{constructor({signature:e,type:r}){super(`Invalid ${r} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class nI extends Ur{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class sI extends Ur{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class iI extends Ur{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class oI extends Ur{constructor({current:e,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function aI(t,e,r){let n="";if(r)for(const s of Object.entries(r)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;n+=`(${s[0]}{${i}})`}return e?`${e}:${t}${n}`:t}const Wl=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function cI(t,e={}){if(FA(t))return uI(t,e);if(LA(t))return lI(t,e);if(UA(t))return dI(t,e);if(zA(t))return hI(t,e);if(WA(t))return fI(t);if(KA(t))return{type:"receive",stateMutability:"payable"};throw new nI({signature:t})}function uI(t,e={}){const r=jA(t);if(!r)throw new $o({signature:t,type:"function"});const n=Zr(r.parameters),s=[],i=n.length;for(let a=0;a<i;a++)s.push(ui(n[a],{modifiers:_h,structs:e,type:"function"}));const o=[];if(r.returns){const a=Zr(r.returns),c=a.length;for(let u=0;u<c;u++)o.push(ui(a[u],{modifiers:_h,structs:e,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:s,outputs:o}}function lI(t,e={}){const r=BA(t);if(!r)throw new $o({signature:t,type:"event"});const n=Zr(r.parameters),s=[],i=n.length;for(let o=0;o<i;o++)s.push(ui(n[o],{modifiers:YA,structs:e,type:"event"}));return{name:r.name,type:"event",inputs:s}}function dI(t,e={}){const r=MA(t);if(!r)throw new $o({signature:t,type:"error"});const n=Zr(r.parameters),s=[],i=n.length;for(let o=0;o<i;o++)s.push(ui(n[o],{structs:e,type:"error"}));return{name:r.name,type:"error",inputs:s}}function hI(t,e={}){const r=HA(t);if(!r)throw new $o({signature:t,type:"constructor"});const n=Zr(r.parameters),s=[],i=n.length;for(let o=0;o<i;o++)s.push(ui(n[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:s}}function fI(t){const e=VA(t);if(!e)throw new $o({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const pI=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,gI=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,mI=/^u?int$/;function ui(t,e){var d,h;const r=aI(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Wl.has(r))return Wl.get(r);const n=o0.test(t),s=Jn(n?gI:pI,t);if(!s)throw new QA({param:t});if(s.name&&wI(s.name))throw new XA({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,u={};if(n){c="tuple";const p=Zr(s.type),f=[],g=p.length;for(let m=0;m<g;m++)f.push(ui(p[m],{structs:a}));u={components:f}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(mI.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!p0(c))throw new JA({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new eI({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(_h.has(s.modifier)&&!bI(c,!!s.array))throw new tI({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return Wl.set(r,l),l}function Zr(t,e=[],r="",n=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return n===0?Zr(a,[...e,r.trim()]):Zr(a,e,`${r}${o}`,n);case"(":return Zr(a,e,`${r}${o}`,n+1);case")":return Zr(a,e,`${r}${o}`,n-1);default:return Zr(a,e,`${r}${o}`,n)}}if(r==="")return e;if(n!==0)throw new oI({current:r,depth:n});return e.push(r.trim()),e}function p0(t){return t==="address"||t==="bool"||t==="function"||t==="string"||s0.test(t)||i0.test(t)}const yI=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function wI(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||s0.test(t)||i0.test(t)||yI.test(t)}function bI(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function vI(t){const e={},r=t.length;for(let o=0;o<r;o++){const a=t[o];if(!d0(a))continue;const c=qA(a);if(!c)throw new $o({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let h=0;h<d;h++){const f=u[h].trim();if(!f)continue;const g=ui(f,{type:"struct"});l.push(g)}if(!l.length)throw new sI({signature:a});e[c.name]=l}const n={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];n[a]=g0(c,e)}return n}const EI=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function g0(t,e,r=new Set){const n=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(o0.test(o.type))n.push(o);else{const c=Jn(EI,o.type);if(!(c!=null&&c.type))throw new rI({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(r.has(l))throw new iI({type:l});n.push({...o,type:`tuple${u??""}`,components:g0(e[l]??[],e,new Set([...r,l]))})}else if(p0(l))n.push(o);else throw new ZA({type:l})}}return n}function m0(t){const e=vI(t),r=[],n=t.length;for(let s=0;s<n;s++){const i=t[s];d0(i)||r.push(cI(i,e))}return r}function _I(t){let e=!0,r="",n=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&n++,a===")"&&n--,!!e){if(n===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&r!==","&&r!==",("&&(r="",e=!1);continue}s+=a,r+=a}}if(!i)throw new F("Unable to normalize signature.");return s}const CI=t=>{const e=typeof t=="string"?t:$A(t);return _I(e)};function y0(t){return DA(CI(t))}const Ff=t=>Oa(y0(t),0,4);function AI(t,e={}){typeof e.size<"u"&&Sn(t,{size:e.size});const r=Jt(t,e);return Je(r,e)}function II(t,e={}){let r=t;if(typeof e.size<"u"&&(Sn(r,{size:e.size}),r=Gn(r)),r.length>1||r[0]>1)throw new sC(r);return!!r[0]}function zn(t,e={}){typeof e.size<"u"&&Sn(t,{size:e.size});const r=Jt(t,e);return Kn(r,e)}function SI(t,e={}){let r=t;return typeof e.size<"u"&&(Sn(r,{size:e.size}),r=Gn(r,{dir:"right"})),new TextDecoder().decode(r)}const NI=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function w0(t,e){if(t.length!==e.length)throw new AA({expectedLength:t.length,givenLength:e.length});const r=PI({params:t,values:e}),n=qf(r);return n.length===0?"0x":n}function PI({params:t,values:e}){const r=[];for(let n=0;n<t.length;n++)r.push(jf({param:t[n],value:e[n]}));return r}function jf({param:t,value:e}){const r=zf(t.type);if(r){const[n,s]=r;return xI(e,{length:n,param:{...t,type:s}})}if(t.type==="tuple")return $I(e,{param:t});if(t.type==="address")return TI(e);if(t.type==="bool")return RI(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const n=t.type.startsWith("int"),[,,s="256"]=NI.exec(t.type)??[];return DI(e,{signed:n,size:Number(s)})}if(t.type.startsWith("bytes"))return OI(e,{param:t});if(t.type==="string")return kI(e);throw new PA(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function qf(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=ht(a)}const r=[],n=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(r.push(Ne(e+s,{size:32})),n.push(a),s+=ht(a)):r.push(a)}return wo([...r,...n])}function TI(t){if(!ot(t))throw new St({address:t});return{dynamic:!1,encoded:Cs(t.toLowerCase())}}function xI(t,{length:e,param:r}){const n=e===null;if(!Array.isArray(t))throw new xA(t);if(!n&&t.length!==e)throw new _A({expectedLength:e,givenLength:t.length,type:`${r.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=jf({param:r,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(n||s){const o=qf(i);if(n){const a=Ne(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?wo([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:wo(i.map(({encoded:o})=>o))}}function OI(t,{param:e}){const[,r]=e.type.split("bytes"),n=ht(t);if(!r){let s=t;return n%32!==0&&(s=Cs(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:wo([Cs(Ne(n,{size:32})),s])}}if(n!==Number.parseInt(r))throw new CA({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:Cs(t,{dir:"right"})}}function RI(t){if(typeof t!="boolean")throw new F(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Cs(pb(t))}}function DI(t,{signed:e,size:r=256}){if(typeof r=="number"){const n=2n**(BigInt(r)-(e?1n:0n))-1n,s=e?-n-1n:0n;if(t>n||t<s)throw new db({max:n.toString(),min:s.toString(),signed:e,size:r/8,value:t.toString()})}return{dynamic:!1,encoded:Ne(t,{size:32,signed:e})}}function kI(t){const e=Sf(t),r=Math.ceil(ht(e)/32),n=[];for(let s=0;s<r;s++)n.push(Cs(Oa(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:wo([Cs(Ne(ht(e),{size:32})),...n])}}function $I(t,{param:e}){let r=!1;const n=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=jf({param:i,value:t[o]});n.push(a),a.dynamic&&(r=!0)}return{dynamic:r,encoded:r?qf(n):wo(n.map(({encoded:s})=>s))}}function zf(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function dl(t,e){const r=typeof e=="string"?kr(e):e,n=Of(r);if(ht(r)===0&&t.length>0)throw new ll;if(ht(e)&&ht(e)<32)throw new e0({data:typeof e=="string"?e:Jt(e),params:t,size:ht(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];n.setPosition(s);const[c,u]=no(n,a,{staticPosition:0});s+=u,i.push(c)}return i}function no(t,e,{staticPosition:r}){const n=zf(e.type);if(n){const[s,i]=n;return MI(t,{...e,type:i},{length:s,staticPosition:r})}if(e.type==="tuple")return jI(t,e,{staticPosition:r});if(e.type==="address")return UI(t);if(e.type==="bool")return LI(t);if(e.type.startsWith("bytes"))return BI(t,e,{staticPosition:r});if(e.type.startsWith("uint")||e.type.startsWith("int"))return FI(t,e);if(e.type==="string")return qI(t,{staticPosition:r});throw new TA(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const rg=32,Ch=32;function UI(t){const e=t.readBytes(32);return[al(Jt(Hb(e,-20))),32]}function MI(t,e,{length:r,staticPosition:n}){if(!r){const o=zn(t.readBytes(Ch)),a=n+o,c=a+rg;t.setPosition(a);const u=zn(t.readBytes(rg)),l=Ra(e);let d=0;const h=[];for(let p=0;p<u;++p){t.setPosition(c+(l?p*32:d));const[f,g]=no(t,e,{staticPosition:c});d+=g,h.push(f)}return t.setPosition(n+32),[h,32]}if(Ra(e)){const o=zn(t.readBytes(Ch)),a=n+o,c=[];for(let u=0;u<r;++u){t.setPosition(a+u*32);const[l]=no(t,e,{staticPosition:a});c.push(l)}return t.setPosition(n+32),[c,32]}let s=0;const i=[];for(let o=0;o<r;++o){const[a,c]=no(t,e,{staticPosition:n+s});s+=c,i.push(a)}return[i,s]}function LI(t){return[II(t.readBytes(32),{size:32}),32]}function BI(t,e,{staticPosition:r}){const[n,s]=e.type.split("bytes");if(!s){const o=zn(t.readBytes(32));t.setPosition(r+o);const a=zn(t.readBytes(32));if(a===0)return t.setPosition(r+32),["0x",32];const c=t.readBytes(a);return t.setPosition(r+32),[Jt(c),32]}return[Jt(t.readBytes(Number.parseInt(s),32)),32]}function FI(t,e){const r=e.type.startsWith("int"),n=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[n>48?AI(s,{signed:r}):zn(s,{signed:r}),32]}function jI(t,e,{staticPosition:r}){const n=e.components.length===0||e.components.some(({name:o})=>!o),s=n?[]:{};let i=0;if(Ra(e)){const o=zn(t.readBytes(Ch)),a=r+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,d]=no(t,u,{staticPosition:a});i+=d,s[n?c:u==null?void 0:u.name]=l}return t.setPosition(r+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=no(t,a,{staticPosition:r});s[n?o:a==null?void 0:a.name]=c,i+=u}return[s,i]}function qI(t,{staticPosition:e}){const r=zn(t.readBytes(32)),n=e+r;t.setPosition(n);const s=zn(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=SI(Gn(i));return t.setPosition(e+32),[o,32]}function Ra(t){var n;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(n=t.components)==null?void 0:n.some(Ra);const r=zf(t.type);return!!(r&&Ra({...t,type:r[1]}))}function zI(t){const{abi:e,data:r}=t,n=Oa(r,0,4);if(n==="0x")throw new ll;const i=[...e||[],wA,bA].find(o=>o.type==="error"&&n===Ff(Os(o)));if(!i)throw new t0(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?dl(i.inputs,Oa(r,4)):void 0,errorName:i.name}}const li=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r);function b0({abiItem:t,args:e,includeFunctionName:r=!0,includeName:n=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${r?t.name:""}(${t.inputs.map((s,i)=>`${n&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?li(e[i]):e[i]}`).join(", ")})`}const Hf=y0;function Wf(t){const{abi:e,args:r=[],name:n}=t,s=Ts(n,{strict:!1}),i=e.filter(a=>s?a.type==="function"?Ff(a)===n:a.type==="event"?Hf(a)===n:!1:"name"in a&&a.name===n);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!r||r.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==r.length)continue;if(r.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?Ah(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=v0(a.inputs,o.inputs,r);if(u)throw new NA({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function Ah(t,e){const r=typeof t,n=e.type;switch(n){case"address":return ot(t,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Ah(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(t)&&t.every(s=>Ah(s,{...e,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function v0(t,e,r){for(const n in t){const s=t[n],i=e[n];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return v0(s.components,i.components,r[n]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ot(r[n],{strict:!1}):o.includes("address")&&o.includes("bytes")?ot(r[n],{strict:!1}):!1)return o}}class HI extends F{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class WI extends F{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function ng(t){return t.reduce((e,{slot:r,value:n})=>`${e}        ${r}: ${n}
`,"")}function VI(t){return t.reduce((e,{address:r,...n})=>{let s=`${e}    ${r}:
`;return n.nonce&&(s+=`      nonce: ${n.nonce}
`),n.balance&&(s+=`      balance: ${n.balance}
`),n.code&&(s+=`      code: ${n.code}
`),n.state&&(s+=`      state:
`,s+=ng(n.state)),n.stateDiff&&(s+=`      stateDiff:
`,s+=ng(n.stateDiff)),s},`  State Override:
`).slice(0,-1)}const GI=t=>t,E0=t=>t;class KI extends F{constructor(e,{account:r,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h,stateOverride:p}){var m;const f=r?Nn(r):void 0;let g=gc({from:f==null?void 0:f.address,to:d,value:typeof h<"u"&&`${Rf(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lr(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${lr(u)} gwei`,nonce:l});p&&(g+=`
${VI(p)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class YI extends F{constructor(e,{abi:r,args:n,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Wf({abi:r,args:n,name:o}),u=c?b0({abiItem:c,args:n,includeFunctionName:!1,includeName:!1}):void 0,l=c?Os(c,{includeName:!0}):void 0,d=gc({address:s&&GI(s),function:l,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class ZI extends F{constructor({abi:e,data:r,functionName:n,message:s}){let i,o,a,c;if(r&&r!=="0x")try{o=zI({abi:e,data:r});const{abiItem:l,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[p]=h;c=yA[p]}else{const p=l?Os(l,{includeName:!0}):void 0,f=l&&h?b0({abiItem:l,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[p?`Error: ${p}`:"",f&&f!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${f}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof t0&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${n}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${n}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=r,this.reason=c,this.signature=u}}class JI extends F{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class QI extends F{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Vf extends F{constructor({data:e,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class p7 extends F{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${E0(o)}`,e&&`Request body: ${li(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class _0 extends F{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${E0(n)}`,`Request body: ${li(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}const XI=-1;class eS extends F{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof _0?e.code:r??XI}}class hl extends eS{constructor(e){super(e,{code:hl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});function Gf(t,e){const r=(t.details||"").toLowerCase(),n=t instanceof F?t.walk(s=>(s==null?void 0:s.code)===eo.code):t;return n instanceof F?new eo({cause:t,message:n.details}):eo.nodeMessage.test(r)?new eo({cause:t,message:t.details}):xs.nodeMessage.test(r)?new xs({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):dh.nodeMessage.test(r)?new dh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):hh.nodeMessage.test(r)?new hh({cause:t,nonce:e==null?void 0:e.nonce}):fh.nodeMessage.test(r)?new fh({cause:t,nonce:e==null?void 0:e.nonce}):ph.nodeMessage.test(r)?new ph({cause:t,nonce:e==null?void 0:e.nonce}):gh.nodeMessage.test(r)?new gh({cause:t}):mh.nodeMessage.test(r)?new mh({cause:t,gas:e==null?void 0:e.gas}):yh.nodeMessage.test(r)?new yh({cause:t,gas:e==null?void 0:e.gas}):wh.nodeMessage.test(r)?new wh({cause:t}):bo.nodeMessage.test(r)?new bo({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new ol({cause:t})}function C0(t,{docsPath:e,...r}){const n=(()=>{const s=Gf(t,r);return s instanceof ol?t:s})();return new KI(n,{docsPath:e,...r})}function fl(t,{format:e}){if(!e)return{};const r={};function n(i){const o=Object.keys(i);for(const a of o)a in t&&(r[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&n(i[a])}const s=e(t||{});return n(s),r}function wc(t){const{account:e,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:s,to:i}=t,o=e?Nn(e):void 0;if(o&&!ot(o.address))throw new St({address:o.address});if(i&&!ot(i))throw new St({address:i});if(typeof r<"u"&&(typeof n<"u"||typeof s<"u"))throw new AC;if(n&&n>pc)throw new xs({maxFeePerGas:n});if(s&&n&&s>n)throw new bo({maxFeePerGas:n,maxPriorityFeePerGas:s})}async function tS(t,e){var s,i,o;const{account:r=t.account}=e;if(!r)throw new cl;const n=Nn(r);try{const{accessList:a,blockNumber:c,blockTag:u,data:l,gas:d,gasPrice:h,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:g,to:m,value:w,...b}=e,C=(typeof c=="bigint"?Ne(c):void 0)||u;wc(e);const E=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,_=(E||fc)({...fl(b,{format:E}),from:n==null?void 0:n.address,accessList:a,data:l,gas:d,gasPrice:h,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:g,to:m,value:w}),{baseFeePerGas:P,gasLimit:I,priorityFeePerGas:x}=await t.request({method:"linea_estimateGas",params:C?[_,C]:[_]});return{baseFeePerGas:BigInt(P),gasLimit:BigInt(I),priorityFeePerGas:BigInt(x)}}catch(a){throw C0(a,{...e,account:n,chain:t.chain})}}const rS={fees:{estimateFeesPerGas:sg,async maxPriorityFeePerGas({block:t,client:e,request:r}){const n=await sg({block:t,client:e,multiply:s=>s,request:r,type:"eip1559"});return n!=null&&n.maxPriorityFeePerGas?n.maxPriorityFeePerGas:null}}};async function sg({client:t,multiply:e,request:r,type:n}){try{const s=await tS(t,{...r,account:r==null?void 0:r.account}),{priorityFeePerGas:i}=s,a=e(BigInt(s.baseFeePerGas))+i;return n==="legacy"?{gasPrice:a}:{maxFeePerGas:a,maxPriorityFeePerGas:i}}catch{return null}}const nS=Pe({...rS,id:59144,name:"Linea Mainnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://lineascan.build",apiUrl:"https://api.lineascan.build/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:42},ensRegistry:{address:"0x50130b669B28C339991d8676FA73CF122a121267",blockCreated:6682888},ensUniversalResolver:{address:"0x3aA974fb3f8C1E02796048BDCdeD79e9D53a6965",blockCreated:6683e3}},ensTlds:[".linea.eth"],testnet:!1}),sS=Pe({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),iS=Pe({id:169,name:"Manta Pacific Mainnet",network:"manta",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://pacific-rpc.manta.network/http"]}},blockExplorers:{default:{name:"Manta Explorer",url:"https://pacific-explorer.manta.network",apiUrl:"https://pacific-explorer.manta.network/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:332890}}}),oS=Pe({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}}),aS=Pe({id:1088,name:"Metis",nativeCurrency:{decimals:18,name:"Metis",symbol:"METIS"},rpcUrls:{default:{http:["https://metis.rpc.hypersync.xyz","https://metis-pokt.nodies.app","https://api.blockeden.xyz/metis/67nCBdZQSH9z3YqDDjdm","https://metis-andromeda.rpc.thirdweb.com","https://metis-andromeda.gateway.tenderly.co","https://metis.api.onfinality.io/public","https://andromeda.metis.io/?owner=1088","https://metis-mainnet.public.blastapi.io"],webSocket:["wss://metis-rpc.publicnode.com","wss://metis.drpc.org"]}},blockExplorers:{default:{name:"Metis Explorer",url:"https://explorer.metis.io",apiUrl:"https://api.routescan.io/v2/network/mainnet/evm/1088/etherscan/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:2338552}}}),cS=Pe({id:248,name:"Oasys",nativeCurrency:{name:"Oasys",symbol:"OAS",decimals:18},rpcUrls:{default:{http:["https://rpc.mainnet.oasys.games"]}},blockExplorers:{default:{name:"OasysScan",url:"https://scan.oasys.games",apiUrl:"https://scan.oasys.games/api"}}}),uS=Pe({id:66,name:"OKC",nativeCurrency:{decimals:18,name:"OKT",symbol:"OKT"},rpcUrls:{default:{http:["https://exchainrpc.okex.org"]}},blockExplorers:{default:{name:"oklink",url:"https://www.oklink.com/okc"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:10364792}}}),Yo=1,lS=Pe({...vo,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...vo.contracts,disputeGameFactory:{[Yo]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[Yo]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[Yo]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[Yo]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:Yo}),dS=Pe({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),hS=Pe({id:369,name:"PulseChain",nativeCurrency:{name:"Pulse",symbol:"PLS",decimals:18},testnet:!1,rpcUrls:{default:{http:["https://rpc.pulsechain.com"],webSocket:["wss://ws.pulsechain.com"]}},blockExplorers:{default:{name:"PulseScan",url:"https://scan.pulsechain.com",apiUrl:"https://api.scan.pulsechain.com/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),fS=Pe({id:2020,name:"Ronin",nativeCurrency:{name:"RON",symbol:"RON",decimals:18},rpcUrls:{default:{http:["https://api.roninchain.com/rpc"]}},blockExplorers:{default:{name:"Ronin Explorer",url:"https://app.roninchain.com"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:26023535}}}),pS=Pe({id:534352,name:"Scroll",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.scroll.io"],webSocket:["wss://wss-rpc.scroll.io/ws"]}},blockExplorers:{default:{name:"Scrollscan",url:"https://scrollscan.com",apiUrl:"https://api.scrollscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14}},testnet:!1}),gS=Pe({id:167e3,name:"Taiko Mainnet",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.mainnet.taiko.xyz"],webSocket:["wss://ws.mainnet.taiko.xyz"]}},blockExplorers:{default:{name:"Taikoscan",url:"https://taikoscan.io",apiUrl:"https://api.taikoscan.io/api"}},contracts:{multicall3:{address:"0xcb2436774C3e191c85056d248EF4260ce5f27A9D"}}}),mS=Pe({id:40,name:"Telos",nativeCurrency:{decimals:18,name:"Telos",symbol:"TLOS"},rpcUrls:{default:{http:["https://rpc.telos.net"]}},blockExplorers:{default:{name:"Teloscan",url:"https://www.teloscan.io/"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:246530709}}}),yS=Pe({...D1,id:324,name:"ZKsync Era",network:"zksync-era",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://mainnet.era.zksync.io"],webSocket:["wss://mainnet.era.zksync.io/ws"]}},blockExplorers:{default:{name:"Etherscan",url:"https://era.zksync.network/",apiUrl:"https://api-era.zksync.network/api"},native:{name:"ZKsync Explorer",url:"https://explorer.zksync.io/",apiUrl:"https://block-explorer-api.mainnet.zksync.io/api"}},contracts:{multicall3:{address:"0xF9cda624FBC7e059355ce98a31693d299FACd963"},universalSignatureVerifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:45659388}}});function bc(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const ig=bc({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),og=bc({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});bc({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});bc({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});bc({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const wS="modulepreload",bS=function(t){return"/"+t},ag={},or=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(r.map(u=>{if(u=bS(u),u in ag)return;ag[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":wS,l||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),l)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Vl="/docs/contract/encodeDeployData";function A0(t){const{abi:e,args:r,bytecode:n}=t;if(!r||r.length===0)return n;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new EA({docsPath:Vl});if(!("inputs"in s))throw new eg({docsPath:Vl});if(!s.inputs||s.inputs.length===0)throw new eg({docsPath:Vl});const i=w0(s.inputs,r);return nn([n,i])}function vS(t){const e=mc(`0x${t.substring(4)}`).substring(26);return al(`0x${e}`)}async function ES({hash:t,signature:e}){const r=Ts(t)?t:oe(t),{secp256k1:n}=await or(async()=>{const{secp256k1:o}=await import("./chunk.secp256k1-BmPlphWx.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:h}=e,p=Number(h??d),f=cg(p);return new n.Signature(Je(u),Je(l)).addRecoveryBit(f)}const o=Ts(e)?e:oe(e);if(ht(o)!==65)throw new Error("invalid signature length");const a=Kn(`0x${o.slice(130)}`),c=cg(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function cg(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function _S({hash:t,signature:e}){return vS(await ES({hash:t,signature:e}))}function CS(t){const{chainId:e,nonce:r,to:n}=t,s=t.contractAddress??t.address,i=mc(nn(["0x05",_n([e?Ne(e):"0x",s,r?Ne(r):"0x"])]));return n==="bytes"?kr(i):i}async function I0(t){const{authorization:e,signature:r}=t;return _S({hash:CS(e),signature:r??e})}function AS(t,{docsPath:e,...r}){const n=(()=>{const s=Gf(t,r);return s instanceof ol?t:s})();return new PC(n,{docsPath:e,...r})}function rt(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const s=t[r];return typeof s=="function"?s:i=>e(t,i)}async function S0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Kn(e)}class IS extends F{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Kf extends F{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class SS extends F{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${lr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class N0 extends F{constructor({blockHash:e,blockNumber:r}){let n="Block";e&&(n=`Block at hash "${e}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}async function Da(t,{blockHash:e,blockNumber:r,blockTag:n,includeTransactions:s}={}){var l,d,h;const i=n??"latest",o=s??!1,a=r!==void 0?Ne(r):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new N0({blockHash:e,blockNumber:r});return(((h=(d=(l=t.chain)==null?void 0:l.formatters)==null?void 0:d.block)==null?void 0:h.format)||yb)(c)}async function P0(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function NS(t,e){var i,o;const{block:r,chain:n=t.chain,request:s}=e||{};try{const a=((i=n==null?void 0:n.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=n==null?void 0:n.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const u=r||await rt(t,Da,"getBlock")({}),l=await a({block:u,client:t,request:s});if(l===null)throw new Error;return l}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Je(c)}catch{const[a,c]=await Promise.all([r?Promise.resolve(r):rt(t,Da,"getBlock")({}),rt(t,P0,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Kf;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function ug(t,e){var h,p;const{block:r,chain:n=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var f,g;return typeof((f=n==null?void 0:n.fees)==null?void 0:f.baseFeeMultiplier)=="function"?n.fees.baseFeeMultiplier({block:r,client:t,request:s}):((g=n==null?void 0:n.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new IS;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),u=f=>f*BigInt(Math.ceil(o*c))/BigInt(c),l=r||await rt(t,Da,"getBlock")({});if(typeof((p=n==null?void 0:n.fees)==null?void 0:p.estimateFeesPerGas)=="function"){const f=await n.fees.estimateFeesPerGas({block:r,client:t,multiply:u,request:s,type:i});if(f!==null)return f}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Kf;const f=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await NS(t,{block:l,chain:n,request:s}),g=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+f,maxPriorityFeePerGas:f}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await rt(t,P0,"getGasPrice")({}))}}class PS extends F{constructor(e,{account:r,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){var f;const p=gc({from:r==null?void 0:r.address,to:d,value:typeof h<"u"&&`${Rf(h)} ${((f=s==null?void 0:s.nativeCurrency)==null?void 0:f.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lr(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${lr(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function TS(t,{docsPath:e,...r}){const n=(()=>{const s=Gf(t,r);return s instanceof ol?t:s})();return new PS(n,{docsPath:e,...r})}function lg(t){if(!(!t||t.length===0))return t.reduce((e,{slot:r,value:n})=>{if(r.length!==66)throw new zp({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new zp({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e},{})}function xS(t){const{balance:e,nonce:r,state:n,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ne(e)),r!==void 0&&(o.nonce=Ne(r)),n!==void 0&&(o.state=lg(n)),s!==void 0){if(o.state)throw new WI;o.stateDiff=lg(s)}return o}function T0(t){if(!t)return;const e={};for(const{address:r,...n}of t){if(!ot(r,{strict:!1}))throw new St({address:r});if(e[r])throw new HI({address:r});e[r]=xS(n)}return e}async function x0(t,{address:e,blockNumber:r,blockTag:n="latest"}){const s=typeof r=="bigint"?Ne(r):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||n]});return BigInt(i)}async function O0(t,e){var s,i,o;const{account:r=t.account}=e,n=r?Nn(r):void 0;try{let O=function(N){const{block:R,request:$,rpcStateOverride:k}=N;return t.request({method:"eth_estimateGas",params:k?[$,R??"latest",k]:R?[$,R]:[$]})};const{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:d,blockTag:h,data:p,gas:f,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,value:C,stateOverride:E,...y}=await Yf(t,{...e,parameters:(n==null?void 0:n.type)==="local"?void 0:["blobVersionedHashes"]}),P=(typeof d=="bigint"?Ne(d):void 0)||h,I=T0(E),x=await(async()=>{if(y.to)return y.to;if(c&&c.length>0)return await I0({authorization:c[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`")})})();wc(e);const D=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,B=(D||fc)({...fl(y,{format:D}),from:n==null?void 0:n.address,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,data:p,gas:f,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:x,value:C});let S=BigInt(await O({block:P,request:B,rpcStateOverride:I}));if(c){const N=await x0(t,{address:B.from}),R=await Promise.all(c.map(async $=>{const{address:k}=$,U=await O({block:P,request:{authorizationList:void 0,data:p,from:n==null?void 0:n.address,to:k,value:Ne(N)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(U)}));S+=R.reduce(($,k)=>$+k,0n)}return S}catch(a){throw TS(a,{...e,account:n,chain:t.chain})}}async function OS(t,{address:e,blockTag:r="latest",blockNumber:n}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof n=="bigint"?Ne(n):r]},{dedupe:!!n});return Kn(s)}const R0=["blobVersionedHashes","chainId","fees","gas","nonce","type"],dg=new Map;async function Yf(t,e){const{account:r=t.account,blobs:n,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:u=R0,type:l}=e,d=r&&Nn(r),h={...e,...d?{from:d==null?void 0:d.address}:{}};let p;async function f(){return p||(p=await rt(t,Da,"getBlock")({blockTag:"latest"}),p)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await rt(t,S0,"getChainId")({}),g))}if(u.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await m();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await rt(t,OS,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&n&&o){const w=Df({blobs:n,kzg:o});if(u.includes("blobVersionedHashes")){const b=Rb({commitments:w,to:"hex"});h.blobVersionedHashes=b}if(u.includes("sidecars")){const b=kf({blobs:n,commitments:w,kzg:o}),v=Mb({blobs:n,commitments:w,proofs:b,to:"hex"});h.sidecars=v}}if(u.includes("chainId")&&(h.chainId=await m()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{h.type=Wb(h)}catch{let w=dg.get(t.uid);if(typeof w>"u"){const b=await f();w=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",dg.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(u.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await f(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await ug(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new SS({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Kf;if(typeof e.gasPrice>"u"){const w=await f(),{gasPrice:b}=await ug(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return u.includes("gas")&&typeof i>"u"&&(h.gas=await rt(t,O0,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),wc(h),delete h.parameters,h}async function RS(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Gl=new Mf(128);async function D0(t,e){var b,v,C,E;const{account:r=t.account,chain:n=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,type:f,value:g,...m}=e;if(typeof r>"u")throw new cl({docsPath:"/docs/actions/wallet/sendTransaction"});const w=r?Nn(r):null;try{wc(e);const y=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await I0({authorization:i[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let _;n!==null&&(_=await rt(t,S0,"getChainId")({}),lA({currentChainId:_,chain:n}));const P=(C=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:C.format,x=(P||fc)({...fl(m,{format:P}),accessList:s,authorizationList:i,blobs:o,chainId:_,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,to:y,type:f,value:g}),D=Gl.get(t.uid),M=D?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:M,params:[x]},{retryCount:0})}catch(B){if(D===!1)throw B;const O=B;if(O.name==="InvalidInputRpcError"||O.name==="InvalidParamsRpcError"||O.name==="MethodNotFoundRpcError"||O.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[x]},{retryCount:0}).then(S=>(Gl.set(t.uid,!0),S)).catch(S=>{const N=S;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(Gl.set(t.uid,!1),O):N});throw O}}if((w==null?void 0:w.type)==="local"){const _=await rt(t,Yf,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:n,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,nonceManager:w.nonceManager,parameters:[...R0,"sidecars"],type:f,value:g,...m,to:y}),P=(E=n==null?void 0:n.serializers)==null?void 0:E.transaction,I=await w.signTransaction(_,{serializer:P});return await rt(t,RS,"sendRawTransaction")({serializedTransaction:I})}throw(w==null?void 0:w.type)==="smart"?new Hl({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Hl({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(y){throw y instanceof Hl?y:AS(y,{...e,account:w,chain:e.chain||void 0})}}const Ih=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],g7=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Kl="/docs/contract/decodeFunctionResult";function Zf(t){const{abi:e,args:r,functionName:n,data:s}=t;let i=e[0];if(n){const a=Wf({abi:e,args:r,name:n});if(!a)throw new Ou(n,{docsPath:Kl});i=a}if(i.type!=="function")throw new Ou(void 0,{docsPath:Kl});if(!i.outputs)throw new SA(i.name,{docsPath:Kl});const o=dl(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const hg="/docs/contract/encodeFunctionData";function DS(t){const{abi:e,args:r,functionName:n}=t;let s=e[0];if(n){const i=Wf({abi:e,args:r,name:n});if(!i)throw new Ou(n,{docsPath:hg});s=i}if(s.type!=="function")throw new Ou(void 0,{docsPath:hg});return{abi:[s],functionName:Ff(Os(s))}}function pl(t){const{args:e}=t,{abi:r,functionName:n}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:DS(t)})(),s=r[0],i=n,o="inputs"in s&&s.inputs?w0(s.inputs,e??[]):void 0;return nn([i,o??"0x"])}const kS=3;function Ru(t,{abi:e,address:r,args:n,docsPath:s,functionName:i,sender:o}){const a=t instanceof Vf?t:t instanceof F?t.walk(f=>"data"in f)||t.walk():{},{code:c,data:u,details:l,message:d,shortMessage:h}=a,p=t instanceof ll?new JI({functionName:i}):[kS,hl.code].includes(c)&&(u||l||d||h)?new ZI({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof _0?l:h??d}):t;return new YI(p,{abi:e,args:n,contractAddress:r,docsPath:s,functionName:i,sender:o})}const $S="0.1.1";function US(){return $S}let k0=class Sh extends Error{constructor(e,r={}){const n=(()=>{var c;if(r.cause instanceof Sh){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return(c=r.cause)!=null&&c.message?r.cause.message:r.details})(),s=r.cause instanceof Sh&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${US()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return $0(this,e)}};function $0(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?$0(t.cause,e):e?null:t}function MS(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const s=t.replace("0x","");if(s.length>n*2)throw new FS({size:Math.ceil(s.length/2),targetSize:n,type:"Hex"});return`0x${s[r==="right"?"padEnd":"padStart"](n*2,"0")}`}function Ln(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new BS({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?LS(c,n):c}function LS(t,e){return MS(t,{dir:"left",size:e})}class BS extends k0{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class FS extends k0{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function jS(t){return{address:t.address,amount:Ln(t.amount),index:Ln(t.index),validatorIndex:Ln(t.validatorIndex)}}function qS(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Ln(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Ln(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Ln(t.gasLimit)},...typeof t.number=="bigint"&&{number:Ln(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Ln(t.prevRandao)},...typeof t.time=="bigint"&&{time:Ln(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(jS)}}}const zS="0x82ad56cb",HS="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",WS="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function U0(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const Yl=new Map;function VS({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let p=0;p<l.length;p++){const{resolve:f}=l[p];f==null||f([h[p],h])}}).catch(h=>{for(let p=0;p<l.length;p++){const{reject:f}=l[p];f==null||f(h)}})},o=()=>Yl.delete(e),a=()=>c().map(({args:l})=>l),c=()=>Yl.get(e)||[],u=l=>Yl.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:h,reject:p}=U0();return(r==null?void 0:r([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:h,reject:p}),d):(u({args:l,resolve:h,reject:p}),setTimeout(i,n),d)}}}async function M0(t,e){var M,B,O,S;const{account:r=t.account,batch:n=!!((M=t.batch)!=null&&M.multicall),blockNumber:s,blockTag:i="latest",accessList:o,blobs:a,blockOverrides:c,code:u,data:l,factory:d,factoryData:h,gas:p,gasPrice:f,maxFeePerBlobGas:g,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:b,to:v,value:C,stateOverride:E,...y}=e,_=r?Nn(r):void 0;if(u&&(d||h))throw new F("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&v)throw new F("Cannot provide both `code` & `to` as parameters.");const P=u&&l,I=d&&h&&v&&l,x=P||I,D=P?YS({code:u,data:l}):I?ZS({data:l,factory:d,factoryData:h,to:v}):l;try{wc(e);const R=(typeof s=="bigint"?Ne(s):void 0)||i,$=c?qS(c):void 0,k=T0(E),U=(S=(O=(B=t.chain)==null?void 0:B.formatters)==null?void 0:O.transactionRequest)==null?void 0:S.format,Y=(U||fc)({...fl(y,{format:U}),from:_==null?void 0:_.address,accessList:o,blobs:a,data:D,gas:p,gasPrice:f,maxFeePerBlobGas:g,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:b,to:x?void 0:v,value:C});if(n&&GS({request:Y})&&!k&&!$)try{return await KS(t,{...Y,blockNumber:s,blockTag:i})}catch(ae){if(!(ae instanceof Lb)&&!(ae instanceof lh))throw ae}const ie=(()=>{const ae=[Y,R];return k&&$?[...ae,k,$]:k?[...ae,k]:$?[...ae,{},$]:ae})(),K=await t.request({method:"eth_call",params:ie});return K==="0x"?{data:void 0}:{data:K}}catch(N){const R=JS(N),{offchainLookup:$,offchainLookupSignature:k}=await or(async()=>{const{offchainLookup:U,offchainLookupSignature:W}=await import("./chunk.ccip-BVleWQpl.js");return{offchainLookup:U,offchainLookupSignature:W}},[]);if(t.ccipRead!==!1&&(R==null?void 0:R.slice(0,10))===k&&v)return{data:await $(t,{data:R,to:v})};throw x&&(R==null?void 0:R.slice(0,10))==="0x101bb98d"?new QI({factory:d}):C0(N,{...e,account:_,chain:t.chain})}}function GS({request:t}){const{data:e,to:r,...n}=t;return!(!e||e.startsWith(zS)||!r||Object.values(n).filter(s=>typeof s<"u").length>0)}async function KS(t,e){var g;const{batchSize:r=1024,wait:n=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let u=a;if(!u){if(!t.chain)throw new Lb;u=Xb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ne(s):void 0)||i,{schedule:h}=VS({id:`${t.uid}.${d}`,wait:n,shouldSplitBatch(m){return m.reduce((b,{data:v})=>b+(v.length-2),0)>r*2},fn:async m=>{const w=m.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),b=pl({abi:Ih,args:[w],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:u},d]});return Zf({abi:Ih,args:[w],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:p,success:f}]=await h({data:o,to:c});if(!f)throw new Vf({data:p});return p==="0x"?{data:void 0}:{data:p}}function YS(t){const{code:e,data:r}=t;return A0({abi:m0(["constructor(bytes, bytes)"]),bytecode:HS,args:[e,r]})}function ZS(t){const{data:e,factory:r,factoryData:n,to:s}=t;return A0({abi:m0(["constructor(address, bytes, address, bytes)"]),bytecode:WS,args:[s,e,r,n]})}function JS(t){var r;if(!(t instanceof F))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(r=e.data)==null?void 0:r.data:e.data}async function L0(t,e){const{abi:r,address:n,args:s,functionName:i,...o}=e,a=pl({abi:r,args:s,functionName:i});try{const{data:c}=await rt(t,M0,"call")({...o,data:a,to:n});return Zf({abi:r,args:s,functionName:i,data:c||"0x"})}catch(c){throw Ru(c,{abi:r,address:n,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}function QS(t,{method:e}){var n,s;const r={};return t.transport.type==="fallback"&&((s=(n=t.transport).onResponse)==null||s.call(n,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(r[o]=c.request)})),i=>r[i]||t.request}async function XS(t){const e=QS(t,{method:"eth_newPendingTransactionFilter"}),r=await t.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:e(r),type:"transaction"}}const eN=new Map,tN=new Map;function rN(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),r=e(t,eN),n=e(t,tN);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}async function nN(t,{cacheKey:e,cacheTime:r=Number.POSITIVE_INFINITY}){const n=rN(e),s=n.response.get();if(s&&r>0&&new Date().getTime()-s.created.getTime()<r)return s.data;let i=n.promise.get();i||(i=t(),n.promise.set(i));try{const o=await i;return n.response.set({created:new Date,data:o}),o}finally{n.promise.clear()}}const sN=t=>`blockNumber.${t}`;async function iN(t,{cacheTime:e=t.cacheTime}={}){const r=await nN(()=>t.request({method:"eth_blockNumber"}),{cacheKey:sN(t.uid),cacheTime:e});return BigInt(r)}function oN(t,e){if(!ot(t,{strict:!1}))throw new St({address:t});if(!ot(e,{strict:!1}))throw new St({address:e});return t.toLowerCase()===e.toLowerCase()}const fg="/docs/contract/decodeEventLog";function aN(t){const{abi:e,data:r,strict:n,topics:s}=t,i=n??!0,[o,...a]=s;if(!o)throw new IA({docsPath:fg});const c=e.length===1?e[0]:e.find(g=>g.type==="event"&&o===Hf(Os(g)));if(!(c&&"name"in c)||c.type!=="event")throw new r0(o,{docsPath:fg});const{name:u,inputs:l}=c,d=l==null?void 0:l.some(g=>!("name"in g&&g.name));let h=d?[]:{};const p=l.filter(g=>"indexed"in g&&g.indexed);for(let g=0;g<p.length;g++){const m=p[g],w=a[g];if(!w)throw new n0({abiItem:c,param:m});h[d?g:m.name||g]=cN({param:m,value:w})}const f=l.filter(g=>!("indexed"in g&&g.indexed));if(f.length>0){if(r&&r!=="0x")try{const g=dl(f,r);if(g)if(d)h=[...h,...g];else for(let m=0;m<f.length;m++)h[f[m].name]=g[m]}catch(g){if(i)throw g instanceof e0||g instanceof _b?new bh({abiItem:c,data:r,params:f,size:ht(r)}):g}else if(i)throw new bh({abiItem:c,data:"0x",params:f,size:0})}return{eventName:u,args:Object.values(h).length>0?h:void 0}}function cN({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(dl([t],e)||[])[0]}function uN(t){const{abi:e,args:r,logs:n,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return n.map(o=>{var a;try{const c=e.find(l=>l.type==="event"&&o.topics[0]===Hf(l));if(!c)return null;const u=aN({...o,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!lN({args:u.args,inputs:c.inputs,matchArgs:r})?null:{...u,...o}}catch(c){let u,l;if(c instanceof r0)return null;if(c instanceof bh||c instanceof n0){if(s)return null;u=c.abiItem.name,l=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:l?[]:{},eventName:u}}}).filter(Boolean)}function lN(t){const{args:e,inputs:r,matchArgs:n}=t;if(!n)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?oN(o,a):i.type==="string"||i.type==="bytes"?mc(ni(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(n)?n.every((i,o)=>{if(i==null)return!0;const a=r[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof n=="object"&&!Array.isArray(n)?Object.entries(n).every(([i,o])=>{if(o==null)return!0;const a=r.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}async function dN(t,{filter:e}){const r="strict"in e&&e.strict,n=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof n[0]=="string")return n;const s=n.map(i=>Tf(i));return!("abi"in e)||!e.abi?s:uN({abi:e.abi,logs:s,strict:r})}async function B0(t,{blockHash:e,blockNumber:r,blockTag:n,hash:s,index:i}){var l,d,h;const o=n||"latest",a=r!==void 0?Ne(r):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ne(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ne(i)]},{dedupe:!!a}),!c)throw new Sb({blockHash:e,blockNumber:r,blockTag:o,hash:s,index:i});return(((h=(d=(l=t.chain)==null?void 0:l.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||hc)(c)}async function pg(t,{hash:e}){var s,i,o;const r=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!r)throw new Nb({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||wb)(r)}async function hN(t,e){var w;const{account:r,allowFailure:n=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,u=e.contracts,l=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Xb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let p=0,f=0;for(let b=0;b<u.length;b++){const{abi:v,address:C,args:E,functionName:y}=u[b];try{const _=pl({abi:v,args:E,functionName:y});f+=(_.length-2)/2,l>0&&f>l&&h[p].length>0&&(p++,f=(_.length-2)/2,h[p]=[]),h[p]=[...h[p],{allowFailure:!0,callData:_,target:C}]}catch(_){const P=Ru(_,{abi:v,address:C,args:E,docsPath:"/docs/contract/multicall",functionName:y,sender:r});if(!n)throw P;h[p]=[...h[p],{allowFailure:!0,callData:"0x",target:C}]}}const g=await Promise.allSettled(h.map(b=>rt(t,L0,"readContract")({abi:Ih,account:r,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!n)throw v.reason;for(let E=0;E<h[b].length;E++)m.push({status:"failure",error:v.reason,result:void 0});continue}const C=v.value;for(let E=0;E<C.length;E++){const{returnData:y,success:_}=C[E],{callData:P}=h[b][E],{abi:I,address:x,functionName:D,args:M}=u[m.length];try{if(P==="0x")throw new ll;if(!_)throw new Vf({data:y});const B=Zf({abi:I,args:M,data:y,functionName:D});m.push(n?{result:B,status:"success"}:B)}catch(B){const O=Ru(B,{abi:I,address:x,args:M,docsPath:"/docs/contract/multicall",functionName:D});if(!n)throw O;m.push({error:O,result:void 0,status:"failure"})}}}if(m.length!==u.length)throw new F("multicall results mismatch");return m}async function Nh(t){return new Promise(e=>setTimeout(e,t))}function gg(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await Nh(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});i(u)}};o()})}const Zl=new Map,mg=new Map;let fN=0;function Du(t,e,r){const n=++fN,s=()=>Zl.get(t)||[],i=()=>{const l=s();Zl.set(t,l.filter(d=>d.id!==n))},o=()=>{const l=s();if(!l.some(h=>h.id===n))return;const d=mg.get(t);l.length===1&&d&&d(),i()},a=s();if(Zl.set(t,[...a,{id:n,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...d)=>{var p,f;const h=s();if(h.length!==0)for(const g of h)(f=(p=g.fns)[l])==null||f.call(p,...d)};const u=r(c);return typeof u=="function"&&mg.set(t,u),o}function F0(t,{emitOnBegin:e,initialWaitTime:r,interval:n}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(r==null?void 0:r(a))??n;await Nh(c);const u=async()=>{s&&(await t({unpoll:i}),await Nh(n),u())};u()})(),i}function pN(t,{emitOnBegin:e=!1,emitMissed:r=!1,onBlockNumber:n,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let c;return a?(()=>{const d=li(["watchBlockNumber",t.uid,e,r,o]);return Du(d,{onBlockNumber:n,onError:s},h=>F0(async()=>{var p;try{const f=await rt(t,iN,"getBlockNumber")({cacheTime:0});if(c){if(f===c)return;if(f-c>1&&r)for(let g=c+1n;g<f;g++)h.onBlockNumber(g,c),c=g}(!c||f>c)&&(h.onBlockNumber(f,c),c=f)}catch(f){(p=h.onError)==null||p.call(h,f)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=li(["watchBlockNumber",t.uid,e,r]);return Du(d,{onBlockNumber:n,onError:s},h=>{let p=!0,f=()=>p=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(b=>b.config.type==="webSocket");return w?w.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(w){var v;if(!p)return;const b=Je((v=w.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(w){var b;(b=h.onError)==null||b.call(h,w)}});f=m,p||f()}catch(g){s==null||s(g)}})(),()=>f()})})()}async function gN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function mN(t,{batch:e=!0,onError:r,onTransactions:n,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket")?(()=>{const u=li(["watchPendingTransactions",t.uid,e,i]);return Du(u,{onTransactions:n,onError:r},l=>{let d;const h=F0(async()=>{var p;try{if(!d)try{d=await rt(t,XS,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const f=await rt(t,dN,"getFilterChanges")({filter:d});if(f.length===0)return;if(e)l.onTransactions(f);else for(const g of f)l.onTransactions([g])}catch(f){(p=l.onError)==null||p.call(l,f)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await rt(t,gN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!u)return;const p=h.result;n([p])},onError(h){r==null||r(h)}});l=d,u||l()}catch(d){r==null||r(d)}})(),()=>l()})()}async function yN(t,{confirmations:e=1,hash:r,onReplaced:n,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=li(["waitForTransactionReceipt",t.uid,r]);let u,l,d,h=!1;const{promise:p,resolve:f,reject:g}=U0(),m=a?setTimeout(()=>g(new TC({hash:r})),a):void 0,w=Du(c,{onReplaced:n,resolve:f,reject:g},b=>{const v=rt(t,pN,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(C){const E=_=>{clearTimeout(m),v(),_(),w()};let y=C;if(!h)try{if(d){if(e>1&&(!d.blockNumber||y-d.blockNumber+1n<e))return;E(()=>b.resolve(d));return}if(u||(h=!0,await gg(async()=>{u=await rt(t,B0,"getTransaction")({hash:r}),u.blockNumber&&(y=u.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await rt(t,pg,"getTransactionReceipt")({hash:r}),e>1&&(!d.blockNumber||y-d.blockNumber+1n<e))return;E(()=>b.resolve(d))}catch(_){if(_ instanceof Sb||_ instanceof Nb){if(!u){h=!1;return}try{l=u,h=!0;const P=await gg(()=>rt(t,Da,"getBlock")({blockNumber:y,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:D})=>D instanceof N0});h=!1;const I=P.transactions.find(({from:D,nonce:M})=>D===l.from&&M===l.nonce);if(!I||(d=await rt(t,pg,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||y-d.blockNumber+1n<e)))return;let x="replaced";I.to===l.to&&I.value===l.value&&I.input===l.input?x="repriced":I.from===I.to&&I.value===0n&&(x="cancelled"),E(()=>{var D;(D=b.onReplaced)==null||D.call(b,{reason:x,replacedTransaction:l,transaction:I,transactionReceipt:d}),b.resolve(d)})}catch(P){E(()=>b.reject(P))}}else E(()=>b.reject(_))}}})});return p}async function wN(t,{account:e=t.account,message:r}){if(!e)throw new cl({docsPath:"/docs/actions/wallet/signMessage"});const n=Nn(e);if(n.signMessage)return n.signMessage({message:r});const s=typeof r=="string"?Sf(r):r.raw instanceof Uint8Array?oe(r.raw):r.raw;return t.request({method:"personal_sign",params:[s,n.address]},{retryCount:0})}async function bN(t,e){const{abi:r,account:n=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof n>"u")throw new cl({docsPath:"/docs/contract/writeContract"});const u=n?Nn(n):null,l=pl({abi:r,args:i,functionName:a});try{return await rt(t,D0,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:s,account:u,...c})}catch(d){throw Ru(d,{abi:r,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:u==null?void 0:u.address})}}function $r(t,e,r){const n=t[e.name];if(typeof n=="function")return n;const s=t[r];return typeof s=="function"?s:i=>e(t,i)}const fu="2.17.2",vN=()=>`@wagmi/core@${fu}`;var j0=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ku,q0;let Qn=class Ph extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return vN()}constructor(e,r={}){var i;super(),ku.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const n=r.cause instanceof Ph?r.cause.details:(i=r.cause)!=null&&i.message?r.cause.message:r.details,s=r.cause instanceof Ph&&r.cause.docsPath||r.docsPath;this.message=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${r.docsSlug?`#${r.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join(`
`),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.shortMessage=e}walk(e){return j0(this,ku,"m",q0).call(this,this,e)}};ku=new WeakSet,q0=function t(e,r){return r!=null&&r(e)?e:e.cause?j0(this,ku,"m",t).call(this,e.cause,r):e};class ka extends Qn{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class EN extends Qn{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class _N extends Qn{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class CN extends Qn{constructor({address:e,connector:r}){super(`Account "${e}" not found for connector "${r.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class AN extends Qn{constructor({connectionChainId:e,connectorChainId:r}){super(`The current chain of the connector (id: ${r}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class IN extends Qn{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function yg(t,e){var n;let r;if(typeof e.connector=="function"?r=t._internal.connectors.setup(e.connector):r=e.connector,r.uid===t.state.current)throw new EN;try{t.setState(c=>({...c,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await r.connect(i),a=o.accounts;return r.emitter.off("connect",t._internal.events.connect),r.emitter.on("change",t._internal.events.change),r.emitter.on("disconnect",t._internal.events.disconnect),await((n=t.storage)==null?void 0:n.setItem("recentConnectorId",r.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(r.uid,{accounts:a,chainId:o.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function gl(t,e={}){let r;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new IN({connector:u});const[l,d]=await Promise.all([u.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),u.getChainId()]);r={accounts:l,chainId:d,connector:u}}else r=t.state.connections.get(t.state.current);if(!r)throw new _N;const n=e.chainId??r.chainId,s=await r.connector.getChainId();if(s!==r.chainId)throw new AN({connectionChainId:r.chainId,connectorChainId:s});const i=r.connector;if(i.getClient)return i.getClient({chainId:n});const o=Nn(e.account??r.accounts[0]);if(o&&(o.address=d1(o.address)),e.account&&!r.accounts.some(u=>u.toLowerCase()===o.address.toLowerCase()))throw new CN({address:o.address,connector:i});const a=t.chains.find(u=>u.id===n),c=await r.connector.getProvider({chainId:n});return ob({account:o,chain:a,name:"Connector Client",transport:u=>z_(c)({...u,retryCount:0})})}async function SN(t,e={}){var s,i;let r;if(e.connector)r=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);r=c==null?void 0:c.connector}const n=t.state.connections;r&&(await r.disconnect(),r.emitter.off("change",t._internal.events.change),r.emitter.off("disconnect",t._internal.events.disconnect),r.emitter.on("connect",t._internal.events.connect),n.delete(r.uid)),t.setState(o=>{if(n.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=n.values().next().value;return{...o,connections:new Map(n),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function NN(t,e){const{chainId:r,connector:n,...s}=e;let i;e.account?i=e.account:i=(await gl(t,{account:e.account,chainId:r,connector:n})).account;const o=t.getClient({chainId:r});return $r(o,O0,"estimateGas")({...s,account:i})}function z0(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(H_[t])}function $a(t){const e=t.state.current,r=t.state.connections.get(e),n=r==null?void 0:r.accounts,s=n==null?void 0:n[0],i=t.chains.find(a=>a.id===(r==null?void 0:r.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:n,chain:i,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:n,chain:i,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:n,chain:i,chainId:r==null?void 0:r.chainId,connector:r==null?void 0:r.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function PN(t,e){const{allowFailure:r=!0,chainId:n,contracts:s,...i}=e,o=t.getClient({chainId:n});return $r(o,hN,"multicall")({allowFailure:r,contracts:s,...i})}function TN(t,e){const{chainId:r,...n}=e,s=t.getClient({chainId:r});return $r(s,L0,"readContract")(n)}async function xN(t,e){var a;const{allowFailure:r=!0,blockNumber:n,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,p]of o.entries()){const f=p.chainId??t.state.chainId;c[f]||(c[f]=[]),(a=c[f])==null||a.push({contract:p,index:h})}const u=()=>Object.entries(c).map(([h,p])=>PN(t,{...i,allowFailure:r,blockNumber:n,blockTag:s,chainId:Number.parseInt(h),contracts:p.map(({contract:f})=>f)})),l=(await Promise.all(u())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:p})=>p));return l.reduce((h,p,f)=>(h&&(h[d[f]]=p),h),[])}catch(c){if(c instanceof W_)throw c;const u=()=>o.map(l=>TN(t,{...l,blockNumber:n,blockTag:s}));return r?(await Promise.allSettled(u())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(u())}}async function ON(t,e){const{address:r,blockNumber:n,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await wg(t,{balanceAddress:r,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const p=await wg(t,{balanceAddress:r,chainId:i,symbolType:"bytes32",tokenAddress:o}),f=ab(V_(p.symbol,{dir:"right"}));return{...p,symbol:f}}throw h}const c=t.getClient({chainId:i}),l=await $r(c,x0,"getBalance")(n?{address:r,blockNumber:n}:{address:r,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:rl(l,z0(a)),symbol:d.nativeCurrency.symbol,value:l}}async function wg(t,e){const{balanceAddress:r,chainId:n,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,u,l]=await xN(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[r],chainId:n},{...a,functionName:"decimals",chainId:n},{...a,functionName:"symbol",chainId:n}]}),d=rl(c??"0",z0(o??u));return{decimals:u,formatted:d,symbol:l,value:c}}function Ua(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let r,n;if(Array.isArray(t)&&Array.isArray(e)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Ua(t[n],e[n]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(i&&!Ua(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Hc=[];function Us(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Ua(Hc,e)?Hc:(Hc=e,e)}async function RN(t,e){const{account:r,chainId:n,...s}=e,i=r??$a(t).address,o=t.getClient({chainId:n});return $r(o,Yf,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Jl=!1;async function Th(t,e={}){var u,l;if(Jl)return[];Jl=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const r=[];if((u=e.connectors)!=null&&u.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,r.push(h)}else r.push(...t.connectors);let n;try{n=await((l=t.storage)==null?void 0:l.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;n&&(s[n]=0);const i=Object.keys(s).length>0?[...r].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):r;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const f=await d.connect({isReconnecting:!0}).catch(()=>null);f&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:f.accounts,chainId:f.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:f.accounts,chainId:f.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Jl=!1,a}async function DN(t,e){const{account:r,chainId:n,connector:s,...i}=e;let o;return typeof r=="object"&&(r==null?void 0:r.type)==="local"?o=t.getClient({chainId:n}):o=await gl(t,{account:r??void 0,chainId:n,connector:s}),await $r(o,D0,"sendTransaction")({...i,...r?{account:r}:{},chain:n?{id:n}:null,gas:i.gas??void 0})}async function kN(t,e){const{account:r,connector:n,...s}=e;let i;return typeof r=="object"&&r.type==="local"?i=t.getClient():i=await gl(t,{account:r,connector:n}),$r(i,wN,"signMessage")({...s,...r?{account:r}:{}})}class us extends Qn{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class $N extends Qn{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function bg(t,e){var o;const{addEthereumChainParameter:r,chainId:n}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new $N({connector:a});return await a.switchChain({addEthereumChainParameter:r,chainId:n})}const i=t.chains.find(a=>a.id===n);if(!i)throw new ka;return t.setState(a=>({...a,chainId:n})),i}function H0(t,e){const{onChange:r}=e;return t.subscribe(()=>$a(t),r,{equalityFn(n,s){const{connector:i,...o}=n,{connector:a,...c}=s;return Ua(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function UN(t,e){const{onChange:r}=e;return t._internal.connectors.subscribe((n,s)=>{r(Object.values(n),s)})}function MN(t,e){const{syncConnectedChain:r=t._internal.syncConnectedChain,...n}=e;let s;const i=c=>{s&&s();const u=t.getClient({chainId:c});return s=$r(u,mN,"watchPendingTransactions")(n),s},o=i(e.chainId);let a;return r&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function LN(t,e){const{chainId:r,timeout:n=0,...s}=e,i=t.getClient({chainId:r}),a=await $r(i,yN,"waitForTransactionReceipt")({...s,timeout:n});if(a.status==="reverted"){const u=await $r(i,B0,"getTransaction")({hash:a.transactionHash}),d=await $r(i,M0,"call")({...u,data:u.input,gasPrice:u.type!=="eip1559"?u.gasPrice:void 0,maxFeePerGas:u.type==="eip1559"?u.maxFeePerGas:void 0,maxPriorityFeePerGas:u.type==="eip1559"?u.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?ab(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function BN(t,e){const{account:r,chainId:n,connector:s,...i}=e;let o;return typeof r=="object"&&(r==null?void 0:r.type)==="local"?o=t.getClient({chainId:n}):o=await gl(t,{account:r??void 0,chainId:n,connector:s}),await $r(o,bN,"writeContract")({...i,...r?{account:r}:{},chain:n?{id:n}:null})}function m7(t){return t}ml.type="injected";function ml(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:r}=t;function n(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...FN[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let s,i,o,a;return c=>({get icon(){return n().icon},get id(){return n().id},get name(){return n().name},get supportsSimulation(){return!0},type:ml.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:l}={}){var p,f,g,m,w,b;const d=await this.getProvider();if(!d)throw new us;let h=[];if(l)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(m=(g=(f=(p=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:p.caveats)==null?void 0:f[0])==null?void 0:g.value)==null?void 0:m.map(C=>Xi(C)),h.length>0&&(h=await this.getAccounts())}catch(v){const C=v;if(C.code===xr.code)throw new xr(C);if(C.code===Bl.code)throw C}try{!(h!=null&&h.length)&&!l&&(h=(await d.request({method:"eth_requestAccounts"})).map(E=>Xi(E))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(u&&v!==u){const C=await this.switchChain({chainId:u}).catch(E=>{if(E.code===xr.code)throw E;return{id:v}});v=(C==null?void 0:C.id)??v}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const C=v;throw C.code===xr.code?new xr(C):C.code===Bl.code?new Bl(C):C}},async disconnect(){var l,d;const u=await this.getProvider();if(!u)throw new us;i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await K_(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((l=c.storage)==null?void 0:l.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new us;return(await u.request({method:"eth_accounts"})).map(d=>Xi(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new us;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=n();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=pu(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,l;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!t.target&&!await((l=c.storage)==null?void 0:l.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(r!==void 0&&r!==!1){const f=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",f),!!await this.getProvider()),g=typeof r=="number"?r:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(f()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(f()),g))]))return!0}throw new us}return!!(await G_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){var f,g,m,w;const d=await this.getProvider();if(!d)throw new us;const h=c.chains.find(b=>b.id===l);if(!h)throw new xa(new ka);const p=new Promise(b=>{const v=C=>{"chainId"in C&&C.chainId===l&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Pu(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),p]),h}catch(b){const v=b;if(v.code===4902||((g=(f=v==null?void 0:v.data)==null?void 0:f.originalError)==null?void 0:g.code)===4902)try{const{default:C,...E}=h.blockExplorers??{};let y;u!=null&&u.blockExplorerUrls?y=u.blockExplorerUrls:C&&(y=[C.url,...Object.values(E).map(I=>I.url)]);let _;(m=u==null?void 0:u.rpcUrls)!=null&&m.length?_=u.rpcUrls:_=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const P={blockExplorerUrls:y,chainId:Pu(l),chainName:(u==null?void 0:u.chainName)??h.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??h.nativeCurrency,rpcUrls:_};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[P]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new xr(new Error("User rejected switch after adding network."))}),p]),h}catch(C){throw new xr(C)}throw v.code===xr.code?new xr(v):new xa(v)}},async onAccountsChanged(u){var l;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((l=c.storage)==null?void 0:l.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(d=>Xi(d))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const FN={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:pu(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return pu(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const r=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const n of r)if(e[n])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,r;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(r=t.phantom)==null?void 0:r.ethereum:pu(t,"isPhantom")}}};function pu(t,e){function r(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const n=t.ethereum;if(n!=null&&n.providers)return n.providers.find(s=>r(s));if(n&&r(n))return n}function jN(t){if(typeof window>"u")return;const e=r=>t(r.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function qN(){const t=new Set;let e=[];const r=()=>jN(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let n=r();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),n==null||n()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),n==null||n(),n=r()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const zN=t=>(e,r,n)=>{const s=n.subscribe;return n.subscribe=(o,a,c)=>{let u=o;if(a){const l=(c==null?void 0:c.equalityFn)||Object.is;let d=o(n.getState());u=h=>{const p=o(h);if(!l(d,p)){const f=d;a(d=p,f)}},c!=null&&c.fireImmediately&&a(d,d)}return s(u)},t(e,r,n)},HN=zN;function WN(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=r.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const xh=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return xh(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return xh(n)(r)}}}},VN=(t,e)=>(r,n,s)=>{let i={storage:WN(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...g)},n,s);const l=()=>{const g=i.partialize({...n()});return u.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),l()};const h=t((...g)=>{r(...g),l()},n,s);s.getInitialState=()=>h;let p;const f=()=>{var g,m;if(!u)return;o=!1,a.forEach(b=>{var v;return b((v=n())!=null?v:h)});const w=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=n())!=null?g:h))||void 0;return xh(u.getItem.bind(u))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[C,E]=b;if(p=i.merge(E,(v=n())!=null?v:h),r(p,!0),C)return l()}).then(()=>{w==null||w(p,void 0),p=n(),o=!0,c.forEach(b=>b(p))}).catch(b=>{w==null||w(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||f(),p||h},GN=VN,vg=t=>{let e;const r=new Set,n=(u,l)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const h=e;e=l??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(p=>p(e,h))}},s=()=>e,a={setState:n,getState:s,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=e=t(n,s,a);return a},Ql=t=>t?vg(t):vg;var Xl={exports:{}},Eg;function KN(){return Eg||(Eg=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new s(l,d||c,h),f=r?r+u:u;return c._events[f]?c._events[f].fn?c._events[f]=[c._events[f],p]:c._events[f].push(p):(c._events[f]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=r?r+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,f=new Array(p);h<p;h++)f[h]=d[h].fn;return f},a.prototype.listenerCount=function(u){var l=r?r+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,h,p,f){var g=r?r+u:u;if(!this._events[g])return!1;var m=this._events[g],w=arguments.length,b,v;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),w){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,d),!0;case 4:return m.fn.call(m.context,l,d,h),!0;case 5:return m.fn.call(m.context,l,d,h,p),!0;case 6:return m.fn.call(m.context,l,d,h,p,f),!0}for(v=1,b=new Array(w-1);v<w;v++)b[v-1]=arguments[v];m.fn.apply(m.context,b)}else{var C=m.length,E;for(v=0;v<C;v++)switch(m[v].once&&this.removeListener(u,m[v].fn,void 0,!0),w){case 1:m[v].fn.call(m[v].context);break;case 2:m[v].fn.call(m[v].context,l);break;case 3:m[v].fn.call(m[v].context,l,d);break;case 4:m[v].fn.call(m[v].context,l,d,h);break;default:if(!b)for(E=1,b=new Array(w-1);E<w;E++)b[E-1]=arguments[E];m[v].fn.apply(m[v].context,b)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!l)return o(this,p),this;var f=this._events[p];if(f.fn)f.fn===l&&(!h||f.once)&&(!d||f.context===d)&&o(this,p);else{for(var g=0,m=[],w=f.length;g<w;g++)(f[g].fn!==l||h&&!f[g].once||d&&f[g].context!==d)&&m.push(f[g]);m.length?this._events[p]=m.length===1?m[0]:m:o(this,p)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&o(this,l)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}(Xl)),Xl.exports}var YN=KN();const ZN=nl(YN);class JN{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new ZN})}on(e,r){this._emitter.on(e,r)}once(e,r){this._emitter.once(e,r)}off(e,r){this._emitter.off(e,r)}emit(e,...r){const n=r[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}}function QN(t){return new JN(t)}function XN(t,e){return JSON.parse(t,(r,n)=>{let s=n;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(r,s))??s})}function _g(t,e){return t.slice(0,e).join(".")||"."}function Cg(t,e){const{length:r}=t;for(let n=0;n<r;++n)if(t[n]===e)return n+1;return 0}function eP(t,e){const r=typeof t=="function",n=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const u=Cg(s,this);u===0?s[s.length]=this:(s.splice(u),i.splice(u)),i[i.length]=a;const l=Cg(s,c);if(l!==0)return n?e.call(this,a,c,_g(i,l)):`[ref=${_g(i,l)}]`}else s[0]=c,i[0]=a;return r?t.call(this,a,c):c}}function tP(t,e,r,n){return JSON.stringify(t,eP((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},n),r??void 0)}function rP(t){const{deserialize:e=XN,key:r="wagmi",serialize:n=tP,storage:s=W0}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:r,async getItem(o,a){const c=s.getItem(`${r}.${o}`),u=await i(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${r}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,n(a)))},async removeItem(o){await i(s.removeItem(`${r}.${o}`))}}}const W0={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function nP(){const t=typeof window<"u"&&window.localStorage?window.localStorage:W0;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,r){try{t.setItem(e,r)}catch{}}}}const Oh=256;let Wc=Oh,Vc;function sP(t=11){if(!Vc||Wc+t>Oh*2){Vc="",Wc=0;for(let e=0;e<Oh;e++)Vc+=(256+Math.random()*256|0).toString(16).substring(1)}return Vc.substring(Wc,Wc+++t)}function iP(t){const{multiInjectedProviderDiscovery:e=!0,storage:r=rP({storage:nP()}),syncConnectedChain:n=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?qN():void 0,a=Ql(()=>i.chains),c=Ql(()=>{const E=[],y=new Set;for(const _ of i.connectors??[]){const P=u(_);if(E.push(P),!s&&P.rdns){const I=typeof P.rdns=="string"?[P.rdns]:P.rdns;for(const x of I)y.add(x)}}if(!s&&o){const _=o.getProviders();for(const P of _)y.has(P.info.rdns)||E.push(u(l(P)))}return E});function u(E){var P;const y=QN(sP()),_={...E({emitter:y,chains:a.getState(),storage:r,transports:i.transports}),emitter:y,uid:y.uid};return y.on("connect",v),(P=_.setup)==null||P.call(_),_}function l(E){const{info:y}=E,_=E.provider;return ml({target:{...y,id:y.rdns,provider:_}})}const d=new Map;function h(E={}){const y=E.chainId??m.getState().chainId,_=a.getState().find(I=>I.id===y);if(E.chainId&&!_)throw new ka;{const I=d.get(m.getState().chainId);if(I&&!_)return I;if(!_)throw new ka}{const I=d.get(y);if(I)return I}let P;if(i.client)P=i.client({chain:_});else{const I=_.id,x=a.getState().map(B=>B.id),D={},M=Object.entries(i);for(const[B,O]of M)if(!(B==="chains"||B==="client"||B==="connectors"||B==="transports"))if(typeof O=="object")if(I in O)D[B]=O[I];else{if(x.some(N=>N in O))continue;D[B]=O}else D[B]=O;P=ob({...D,chain:_,batch:D.batch??{multicall:!0},transport:B=>i.transports[I]({...B,connectors:c})})}return d.set(y,P),P}function p(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let f;const g="0.0.0-canary-";fu.startsWith(g)?f=Number.parseInt(fu.replace(g,"")):f=Number.parseInt(fu.split(".")[0]??"0");const m=Ql(HN(r?GN(p,{migrate(E,y){if(y===f)return E;const _=p(),P=w(E,_.chainId);return{..._,chainId:P}},name:"store",partialize(E){return{connections:{__type:"Map",value:Array.from(E.connections.entries()).map(([y,_])=>{const{id:P,name:I,type:x,uid:D}=_.connector;return[y,{..._,connector:{id:P,name:I,type:x,uid:D}}]})},chainId:E.chainId,current:E.current}},merge(E,y){typeof E=="object"&&E&&"status"in E&&delete E.status;const _=w(E,y.chainId);return{...y,...E,chainId:_}},skipHydration:s,storage:r,version:f}):p));m.setState(p());function w(E,y){return E&&typeof E=="object"&&"chainId"in E&&typeof E.chainId=="number"&&a.getState().some(_=>_.id===E.chainId)?E.chainId:y}n&&m.subscribe(({connections:E,current:y})=>{var _;return y?(_=E.get(y))==null?void 0:_.chainId:void 0},E=>{if(a.getState().some(_=>_.id===E))return m.setState(_=>({..._,chainId:E??_.chainId}))}),o==null||o.subscribe(E=>{const y=new Set,_=new Set;for(const I of c.getState())if(y.add(I.id),I.rdns){const x=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const D of x)_.add(D)}const P=[];for(const I of E){if(_.has(I.info.rdns))continue;const x=u(l(I));y.has(x.id)||P.push(x)}r&&!m.persist.hasHydrated()||c.setState(I=>[...I,...P],!0)});function b(E){m.setState(y=>{const _=y.connections.get(E.uid);return _?{...y,connections:new Map(y.connections).set(E.uid,{accounts:E.accounts??_.accounts,chainId:E.chainId??_.chainId,connector:_.connector})}:y})}function v(E){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(y=>{const _=c.getState().find(P=>P.uid===E.uid);return _?(_.emitter.listenerCount("connect")&&_.emitter.off("connect",b),_.emitter.listenerCount("change")||_.emitter.on("change",b),_.emitter.listenerCount("disconnect")||_.emitter.on("disconnect",C),{...y,connections:new Map(y.connections).set(E.uid,{accounts:E.accounts,chainId:E.chainId,connector:_}),current:E.uid,status:"connected"}):y})}function C(E){m.setState(y=>{const _=y.connections.get(E.uid);if(_){const I=_.connector;I.emitter.listenerCount("change")&&_.connector.emitter.off("change",b),I.emitter.listenerCount("disconnect")&&_.connector.emitter.off("disconnect",C),I.emitter.listenerCount("connect")||_.connector.emitter.on("connect",v)}if(y.connections.delete(E.uid),y.connections.size===0)return{...y,connections:new Map,current:null,status:"disconnected"};const P=y.connections.values().next().value;return{...y,connections:new Map(y.connections),current:P.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:r,getClient:h,get state(){return m.getState()},setState(E){let y;typeof E=="function"?y=E(m.getState()):y=E;const _=p();typeof y!="object"&&(y=_),Object.keys(_).some(I=>!(I in y))&&(y=_),m.setState(y,!0)},subscribe(E,y,_){return m.subscribe(E,y,_?{..._,fireImmediately:_.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:n,transports:i.transports,chains:{setState(E){const y=typeof E=="function"?E(a.getState()):E;if(y.length!==0)return a.setState(y,!0)},subscribe(E){return a.subscribe(E)}},connectors:{providerDetailToConnector:l,setup:u,setState(E){return c.setState(typeof E=="function"?E(c.getState()):E,!0)},subscribe(E){return c.subscribe(E)}},events:{change:b,connect:v,disconnect:C}}}}function oP(t,e){const{initialState:r,reconnectOnMount:n}=e;return r&&!t._internal.store.persist.hasHydrated()&&t.setState({...r,chainId:t.chains.some(s=>s.id===r.chainId)?r.chainId:t.chains[0].id,connections:n?r.connections:new Map,status:n?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const u of s??[])if(u.rdns){const l=Array.isArray(u.rdns)?u.rdns:[u.rdns];for(const d of l)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const u of a){if(i.has(u.info.rdns))continue;const l=t._internal.connectors.providerDetailToConnector(u),d=t._internal.connectors.setup(l);o.push(d)}return[...s,...o]})),n?Th(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}const aP=Symbol(),Ag=Object.getPrototypeOf,Rh=new WeakMap,cP=t=>t&&(Rh.has(t)?Rh.get(t):Ag(t)===Object.prototype||Ag(t)===Array.prototype),uP=t=>cP(t)&&t[aP]||null,Ig=(t,e=!0)=>{Rh.set(t,e)},$u={},ed=t=>typeof t=="object"&&t!==null,ls=new WeakMap,ha=new WeakSet,lP=(t=Object.is,e=(u,l)=>new Proxy(u,l),r=u=>ed(u)&&!ha.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},s=new WeakMap,i=(u,l,d=n)=>{const h=s.get(u);if((h==null?void 0:h[0])===l)return h[1];const p=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return Ig(p,!0),s.set(u,[l,p]),Reflect.ownKeys(u).forEach(f=>{if(Object.getOwnPropertyDescriptor(p,f))return;const g=Reflect.get(u,f),{enumerable:m}=Reflect.getOwnPropertyDescriptor(u,f),w={value:g,enumerable:m,configurable:!0};if(ha.has(g))Ig(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(ls.has(g)){const[b,v]=ls.get(g);w.value=i(b,v(),d)}Object.defineProperty(p,f,w)}),Object.preventExtensions(p)},o=new WeakMap,a=[1,1],c=u=>{if(!ed(u))throw new Error("object required");const l=o.get(u);if(l)return l;let d=a[0];const h=new Set,p=(I,x=++a[0])=>{d!==x&&(d=x,h.forEach(D=>D(I,x)))};let f=a[1];const g=(I=++a[1])=>(f!==I&&!h.size&&(f=I,w.forEach(([x])=>{const D=x[1](I);D>d&&(d=D)})),d),m=I=>(x,D)=>{const M=[...x];M[1]=[I,...M[1]],p(M,D)},w=new Map,b=(I,x)=>{if(($u?"production":void 0)!=="production"&&w.has(I))throw new Error("prop listener already exists");if(h.size){const D=x[3](m(I));w.set(I,[x,D])}else w.set(I,[x])},v=I=>{var x;const D=w.get(I);D&&(w.delete(I),(x=D[1])==null||x.call(D))},C=I=>(h.add(I),h.size===1&&w.forEach(([D,M],B)=>{if(($u?"production":void 0)!=="production"&&M)throw new Error("remove already exists");const O=D[3](m(B));w.set(B,[D,O])}),()=>{h.delete(I),h.size===0&&w.forEach(([D,M],B)=>{M&&(M(),w.set(B,[D]))})}),E=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),_=e(E,{deleteProperty(I,x){const D=Reflect.get(I,x);v(x);const M=Reflect.deleteProperty(I,x);return M&&p(["delete",[x],D]),M},set(I,x,D,M){const B=Reflect.has(I,x),O=Reflect.get(I,x,M);if(B&&(t(O,D)||o.has(D)&&t(O,o.get(D))))return!0;v(x),ed(D)&&(D=uP(D)||D);let S=D;if(D instanceof Promise)D.then(N=>{D.status="fulfilled",D.value=N,p(["resolve",[x],N])}).catch(N=>{D.status="rejected",D.reason=N,p(["reject",[x],N])});else{!ls.has(D)&&r(D)&&(S=c(D));const N=!ha.has(S)&&ls.get(S);N&&b(x,N)}return Reflect.set(I,x,S,M),p(["set",[x],D,O]),!0}});o.set(u,_);const P=[E,g,i,C];return ls.set(_,P),Reflect.ownKeys(u).forEach(I=>{const x=Object.getOwnPropertyDescriptor(u,I);"value"in x&&(_[I]=u[I],delete x.value,delete x.writable),Object.defineProperty(E,I,x)}),_})=>[c,ls,ha,t,e,r,n,s,i,o,a],[dP]=lP();function tt(t={}){return dP(t)}function Qt(t,e,r){const n=ls.get(t);($u?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[3];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Ma(t,e){const r=ls.get(t);($u?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,s,i]=r;return i(n,s(),e)}function di(t){return ha.add(t),t}function qt(t,e,r,n){let s=t[e];return Qt(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}function hP(t){const e=tt({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const s=this.data.find(i=>i[0]===r);return s?s[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(s=>s[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(s=>s[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const La={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var fP=20,pP=1,Uo=1e6,gP=1e6,mP=-7,yP=21,wP=!1,vc="[big.js] ",_i=vc+"Invalid ",yl=_i+"decimal places",bP=_i+"rounding mode",V0=vc+"Division by zero",je={},vn=void 0,vP=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function G0(){function t(e){var r=this;if(!(r instanceof t))return e===vn?G0():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(_i+"value");e=e===0&&1/e<0?"-0":String(e)}EP(r,e)}r.constructor=t}return t.prototype=je,t.DP=fP,t.RM=pP,t.NE=mP,t.PE=yP,t.strict=wP,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function EP(t,e){var r,n,s;if(!vP.test(e))throw Error(_i+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function Ci(t,e,r,n){var s=t.c;if(r===vn&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(bP);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==vn))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==vn||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Ai(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}je.abs=function(){var t=new this.constructor(this);return t.s=1,t};je.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};je.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Uo)throw Error(yl);if(!s[0])throw Error(V0);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,h=s.slice(),p=a=s.length,f=n.length,g=n.slice(0,a),m=g.length,w=t,b=w.c=[],v=0,C=o+(w.e=e.e-t.e)+1;for(w.s=i,i=C<0?0:C,h.unshift(0);m++<a;)g.push(0);do{for(u=0;u<10;u++){if(a!=(m=g.length))l=a>m?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=g[d]){l=s[d]>g[d]?1:-1;break}if(l<0){for(c=m==a?s:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}b[v++]=l?u:++u,g[0]&&l?g[m]=n[p]||0:g=[n[p]]}while((p++<f||g[0]!==vn)&&i--);return!b[0]&&v!=1&&(b.shift(),w.e--,C--),v>C&&Ci(w,C,r.RM,g[0]!==vn),w};je.eq=function(t){return this.cmp(t)===0};je.gt=function(t){return this.cmp(t)>0};je.gte=function(t){return this.cmp(t)>-1};je.lt=function(t){return this.cmp(t)<0};je.lte=function(t){return this.cmp(t)<1};je.minus=je.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,h=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-h){for((s=a<0)?(a=-a,n=u):(h=l,n=d),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=u.length<d.length)?u:d).length,a=c=0;c<r;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(n=u,u=d,d=n,t.s=-t.s),(c=(r=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<d[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=d[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--h;return u[0]||(t.s=1,u=[h=0]),t.c=u,t.e=h,t};je.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(V0);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};je.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};je.plus=je.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};je.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-1e6||t>gP)throw Error(_i+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};je.prec=function(t,e){if(t!==~~t||t<1||t>Uo)throw Error(_i+"precision");return Ci(new this.constructor(this),t,e)};je.round=function(t,e){if(t===vn)t=0;else if(t!==~~t||t<-1e6||t>Uo)throw Error(yl);return Ci(new this.constructor(this),t+this.e+1,e)};je.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(vc+"No square root");i=Math.sqrt(+Ai(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Ci(t,(s.DP-=4)+t.e+1,s.RM)};je.times=je.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};je.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==vn){if(t!==~~t||t<0||t>Uo)throw Error(yl);for(r=Ci(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Ai(r,!0,!!n)};je.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==vn){if(t!==~~t||t<0||t>Uo)throw Error(yl);for(r=Ci(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Ai(r,!1,!!n)};je[Symbol.for("nodejs.util.inspect.custom")]=je.toJSON=je.toString=function(){var t=this,e=t.constructor;return Ai(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};je.toNumber=function(){var t=+Ai(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(vc+"Imprecise conversion");return t};je.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==vn){if(t!==~~t||t<1||t>Uo)throw Error(_i+"precision");for(r=Ci(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Ai(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};je.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(vc+"valueOf disallowed");return Ai(t,t.e<=e.NE||t.e>=e.PE,!0)};var Zo=G0();const _P={bigNumber(t){return t?new Zo(t):new Zo(0)},multiply(t,e){if(t===void 0||e===void 0)return new Zo(0);const r=new Zo(t),n=new Zo(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},CP=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],AP=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],IP=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var Sg={};const z={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Sg<"u"?Sg.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},SP={getERC20Abi:t=>z.USDT_CONTRACT_ADDRESSES.includes(t)?IP:CP,getSwapAbi:()=>AP},ts={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},be={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function td(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ge={setItem(t,e){fa()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(fa())return localStorage.getItem(t)||void 0},removeItem(t){fa()&&localStorage.removeItem(t)},clear(){fa()&&localStorage.clear()}};function fa(){return typeof window<"u"&&typeof localStorage<"u"}function qn(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Ng={};const rd=(typeof process<"u"&&typeof Ng<"u"?Ng.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",y7=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],w7="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ft={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,SECURE_SITE:rd,SECURE_SITE_DASHBOARD:`${rd}/dashboard`,SECURE_SITE_FAVICON:`${rd}/images/favicon.png`,WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"}},J={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=J.getActiveNamespace(),e=J.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{ge.setItem(be.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ge.getItem(be.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ge.removeItem(be.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ge.setItem(be.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ge.setItem(be.ACTIVE_CAIP_NETWORK_ID,t),J.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ge.getItem(be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ge.removeItem(be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=td(t);ge.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=J.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ge.setItem(be.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ge.getItem(be.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=td(t);ge.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ge.getItem(be.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=td(t);return ge.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ge.setItem(be.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ge.getItem(be.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ge.removeItem(be.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ge.getItem(be.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=ge.getItem(be.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{ge.setItem(be.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ge.getItem(be.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ge.getItem(be.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ge.setItem(be.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=J.getConnectedNamespaces();e.includes(t)||(e.push(t),J.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=J.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),J.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ge.getItem(be.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ge.setItem(be.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ge.removeItem(be.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ge.getItem(be.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=J.getBalanceCache();ge.setItem(be.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=J.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;J.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=J.getBalanceCache();e[t.caipAddress]=t,ge.setItem(be.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ge.getItem(be.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=J.getBalanceCache();ge.setItem(be.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=J.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),J.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=J.getNativeBalanceCache();e[t.caipAddress]=t,ge.setItem(be.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ge.getItem(be.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=J.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;J.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=J.getEnsCache();e[t.address]=t,ge.setItem(be.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=J.getEnsCache();ge.setItem(be.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ge.getItem(be.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=J.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;J.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=J.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ge.setItem(be.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=J.getIdentityCache();ge.setItem(be.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ge.removeItem(be.PORTFOLIO_CACHE),ge.removeItem(be.NATIVE_BALANCE_CACHE),ge.removeItem(be.ENS_CACHE),ge.removeItem(be.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ge.setItem(be.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ge.getItem(be.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r={...J.getConnections(),[e]:t};ge.setItem(be.CONNECTIONS,JSON.stringify(r))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=ge.getItem(be.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ue={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ue.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ft.TEN_SEC_MS:!0},isAllowedRetry(t,e=ft.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+ft.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(ue.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!ue.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?J.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var r,n,s;if(typeof window>"u")return!1;const t=(n=(r=window.matchMedia)==null?void 0:r.call(window,"(display-mode: standalone)"))==null?void 0:n.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ue.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const s=Math.floor(n*1e3)/1e3;s&&(r=s.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const s=Number(t);s&&(r=(n=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return z.W3M_API_URL},getBlockchainApiUrl(){return z.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return z.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?ft.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in z.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};async function Jo(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Ec{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await Jo(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await Jo(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Jo(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Jo(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await Jo(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const NP={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?ft.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ue.isTelegram()){if(ue.isIos())return t.filter(e=>e!=="google");if(ue.isMac())return t.filter(e=>e!=="x");if(ue.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},le=tt({features:ft.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ft.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1}),q={state:le,subscribeKey(t,e){return qt(le,t,e)},setOptions(t){Object.assign(le,t)},setFeatures(t){if(!t)return;le.features||(le.features=ft.DEFAULT_FEATURES);const e={...le.features,...t};le.features=e,le.features.socials&&(le.features.socials=NP.filterSocialsByPlatform(le.features.socials))},setProjectId(t){le.projectId=t},setCustomRpcUrls(t){le.customRpcUrls=t},setAllWallets(t){le.allWallets=t},setIncludeWalletIds(t){le.includeWalletIds=t},setExcludeWalletIds(t){le.excludeWalletIds=t},setFeaturedWalletIds(t){le.featuredWalletIds=t},setTokens(t){le.tokens=t},setTermsConditionsUrl(t){le.termsConditionsUrl=t},setPrivacyPolicyUrl(t){le.privacyPolicyUrl=t},setCustomWallets(t){le.customWallets=t},setIsSiweEnabled(t){le.isSiweEnabled=t},setIsUniversalProvider(t){le.isUniversalProvider=t},setSdkVersion(t){le.sdkVersion=t},setMetadata(t){le.metadata=t},setDisableAppend(t){le.disableAppend=t},setEIP6963Enabled(t){le.enableEIP6963=t},setDebug(t){le.debug=t},setEnableWalletConnect(t){le.enableWalletConnect=t},setEnableWalletGuide(t){le.enableWalletGuide=t},setEnableAuthLogger(t){le.enableAuthLogger=t},setEnableWallets(t){le.enableWallets=t},setPreferUniversalLinks(t){le.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){le.hasMultipleAddresses=t},setSIWX(t){le.siwx=t},setConnectMethodsOrder(t){le.features={...le.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){le.features={...le.features,walletFeaturesOrder:t}},setSocialsOrder(t){le.features={...le.features,socials:t}},setCollapseWallets(t){le.features={...le.features,collapseWallets:t}},setEnableEmbedded(t){le.enableEmbedded=t},setAllowUnsupportedChain(t){le.allowUnsupportedChain=t},setManualWCControl(t){le.manualWCControl=t},setEnableNetworkSwitch(t){le.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(le.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){le.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return le.universalProviderConfigOverride},getSnapshot(){return Ma(le)}},PP=Object.freeze({enabled:!0,events:[]}),TP=new Ec({baseUrl:ue.getAnalyticsUrl(),clientId:null}),xP=5,OP=60*1e3,rs=tt({...PP}),RP={state:rs,subscribeKey(t,e){return qt(rs,t,e)},async sendError(t,e){if(!rs.enabled)return;const r=Date.now();if(rs.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<OP}).length>=xP)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};rs.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=q.state;await TP.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ue.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch(i){console.error("Error sending telemetry event:",i)}},enable(){rs.enabled=!0},disable(){rs.enabled=!1},clearEvents(){rs.events=[]}};class Ba extends Error{constructor(e,r,n){super(e),this.name="AppKitError",this.category=r,this.originalError=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ba)}}function Pg(t,e){const r=t instanceof Ba?t:new Ba(t instanceof Error?t.message:String(t),e,t);throw RP.sendError(r,r.category),r}function Mr(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Pg(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Pg(a,e)}},r[n]=i}else r[n]=s}),r}const DP={handleMobileDeeplinkRedirect(t){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",s=e.split("/")[2],i=encodeURIComponent(`${n}://${s}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${i}`}T.state.activeChain===z.CHAIN.SOLANA&&t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}},fr=tt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kP={state:fr,subscribeNetworkImages(t){return Qt(fr.networkImages,()=>t(fr.networkImages))},subscribeKey(t,e){return qt(fr,t,e)},subscribe(t){return Qt(fr,()=>t(fr))},setWalletImage(t,e){fr.walletImages[t]=e},setNetworkImage(t,e){fr.networkImages[t]=e},setChainImage(t,e){fr.chainImages[t]=e},setConnectorImage(t,e){fr.connectorImages={...fr.connectorImages,[t]:e}},setTokenImage(t,e){fr.tokenImages[t]=e},setCurrencyImage(t,e){fr.currencyImages[t]=e}},Yr=Mr(kP),$P={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},nd=tt({networkImagePromises:{}}),K0={async fetchWalletImage(t){if(t)return await de._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(nd.networkImagePromises[t]||(nd.networkImagePromises[t]=de._fetchNetworkImage(t)),await nd.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Yr.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Yr.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return Yr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Yr.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Yr.state.connectorImages[t.imageId]},getChainImage(t){return Yr.state.networkImages[$P[t]]}},ns=tt({message:"",variant:"info",open:!1}),UP={state:ns,subscribeKey(t,e){return qt(ns,t,e)},open(t,e){const{debug:r}=q.state,{shortMessage:n,longMessage:s}=t;r&&(ns.message=n,ns.variant=e,ns.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){ns.open=!1,ns.message="",ns.variant="info"}},Kt=Mr(UP),MP=ue.getAnalyticsUrl(),LP=new Ec({baseUrl:MP,clientId:null}),BP=["MODAL_CREATED"],Tn=tt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),et={state:Tn,subscribe(t){return Qt(Tn,()=>t(Tn))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=q.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=se.state.address;if(BP.includes(t.data.event)||typeof window>"u")return;await LP.post({path:"/e",params:et.getSdkProperties(),body:{eventId:ue.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Tn.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===z.HTTP_STATUS_CODES.FORBIDDEN&&!Tn.reportedErrors.FORBIDDEN&&(Kt.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${fa()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Tn.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Tn.timestamp=Date.now(),Tn.data=t,(e=q.state.features)!=null&&e.analytics&&et._sendAnalyticsEvent(Tn)}},sd={PHANTOM:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",COINBASE:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"},FP=ue.getApiUrl(),pr=new Ec({baseUrl:FP,clientId:null}),jP=40,Tg=4,qP=20,ve=tt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),de={state:ve,subscribeKey(t,e){return qt(ve,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=q.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return q.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${pr.baseUrl}/getWalletImage/${t}`,r=await pr.getBlob({path:e,params:de._getSdkProperties()});Yr.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${pr.baseUrl}/public/getAssetImage/${t}`,r=await pr.getBlob({path:e,params:de._getSdkProperties()});Yr.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${pr.baseUrl}/public/getAssetImage/${t}`,r=await pr.getBlob({path:e,params:de._getSdkProperties()});Yr.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${pr.baseUrl}/public/getCurrencyImage/${t}`,r=await pr.getBlob({path:e,params:de._getSdkProperties()});Yr.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${pr.baseUrl}/public/getTokenImage/${t}`,r=await pr.getBlob({path:e,params:de._getSdkProperties()});Yr.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){return ue.isMobile()?t==null?void 0:t.filter(r=>r.mobile_link||r.id===sd.COINBASE||r.id===sd.PHANTOM&&T.state.activeChain==="solana"):t},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await pr.get({path:"/projects/v1/origins",params:de._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=T.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!K0.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>de._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=te.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>de._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];de._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(sd));const n=await pr.get({path:"/getWallets",params:{...de._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:de._filterWalletsByPlatform(n==null?void 0:n.data)||[],count:n==null?void 0:n.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=q.state;if(t!=null&&t.length){const e={...de._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Tg,include:t},{data:r}=await de.fetchWallets(e);r.sort((s,i)=>t.indexOf(s.id)-t.indexOf(i.id));const n=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(n.map(s=>de._fetchWalletImage(s))),ve.featured=r,ve.allFeatured=r}},async fetchRecommendedWallets(){try{ve.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=q.state,n=[...e??[],...r??[]].filter(Boolean),s=T.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Tg,include:t,exclude:n,chains:s},{data:o,count:a}=await de.fetchWallets(i),c=J.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>de._fetchWalletImage(d))),ve.recommended=o,ve.allRecommended=o,ve.count=a??0}catch{}finally{ve.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=q.state,s=T.getRequestedCaipNetworkIds().join(","),i=[...ve.recommended.map(({id:l})=>l),...r??[],...n??[]].filter(Boolean),o={page:t,entries:jP,include:e,exclude:i,chains:s},{data:a,count:c}=await de.fetchWallets(o),u=a.slice(0,qP).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>de._fetchWalletImage(l))),ve.wallets=ue.uniqueBy([...ve.wallets,...de._filterOutExtensions(a)],"id").filter(l=>{var d;return(d=l.chains)==null?void 0:d.some(h=>s.includes(h))}),ve.count=c>ve.count?c:ve.count,ve.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await de.fetchWallets(e);r&&r.forEach(n=>{ve.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=q.state,s=T.getRequestedCaipNetworkIds().join(",");ve.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await de.fetchWallets(i);et.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>de._fetchWalletImage(c)),ue.wait(300)]),ve.search=de._filterOutExtensions(o)},initPromise(t,e){const r=ve.promises[t];return r||(ve.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const s=[t&&de.initPromise("connectorImages",de.fetchConnectorImages),e&&de.initPromise("featuredWallets",de.fetchFeaturedWallets),r&&de.initPromise("recommendedWallets",de.fetchRecommendedWallets),n&&de.initPromise("networkImages",de.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=q.state.features)!=null&&t.analytics&&de.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await pr.get({path:"/getAnalyticsConfig",params:de._getSdkProperties()});q.setFeatures({analytics:t})}catch{q.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){ve.featured=ve.allFeatured,ve.recommended=ve.allRecommended;return}const e=T.getRequestedCaipNetworkIds().join(",");ve.featured=ve.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),ve.recommended=ve.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),ve.filteredWallets=ve.wallets.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})},clearFilterByNamespaces(){ve.filteredWallets=[]},setFilterByNamespace(t){if(!t){ve.featured=ve.allFeatured,ve.recommended=ve.allRecommended;return}const e=T.getRequestedCaipNetworkIds().join(",");ve.featured=ve.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),ve.recommended=ve.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))}),ve.filteredWallets=ve.wallets.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(s=>e.includes(s))})}},Me=tt({view:"Connect",history:["Connect"],transactionStack:[]}),zP={state:Me,subscribeKey(t,e){return qt(Me,t,e)},pushTransactionStack(t){Me.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=Me.transactionStack.pop();if(e)if(t)Se.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)Se.goBack();else if(e.replace){const i=Me.history.indexOf("ConnectingSiwe");i>0?Se.goBackToIndex(i-1):(ut.close(!0),Me.history=[])}else e.view&&Se.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==Me.view&&(Me.view=t,Me.history.push(t),Me.data=e)},reset(t,e){Me.view=t,Me.history=[t],Me.data=e},replace(t,e){Me.history.at(-1)===t||(Me.view=t,Me.history[Me.history.length-1]=t,Me.data=e)},goBack(){var e;const t=!T.state.activeCaipAddress&&Se.state.view==="ConnectingFarcaster";if(Me.history.length>1&&!Me.history.includes("UnsupportedChain")){Me.history.pop();const[r]=Me.history.slice(-1);r&&(Me.view=r)}else ut.close();(e=Me.data)!=null&&e.wallet&&(Me.data.wallet=void 0),setTimeout(()=>{var r,n,s;if(t){se.setFarcasterUrl(void 0,T.state.activeChain);const i=te.getAuthConnector();(r=i==null?void 0:i.provider)==null||r.reload();const o=Ma(q.state);(s=(n=i==null?void 0:i.provider)==null?void 0:n.syncDappData)==null||s.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(Me.history.length>1){Me.history=Me.history.slice(0,t+1);const[e]=Me.history.slice(-1);e&&(Me.view=e)}}},Se=Mr(zP),xn=tt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Dh={state:xn,subscribe(t){return Qt(xn,()=>t(xn))},setThemeMode(t){xn.themeMode=t;try{const e=te.getAuthConnector();if(e){const r=Dh.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:qn(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){xn.themeVariables={...xn.themeVariables,...t};try{const e=te.getAuthConnector();if(e){const r=Dh.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:qn(xn.themeVariables,xn.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ma(xn)}},cr=Mr(Dh),Y0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Oe=tt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Y0},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),HP={state:Oe,subscribe(t){return Qt(Oe,()=>{t(Oe)})},subscribeKey(t,e){return qt(Oe,t,e)},initialize(t){t.forEach(e=>{const r=J.getConnectedConnectorId(e);r&&te.setConnectorId(r,e)})},setActiveConnector(t){t&&(Oe.activeConnector=di(t))},setConnectors(t){t.filter(s=>!Oe.allConnectors.some(i=>i.id===s.id&&te.getConnectorName(i.name)===te.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Oe.allConnectors.push(di(s))});const r=te.getEnabledNamespaces(),n=te.getEnabledConnectors(r);Oe.connectors=te.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(Oe.filterByNamespaceMap).forEach(e=>{Oe.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Oe.filterByNamespaceMap[e]=!0}),te.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Oe.filterByNamespaceMap[t]=e,te.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=te.getEnabledNamespaces(),e=te.getEnabledConnectors(t),r=te.areAllNamespacesEnabled();Oe.connectors=te.mergeMultiChainConnectors(e),r?de.clearFilterByNamespaces():de.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Oe.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Oe.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Oe.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=te.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=(s==null?void 0:s.id)===z.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=te.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===z.CONNECTOR_ID.AUTH){const s=t,i=Ma(q.state),o=cr.getSnapshot().themeMode,a=cr.getSnapshot().themeVariables;(r=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(n=s==null?void 0:s.provider)==null||n.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:qn(a,o)}),te.setConnectors([t])}else te.setConnectors([t])},getAuthConnector(t){var n;const e=t||T.state.activeChain,r=Oe.connectors.find(s=>s.id===z.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return Oe.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Oe.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Oe.allConnectors.filter(n=>n.chain===T.state.activeChain).find(n=>{var s;return n.explorerId===t||((s=n.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,r=Ma(q.state),n=cr.getSnapshot().themeMode,s=cr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:qn(s,n)})},getConnectorsByNamespace(t){const e=Oe.allConnectors.filter(r=>r.chain===t);return te.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=te.getConnector(t.id,t.rdns);DP.handleMobileDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?Se.push("ConnectingExternal",{connector:e}):Se.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?te.getConnectorsByNamespace(t):te.mergeMultiChainConnectors(Oe.allConnectors)},setFilterByNamespace(t){Oe.filterByNamespace=t,Oe.connectors=te.getConnectors(t),de.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Oe.activeConnectorIds={...Oe.activeConnectorIds,[e]:t},J.setConnectedConnectorId(e,t))},removeConnectorId(t){Oe.activeConnectorIds={...Oe.activeConnectorIds,[t]:void 0},J.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Oe.activeConnectorIds[t]},isConnected(t){return t?!!Oe.activeConnectorIds[t]:Object.values(Oe.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Oe.activeConnectorIds={...Y0}}},te=Mr(HP);function Gc(t,e){return te.getConnectorId(t)===e}function WP(t){const e=Array.from(T.state.chains.keys());let r=[];return t?(r.push([t,T.state.chains.get(t)]),Gc(t,z.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&Gc(n,z.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,T.state.chains.get(n)])}):Gc(t,z.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&Gc(n,z.CONNECTOR_ID.AUTH)&&r.push([n,T.state.chains.get(n)])})):r=Array.from(T.state.chains.entries()),r}var Kc={exports:{}},xg;function VP(){if(xg)return Kc.exports;xg=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(E,y,_){return Function.prototype.apply.call(E,y,_)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:r=function(E){return Object.getOwnPropertyNames(E)};function n(C){console&&console.warn&&console.warn(C)}var s=Number.isNaN||function(E){return E!==E};function i(){i.init.call(this)}Kc.exports=i,Kc.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||s(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||s(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function c(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(E){for(var y=[],_=1;_<arguments.length;_++)y.push(arguments[_]);var P=E==="error",I=this._events;if(I!==void 0)P=P&&I.error===void 0;else if(!P)return!1;if(P){var x;if(y.length>0&&(x=y[0]),x instanceof Error)throw x;var D=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw D.context=x,D}var M=I[E];if(M===void 0)return!1;if(typeof M=="function")e(M,this,y);else for(var B=M.length,O=f(M,B),_=0;_<B;++_)e(O[_],this,y);return!0};function u(C,E,y,_){var P,I,x;if(a(y),I=C._events,I===void 0?(I=C._events=Object.create(null),C._eventsCount=0):(I.newListener!==void 0&&(C.emit("newListener",E,y.listener?y.listener:y),I=C._events),x=I[E]),x===void 0)x=I[E]=y,++C._eventsCount;else if(typeof x=="function"?x=I[E]=_?[y,x]:[x,y]:_?x.unshift(y):x.push(y),P=c(C),P>0&&x.length>P&&!x.warned){x.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=C,D.type=E,D.count=x.length,n(D)}return C}i.prototype.addListener=function(E,y){return u(this,E,y,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(E,y){return u(this,E,y,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(C,E,y){var _={fired:!1,wrapFn:void 0,target:C,type:E,listener:y},P=l.bind(_);return P.listener=y,_.wrapFn=P,P}i.prototype.once=function(E,y){return a(y),this.on(E,d(this,E,y)),this},i.prototype.prependOnceListener=function(E,y){return a(y),this.prependListener(E,d(this,E,y)),this},i.prototype.removeListener=function(E,y){var _,P,I,x,D;if(a(y),P=this._events,P===void 0)return this;if(_=P[E],_===void 0)return this;if(_===y||_.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete P[E],P.removeListener&&this.emit("removeListener",E,_.listener||y));else if(typeof _!="function"){for(I=-1,x=_.length-1;x>=0;x--)if(_[x]===y||_[x].listener===y){D=_[x].listener,I=x;break}if(I<0)return this;I===0?_.shift():g(_,I),_.length===1&&(P[E]=_[0]),P.removeListener!==void 0&&this.emit("removeListener",E,D||y)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(E){var y,_,P;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[E]),this;if(arguments.length===0){var I=Object.keys(_),x;for(P=0;P<I.length;++P)x=I[P],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(y=_[E],typeof y=="function")this.removeListener(E,y);else if(y!==void 0)for(P=y.length-1;P>=0;P--)this.removeListener(E,y[P]);return this};function h(C,E,y){var _=C._events;if(_===void 0)return[];var P=_[E];return P===void 0?[]:typeof P=="function"?y?[P.listener||P]:[P]:y?m(P):f(P,P.length)}i.prototype.listeners=function(E){return h(this,E,!0)},i.prototype.rawListeners=function(E){return h(this,E,!1)},i.listenerCount=function(C,E){return typeof C.listenerCount=="function"?C.listenerCount(E):p.call(C,E)},i.prototype.listenerCount=p;function p(C){var E=this._events;if(E!==void 0){var y=E[C];if(typeof y=="function")return 1;if(y!==void 0)return y.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function f(C,E){for(var y=new Array(E),_=0;_<E;++_)y[_]=C[_];return y}function g(C,E){for(;E+1<C.length;E++)C[E]=C[E+1];C.pop()}function m(C){for(var E=new Array(C.length),y=0;y<E.length;++y)E[y]=C[y].listener||C[y];return E}function w(C,E){return new Promise(function(y,_){function P(x){C.removeListener(E,I),_(x)}function I(){typeof C.removeListener=="function"&&C.removeListener("error",P),y([].slice.call(arguments))}v(C,E,I,{once:!0}),E!=="error"&&b(C,P,{once:!0})})}function b(C,E,y){typeof C.on=="function"&&v(C,"error",E,y)}function v(C,E,y,_){if(typeof C.on=="function")_.once?C.once(E,y):C.on(E,y);else if(typeof C.addEventListener=="function")C.addEventListener(E,function P(I){_.once&&C.removeEventListener(E,P),y(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return Kc.exports}var Lr=VP();const Jf=nl(Lr);var id={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kh=function(t,e){return kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},kh(t,e)};function GP(t,e){kh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $h=function(){return $h=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},$h.apply(this,arguments)};function KP(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function YP(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function ZP(t,e){return function(r,n){e(r,n,t)}}function JP(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function QP(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function XP(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function eT(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function tT(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Uh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function rT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Z0(arguments[e]));return t}function nT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Fa(t){return this instanceof Fa?(this.v=t,this):new Fa(t)}function sT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){n[h]&&(s[h]=function(p){return new Promise(function(f,g){i.push([h,p,f,g])>1||a(h,p)})})}function a(h,p){try{c(n[h](p))}catch(f){d(i[0][3],f)}}function c(h){h.value instanceof Fa?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,p){h(p),i.shift(),i.length&&a(i[0][0],i[0][1])}}function iT(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Fa(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function oT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Uh=="function"?Uh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function aT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function cT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function uT(t){return t&&t.__esModule?t:{default:t}}function lT(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dT(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const hT=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $h},__asyncDelegator:iT,__asyncGenerator:sT,__asyncValues:oT,__await:Fa,__awaiter:QP,__classPrivateFieldGet:lT,__classPrivateFieldSet:dT,__createBinding:eT,__decorate:YP,__exportStar:tT,__extends:GP,__generator:XP,__importDefault:uT,__importStar:cT,__makeTemplateObject:aT,__metadata:JP,__param:ZP,__read:Z0,__rest:KP,__spread:rT,__spreadArrays:nT,__values:Uh},Symbol.toStringTag,{value:"Module"})),_c=J_(hT);var od={},Qo={},Og;function fT(){if(Og)return Qo;Og=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Qo.delay=t,Qo}var Ms={},ad={},Ls={},Rg;function pT(){return Rg||(Rg=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.ONE_THOUSAND=Ls.ONE_HUNDRED=void 0,Ls.ONE_HUNDRED=100,Ls.ONE_THOUSAND=1e3),Ls}var cd={},Dg;function gT(){return Dg||(Dg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(cd)),cd}var kg;function J0(){return kg||(kg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_c;e.__exportStar(pT(),t),e.__exportStar(gT(),t)}(ad)),ad}var $g;function mT(){if($g)return Ms;$g=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.fromMiliseconds=Ms.toMiliseconds=void 0;const t=J0();function e(n){return n*t.ONE_THOUSAND}Ms.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Ms.fromMiliseconds=r,Ms}var Ug;function yT(){return Ug||(Ug=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_c;e.__exportStar(fT(),t),e.__exportStar(mT(),t)}(od)),od}var Oi={},Mg;function wT(){if(Mg)return Oi;Mg=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Oi.Watch=t,Oi.default=t,Oi}var ud={},Xo={},Lg;function bT(){if(Lg)return Xo;Lg=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.IWatch=void 0;class t{}return Xo.IWatch=t,Xo}var Bg;function vT(){return Bg||(Bg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),_c.__exportStar(bT(),t)}(ud)),ud}var Fg;function ET(){return Fg||(Fg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_c;e.__exportStar(yT(),t),e.__exportStar(wT(),t),e.__exportStar(vT(),t),e.__exportStar(J0(),t)}(id)),id}var V=ET();class Ii{}let _T=class extends Ii{constructor(e){super()}};const jg=V.FIVE_SECONDS,Mo={pulse:"heartbeat_pulse"};let CT=class Q0 extends _T{constructor(e){super(e),this.events=new Lr.EventEmitter,this.interval=jg,this.interval=(e==null?void 0:e.interval)||jg}static async init(e){const r=new Q0(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),V.toMiliseconds(this.interval))}pulse(){this.events.emit(Mo.pulse)}};const AT=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,IT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ST=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function NT(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){PT(t);return}return e}function PT(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Yc(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!ST.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(AT.test(t)||IT.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,NT)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function TT(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function bt(t,...e){try{return TT(t(...e))}catch(r){return Promise.reject(r)}}function xT(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function OT(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function gu(t){if(xT(t))return String(t);if(OT(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return gu(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Mh="base64:";function RT(t){return typeof t=="string"?t:Mh+$T(t)}function DT(t){return typeof t!="string"||!t.startsWith(Mh)?t:kT(t.slice(Mh.length))}function kT(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function $T(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ir(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function UT(...t){return ir(t.join(":"))}function Zc(t){return t=ir(t),t?t+":":""}function MT(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function LT(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const BT="memory",FT=()=>{const t=new Map;return{name:BT,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function jT(t={}){const e={mounts:{"":t.driver||FT()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=ir(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await qg(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const h=new Map,p=f=>{let g=h.get(f.base);return g||(g={driver:f.driver,base:f.base,items:[]},h.set(f.base,g)),g};for(const f of u){const g=typeof f=="string",m=ir(g?f:f.key),w=g?void 0:f.value,b=g||!f.options?l:{...l,...f.options},v=r(m);p(v).items.push({key:m,value:w,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(f=>d(f))).then(f=>f.flat())},c={hasItem(u,l={}){u=ir(u);const{relativeKey:d,driver:h}=r(u);return bt(h.hasItem,d,l)},getItem(u,l={}){u=ir(u);const{relativeKey:d,driver:h}=r(u);return bt(h.getItem,d,l).then(p=>Yc(p))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?bt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),l).then(h=>h.map(p=>({key:UT(d.base,p.key),value:Yc(p.value)}))):Promise.all(d.items.map(h=>bt(d.driver.getItem,h.relativeKey,h.options).then(p=>({key:h.key,value:Yc(p)})))))},getItemRaw(u,l={}){u=ir(u);const{relativeKey:d,driver:h}=r(u);return h.getItemRaw?bt(h.getItemRaw,d,l):bt(h.getItem,d,l).then(p=>DT(p))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=ir(u);const{relativeKey:h,driver:p}=r(u);p.setItem&&(await bt(p.setItem,h,gu(l),d),p.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return bt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:gu(h.value),options:h.options})),l);d.driver.setItem&&await Promise.all(d.items.map(h=>bt(d.driver.setItem,h.relativeKey,gu(h.value),h.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=ir(u);const{relativeKey:h,driver:p}=r(u);if(p.setItemRaw)await bt(p.setItemRaw,h,l,d);else if(p.setItem)await bt(p.setItem,h,RT(l),d);else return;p.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=ir(u);const{relativeKey:d,driver:h}=r(u);h.removeItem&&(await bt(h.removeItem,d,l),(l.removeMeta||l.removeMata)&&await bt(h.removeItem,d+"$",l),h.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=ir(u);const{relativeKey:d,driver:h}=r(u),p=Object.create(null);if(h.getMeta&&Object.assign(p,await bt(h.getMeta,d,l)),!l.nativeOnly){const f=await bt(h.getItem,d+"$",l).then(g=>Yc(g));f&&typeof f=="object"&&(typeof f.atime=="string"&&(f.atime=new Date(f.atime)),typeof f.mtime=="string"&&(f.mtime=new Date(f.mtime)),Object.assign(p,f))}return p},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var m;u=Zc(u);const d=n(u,!0);let h=[];const p=[];let f=!0;for(const w of d){(m=w.driver.flags)!=null&&m.maxDepth||(f=!1);const b=await bt(w.driver.getKeys,w.relativeBase,l);for(const v of b){const C=w.mountpoint+ir(v);h.some(E=>C.startsWith(E))||p.push(C)}h=[w.mountpoint,...h.filter(v=>!v.startsWith(w.mountpoint))]}const g=l.maxDepth!==void 0&&!f;return p.filter(w=>(!g||MT(w,l.maxDepth))&&LT(w,u))},async clear(u,l={}){u=Zc(u),await Promise.all(n(u,!1).map(async d=>{if(d.driver.clear)return bt(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(h.map(p=>d.driver.removeItem(p,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>zg(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=Zc(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(qg(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){var d,h;u=Zc(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((h=(d=e.unwatch)[u])==null||h.call(d),delete e.unwatch[u]),l&&await zg(e.mounts[u]),e.mountpoints=e.mountpoints.filter(p=>p!==u),delete e.mounts[u])},getMount(u=""){u=ir(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=ir(u),n(u,l.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function qg(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function zg(t){typeof t.dispose=="function"&&await bt(t.dispose)}function Si(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function X0(t,e){let r;const n=()=>{if(r)return r;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),r=Si(s),r.then(i=>{i.onclose=()=>r=void 0},()=>{}),r};return(s,i)=>n().then(o=>i(o.transaction(e,s).objectStore(e)))}let ld;function Cc(){return ld||(ld=X0("keyval-store","keyval")),ld}function Hg(t,e=Cc()){return e("readonly",r=>Si(r.get(t)))}function qT(t,e,r=Cc()){return r("readwrite",n=>(n.put(e,t),Si(n.transaction)))}function zT(t,e=Cc()){return e("readwrite",r=>(r.delete(t),Si(r.transaction)))}function HT(t=Cc()){return t("readwrite",e=>(e.clear(),Si(e.transaction)))}function WT(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Si(t.transaction)}function VT(t=Cc()){return t("readonly",e=>{if(e.getAllKeys)return Si(e.getAllKeys());const r=[];return WT(e,n=>r.push(n.key)).then(()=>r)})}const GT=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),KT=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function hi(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return KT(t)}catch{return t}}function Yn(t){return typeof t=="string"?t:GT(t)||""}const YT="idb-keyval";var ZT=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=X0(t.dbName,t.storeName)),{name:YT,options:t,async hasItem(s){return!(typeof await Hg(r(s),n)>"u")},async getItem(s){return await Hg(r(s),n)??null},setItem(s,i){return qT(r(s),i,n)},removeItem(s){return zT(r(s),n)},getKeys(){return VT(n)},clear(){return HT(n)}}};const JT="WALLET_CONNECT_V2_INDEXED_DB",QT="keyvaluestorage";let XT=class{constructor(){this.indexedDb=jT({driver:ZT({dbName:JT,storeName:QT})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Yn(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mu={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof dd<"u"&&dd.localStorage?mu.exports=dd.localStorage:typeof window<"u"&&window.localStorage?mu.exports=window.localStorage:mu.exports=new e})();function ex(t){var e;return[t[0],hi((e=t[1])!=null?e:"")]}let tx=class{constructor(){this.localStorage=mu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ex)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return hi(r)}async setItem(e,r){this.localStorage.setItem(e,Yn(r))}async removeItem(e){this.localStorage.removeItem(e)}};const rx="wc_storage_version",Wg=1,nx=async(t,e,r)=>{const n=rx,s=await e.getItem(n);if(s&&s>=Wg){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,Wg),r(e),sx(t,o)},sx=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let ix=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new tx;this.storage=e;try{const r=new XT;nx(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var hd,Vg;function ox(){if(Vg)return hd;Vg=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}hd=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var d="",h=1-o,p=-1,f=r&&r.length||0,g=0;g<f;){if(r.charCodeAt(g)===37&&g+1<f){switch(p=p>-1?p:0,r.charCodeAt(g+1)){case 100:case 102:if(h>=l||n[h]==null)break;p<g&&(d+=r.slice(p,g)),d+=Number(n[h]),p=g+2,g++;break;case 105:if(h>=l||n[h]==null)break;p<g&&(d+=r.slice(p,g)),d+=Math.floor(Number(n[h])),p=g+2,g++;break;case 79:case 111:case 106:if(h>=l||n[h]===void 0)break;p<g&&(d+=r.slice(p,g));var m=typeof n[h];if(m==="string"){d+="'"+n[h]+"'",p=g+2,g++;break}if(m==="function"){d+=n[h].name||"<anonymous>",p=g+2,g++;break}d+=i(n[h]),p=g+2,g++;break;case 115:if(h>=l)break;p<g&&(d+=r.slice(p,g)),d+=String(n[h]),p=g+2,g++;break;case 37:p<g&&(d+=r.slice(p,g)),d+="%",p=g+2,g++,h--;break}++h}++g}return p===-1?r:(p<f&&(d+=r.slice(p)),d)}return hd}var fd,Gg;function ax(){if(Gg)return fd;Gg=1;const t=ox();fd=s;const e=E().console||{},r={mapHttpRequest:f,mapHttpResponse:f,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:f,res:f,err:h};function n(y,_){return Array.isArray(y)?y.filter(function(I){return I!=="!stdSerializers.err"}):y===!0?Object.keys(_):!1}function s(y){y=y||{},y.browser=y.browser||{};const _=y.browser.transmit;if(_&&typeof _.send!="function")throw Error("pino: transmit option must have a send function");const P=y.browser.write||e;y.browser.write&&(y.browser.asObject=!0);const I=y.serializers||{},x=n(y.browser.serialize,I);let D=y.browser.serialize;Array.isArray(y.browser.serialize)&&y.browser.serialize.indexOf("!stdSerializers.err")>-1&&(D=!1);const M=["error","fatal","warn","info","debug","trace"];typeof P=="function"&&(P.error=P.fatal=P.warn=P.info=P.debug=P.trace=P),y.enabled===!1&&(y.level="silent");const B=y.level||"info",O=Object.create(P);O.log||(O.log=m),Object.defineProperty(O,"levelVal",{get:N}),Object.defineProperty(O,"level",{get:R,set:$});const S={transmit:_,serialize:x,asObject:y.browser.asObject,levels:M,timestamp:p(y)};O.levels=s.levels,O.level=B,O.setMaxListeners=O.getMaxListeners=O.emit=O.addListener=O.on=O.prependListener=O.once=O.prependOnceListener=O.removeListener=O.removeAllListeners=O.listeners=O.listenerCount=O.eventNames=O.write=O.flush=m,O.serializers=I,O._serialize=x,O._stdErrSerialize=D,O.child=k,_&&(O._logEvent=d());function N(){return this.level==="silent"?1/0:this.levels.values[this.level]}function R(){return this._level}function $(U){if(U!=="silent"&&!this.levels.values[U])throw Error("unknown level "+U);this._level=U,i(S,O,"error","log"),i(S,O,"fatal","error"),i(S,O,"warn","error"),i(S,O,"info","log"),i(S,O,"debug","log"),i(S,O,"trace","log")}function k(U,W){if(!U)throw new Error("missing bindings for child Pino");W=W||{},x&&U.serializers&&(W.serializers=U.serializers);const Y=W.serializers;if(x&&Y){var ie=Object.assign({},I,Y),K=y.browser.serialize===!0?Object.keys(ie):x;delete U.serializers,c([U],K,ie,this._stdErrSerialize)}function ae(ye){this._childLevel=(ye._childLevel|0)+1,this.error=u(ye,U,"error"),this.fatal=u(ye,U,"fatal"),this.warn=u(ye,U,"warn"),this.info=u(ye,U,"info"),this.debug=u(ye,U,"debug"),this.trace=u(ye,U,"trace"),ie&&(this.serializers=ie,this._serialize=K),_&&(this._logEvent=d([].concat(ye._logEvent.bindings,U)))}return ae.prototype=this,new ae(this)}return O}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=r,s.stdTimeFunctions=Object.assign({},{nullTime:w,epochTime:b,unixTime:v,isoTime:C});function i(y,_,P,I){const x=Object.getPrototypeOf(_);_[P]=_.levelVal>_.levels.values[P]?m:x[P]?x[P]:e[P]||e[I]||m,o(y,_,P)}function o(y,_,P){!y.transmit&&_[P]===m||(_[P]=function(I){return function(){const D=y.timestamp(),M=new Array(arguments.length),B=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var O=0;O<M.length;O++)M[O]=arguments[O];if(y.serialize&&!y.asObject&&c(M,this._serialize,this.serializers,this._stdErrSerialize),y.asObject?I.call(B,a(this,P,M,D)):I.apply(B,M),y.transmit){const S=y.transmit.level||_.level,N=s.levels.values[S],R=s.levels.values[P];if(R<N)return;l(this,{ts:D,methodLevel:P,methodValue:R,transmitValue:s.levels.values[y.transmit.level||_.level],send:y.transmit.send,val:_.levelVal},M)}}}(_[P]))}function a(y,_,P,I){y._serialize&&c(P,y._serialize,y.serializers,y._stdErrSerialize);const x=P.slice();let D=x[0];const M={};I&&(M.time=I),M.level=s.levels.values[_];let B=(y._childLevel|0)+1;if(B<1&&(B=1),D!==null&&typeof D=="object"){for(;B--&&typeof x[0]=="object";)Object.assign(M,x.shift());D=x.length?t(x.shift(),x):void 0}else typeof D=="string"&&(D=t(x.shift(),x));return D!==void 0&&(M.msg=D),M}function c(y,_,P,I){for(const x in y)if(I&&y[x]instanceof Error)y[x]=s.stdSerializers.err(y[x]);else if(typeof y[x]=="object"&&!Array.isArray(y[x]))for(const D in y[x])_&&_.indexOf(D)>-1&&D in P&&(y[x][D]=P[D](y[x][D]))}function u(y,_,P){return function(){const I=new Array(1+arguments.length);I[0]=_;for(var x=1;x<I.length;x++)I[x]=arguments[x-1];return y[P].apply(this,I)}}function l(y,_,P){const I=_.send,x=_.ts,D=_.methodLevel,M=_.methodValue,B=_.val,O=y._logEvent.bindings;c(P,y._serialize||Object.keys(y.serializers),y.serializers,y._stdErrSerialize===void 0?!0:y._stdErrSerialize),y._logEvent.ts=x,y._logEvent.messages=P.filter(function(S){return O.indexOf(S)===-1}),y._logEvent.level.label=D,y._logEvent.level.value=M,I(D,y._logEvent,B),y._logEvent=d(O)}function d(y){return{ts:0,messages:[],bindings:y||[],level:{label:"",value:0}}}function h(y){const _={type:y.constructor.name,msg:y.message,stack:y.stack};for(const P in y)_[P]===void 0&&(_[P]=y[P]);return _}function p(y){return typeof y.timestamp=="function"?y.timestamp:y.timestamp===!1?w:b}function f(){return{}}function g(y){return y}function m(){}function w(){return!1}function b(){return Date.now()}function v(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function E(){function y(_){return typeof _<"u"&&_}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return y(self)||y(window)||y(this)||{}}}return fd}var Yi=ax();const Ac=nl(Yi),cx={level:"info"},Ic="custom_context",Qf=1e3*1024;let ux=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Kg=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new ux(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},ev=class{constructor(e,r=Qf){this.level=e??"error",this.levelValue=Yi.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Kg(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Yi.levels.values.error?console.error(e):r===Yi.levels.values.warn?console.warn(e):r===Yi.levels.values.debug?console.debug(e):r===Yi.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Yn({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Kg(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Yn({extraMetadata:e})),new Blob(r,{type:"application/json"})}},lx=class{constructor(e,r=Qf){this.baseChunkLogger=new ev(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},dx=class{constructor(e,r=Qf){this.baseChunkLogger=new ev(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var hx=Object.defineProperty,fx=Object.defineProperties,px=Object.getOwnPropertyDescriptors,Yg=Object.getOwnPropertySymbols,gx=Object.prototype.hasOwnProperty,mx=Object.prototype.propertyIsEnumerable,Zg=(t,e,r)=>e in t?hx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Uu=(t,e)=>{for(var r in e||(e={}))gx.call(e,r)&&Zg(t,r,e[r]);if(Yg)for(var r of Yg(e))mx.call(e,r)&&Zg(t,r,e[r]);return t},Mu=(t,e)=>fx(t,px(e));function Lo(t){return Mu(Uu({},t),{level:(t==null?void 0:t.level)||cx.level})}function yx(t,e=Ic){return t[e]||""}function wx(t,e,r=Ic){return t[r]=e,t}function hr(t,e=Ic){let r="";return typeof t.bindings>"u"?r=yx(t,e):r=t.bindings().context||"",r}function bx(t,e,r=Ic){const n=hr(t,r);return n.trim()?`${n}/${e}`:e}function zt(t,e,r=Ic){const n=bx(t,e,r),s=t.child({context:n});return wx(s,n,r)}function vx(t){var e,r;const n=new lx((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ac(Mu(Uu({},t.opts),{level:"trace",browser:Mu(Uu({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function Ex(t){var e;const r=new dx((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ac(Mu(Uu({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function Xf(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?vx(t):Ex(t)}var _x=Object.defineProperty,Cx=(t,e,r)=>e in t?_x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jg=(t,e,r)=>Cx(t,typeof e!="symbol"?e+"":e,r);let Ax=class extends Ii{constructor(e){super(),this.opts=e,Jg(this,"protocol","wc"),Jg(this,"version",2)}};var Ix=Object.defineProperty,Sx=(t,e,r)=>e in t?Ix(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nx=(t,e,r)=>Sx(t,e+"",r);let Px=class extends Ii{constructor(e,r){super(),this.core=e,this.logger=r,Nx(this,"records",new Map)}},Tx=class{constructor(e,r){this.logger=e,this.core=r}},xx=class extends Ii{constructor(e,r){super(),this.relayer=e,this.logger=r}},Ox=class extends Ii{constructor(e){super()}},Rx=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},Dx=class extends Ii{constructor(e,r){super(),this.relayer=e,this.logger=r}},kx=class extends Ii{constructor(e,r){super(),this.core=e,this.logger=r}},$x=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},Ux=class{constructor(e,r){this.projectId=e,this.logger=r}},Mx=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var Lx=Object.defineProperty,Bx=(t,e,r)=>e in t?Lx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qg=(t,e,r)=>Bx(t,typeof e!="symbol"?e+"":e,r);let Fx=class{constructor(e){this.opts=e,Qg(this,"protocol","wc"),Qg(this,"version",2)}},jx=class{constructor(e){this.client=e}};function qx(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tv(t,...e){if(!qx(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Xg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zx(t,e){tv(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ri=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pd=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Hx(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function rv(t){return typeof t=="string"&&(t=Hx(t)),tv(t),t}let Wx=class{clone(){return this._cloneInto()}};function Vx(t){const e=n=>t().update(rv(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function nv(t=32){if(Ri&&typeof Ri.getRandomValues=="function")return Ri.getRandomValues(new Uint8Array(t));if(Ri&&typeof Ri.randomBytes=="function")return Ri.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Gx(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let Kx=class extends Wx{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pd(this.buffer)}update(e){Xg(this);const{view:r,buffer:n,blockLen:s}=this;e=rv(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=pd(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xg(this),zx(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Gx(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=pd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const Jc=BigInt(2**32-1),Lh=BigInt(32);function sv(t,e=!1){return e?{h:Number(t&Jc),l:Number(t>>Lh&Jc)}:{h:Number(t>>Lh&Jc)|0,l:Number(t&Jc)|0}}function Yx(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=sv(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const Zx=(t,e)=>BigInt(t>>>0)<<Lh|BigInt(e>>>0),Jx=(t,e,r)=>t>>>r,Qx=(t,e,r)=>t<<32-r|e>>>r,Xx=(t,e,r)=>t>>>r|e<<32-r,e2=(t,e,r)=>t<<32-r|e>>>r,t2=(t,e,r)=>t<<64-r|e>>>r-32,r2=(t,e,r)=>t>>>r-32|e<<64-r,n2=(t,e)=>e,s2=(t,e)=>t,i2=(t,e,r)=>t<<r|e>>>32-r,o2=(t,e,r)=>e<<r|t>>>32-r,a2=(t,e,r)=>e<<r-32|t>>>64-r,c2=(t,e,r)=>t<<r-32|e>>>64-r;function u2(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const l2=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),d2=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,h2=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),f2=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,p2=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),g2=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,_e={fromBig:sv,split:Yx,toBig:Zx,shrSH:Jx,shrSL:Qx,rotrSH:Xx,rotrSL:e2,rotrBH:t2,rotrBL:r2,rotr32H:n2,rotr32L:s2,rotlSH:i2,rotlSL:o2,rotlBH:a2,rotlBL:c2,add:u2,add3L:l2,add3H:d2,add4L:h2,add4H:f2,add5H:g2,add5L:p2},[m2,y2]=_e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ss=new Uint32Array(80),is=new Uint32Array(80);let w2=class extends Kx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:h,Gh:p,Gl:f,Hh:g,Hl:m}=this;return[e,r,n,s,i,o,a,c,u,l,d,h,p,f,g,m]}set(e,r,n,s,i,o,a,c,u,l,d,h,p,f,g,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=p|0,this.Gl=f|0,this.Hh=g|0,this.Hl=m|0}process(e,r){for(let v=0;v<16;v++,r+=4)ss[v]=e.getUint32(r),is[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){const C=ss[v-15]|0,E=is[v-15]|0,y=_e.rotrSH(C,E,1)^_e.rotrSH(C,E,8)^_e.shrSH(C,E,7),_=_e.rotrSL(C,E,1)^_e.rotrSL(C,E,8)^_e.shrSL(C,E,7),P=ss[v-2]|0,I=is[v-2]|0,x=_e.rotrSH(P,I,19)^_e.rotrBH(P,I,61)^_e.shrSH(P,I,6),D=_e.rotrSL(P,I,19)^_e.rotrBL(P,I,61)^_e.shrSL(P,I,6),M=_e.add4L(_,D,is[v-7],is[v-16]),B=_e.add4H(M,y,x,ss[v-7],ss[v-16]);ss[v]=B|0,is[v]=M|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:h,Fh:p,Fl:f,Gh:g,Gl:m,Hh:w,Hl:b}=this;for(let v=0;v<80;v++){const C=_e.rotrSH(d,h,14)^_e.rotrSH(d,h,18)^_e.rotrBH(d,h,41),E=_e.rotrSL(d,h,14)^_e.rotrSL(d,h,18)^_e.rotrBL(d,h,41),y=d&p^~d&g,_=h&f^~h&m,P=_e.add5L(b,E,_,y2[v],is[v]),I=_e.add5H(P,w,C,y,m2[v],ss[v]),x=P|0,D=_e.rotrSH(n,s,28)^_e.rotrBH(n,s,34)^_e.rotrBH(n,s,39),M=_e.rotrSL(n,s,28)^_e.rotrBL(n,s,34)^_e.rotrBL(n,s,39),B=n&i^n&a^i&a,O=s&o^s&c^o&c;w=g|0,b=m|0,g=p|0,m=f|0,p=d|0,f=h|0,{h:d,l:h}=_e.add(u|0,l|0,I|0,x|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const S=_e.add3L(x,M,O);n=_e.add3H(S,I,D,B),s=S|0}({h:n,l:s}=_e.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=_e.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=_e.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=_e.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:h}=_e.add(this.Eh|0,this.El|0,d|0,h|0),{h:p,l:f}=_e.add(this.Fh|0,this.Fl|0,p|0,f|0),{h:g,l:m}=_e.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:b}=_e.add(this.Hh|0,this.Hl|0,w|0,b|0),this.set(n,s,i,o,a,c,u,l,d,h,p,f,g,m,w,b)}roundClean(){ss.fill(0),is.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const b2=Vx(()=>new w2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ep=BigInt(0),iv=BigInt(1),v2=BigInt(2);function tp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rp(t){if(!tp(t))throw new Error("Uint8Array expected")}function gd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const E2=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function np(t){rp(t);let e="";for(let r=0;r<t.length;r++)e+=E2[t[r]];return e}function ov(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ep:BigInt("0x"+t)}const On={_0:48,_9:57,A:65,F:70,a:97,f:102};function em(t){if(t>=On._0&&t<=On._9)return t-On._0;if(t>=On.A&&t<=On.F)return t-(On.A-10);if(t>=On.a&&t<=On.f)return t-(On.a-10)}function av(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=em(t.charCodeAt(i)),a=em(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function _2(t){return ov(np(t))}function yu(t){return rp(t),ov(np(Uint8Array.from(t).reverse()))}function cv(t,e){return av(t.toString(16).padStart(e*2,"0"))}function Bh(t,e){return cv(t,e).reverse()}function Rn(t,e,r){let n;if(typeof e=="string")try{n=av(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(tp(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function tm(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];rp(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const md=t=>typeof t=="bigint"&&ep<=t;function C2(t,e,r){return md(t)&&md(e)&&md(r)&&e<=t&&t<r}function ea(t,e,r,n){if(!C2(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function A2(t){let e;for(e=0;t>ep;t>>=iv,e+=1);return e}const I2=t=>(v2<<BigInt(t-1))-iv,S2={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||tp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function sp(t,e,r={}){const n=(s,i,o)=>{const a=S2[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function rm(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const At=BigInt(0),at=BigInt(1),Ws=BigInt(2),N2=BigInt(3),Fh=BigInt(4),nm=BigInt(5),sm=BigInt(8);function mt(t,e){const r=t%e;return r>=At?r:e+r}function P2(t,e,r){if(e<At)throw new Error("invalid exponent, negatives unsupported");if(r<=At)throw new Error("invalid modulus");if(r===at)return At;let n=at;for(;e>At;)e&at&&(n=n*t%r),t=t*t%r,e>>=at;return n}function an(t,e,r){let n=t;for(;e-- >At;)n*=n,n%=r;return n}function im(t,e){if(t===At)throw new Error("invert: expected non-zero number");if(e<=At)throw new Error("invert: expected positive modulus, got "+e);let r=mt(t,e),n=e,s=At,i=at;for(;r!==At;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==at)throw new Error("invert: does not exist");return mt(s,e)}function T2(t){const e=(t-at)/Ws;let r,n,s;for(r=t-at,n=0;r%Ws===At;r/=Ws,n++);for(s=Ws;s<t&&P2(s,e,t)!==t-at;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+at)/Fh;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+at)/Ws;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let f=o.sqr(d);h<c&&!o.eql(f,o.ONE);h++)f=o.sqr(f);const p=o.pow(u,at<<BigInt(c-h-1));u=o.sqr(p),l=o.mul(l,p),d=o.mul(d,u),c=h}return l}}function x2(t){if(t%Fh===N2){const e=(t+at)/Fh;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%sm===nm){const e=(t-nm)/sm;return function(r,n){const s=r.mul(n,Ws),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Ws),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return T2(t)}const O2=(t,e)=>(mt(t,e)&at)===at,R2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function D2(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=R2.reduce((n,s)=>(n[s]="function",n),e);return sp(t,r)}function k2(t,e,r){if(r<At)throw new Error("invalid exponent, negatives unsupported");if(r===At)return t.ONE;if(r===at)return e;let n=t.ONE,s=e;for(;r>At;)r&at&&(n=t.mul(n,s)),s=t.sqr(s),r>>=at;return n}function $2(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function uv(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function lv(t,e,r=!1,n={}){if(t<=At)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=uv(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:I2(s),ZERO:At,ONE:at,create:c=>mt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return At<=c&&c<t},is0:c=>c===At,isOdd:c=>(c&at)===at,neg:c=>mt(-c,t),eql:(c,u)=>c===u,sqr:c=>mt(c*c,t),add:(c,u)=>mt(c+u,t),sub:(c,u)=>mt(c-u,t),mul:(c,u)=>mt(c*u,t),pow:(c,u)=>k2(a,c,u),div:(c,u)=>mt(c*im(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>im(c,t),sqrt:n.sqrt||(c=>(o||(o=x2(t)),o(a,c))),invertBatch:c=>$2(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?Bh(c,i):cv(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?yu(c):_2(c)}});return Object.freeze(a)}const om=BigInt(0),Qc=BigInt(1);function yd(t,e){const r=e.negate();return t?r:e}function dv(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function wd(t,e){dv(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function U2(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function M2(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const bd=new WeakMap,hv=new WeakMap;function vd(t){return hv.get(t)||1}function L2(t,e){return{constTimeNegate:yd,hasPrecomputes(r){return vd(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>om;)n&Qc&&(s=s.add(i)),i=i.double(),n>>=Qc;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=wd(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=wd(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let h=0;h<i;h++){const p=h*o;let f=Number(s&u);s>>=d,f>o&&(f-=l,s+=Qc);const g=p,m=p+Math.abs(f)-1,w=h%2!==0,b=f<0;f===0?c=c.add(yd(w,n[g])):a=a.add(yd(b,n[m]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=wd(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(s===om)break;let p=Number(s&c);if(s>>=l,p>a&&(p-=u,s+=Qc),p===0)continue;let f=n[h+Math.abs(p)-1];p<0&&(f=f.negate()),i=i.add(f)}return i},getPrecomputes(r,n,s){let i=bd.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&bd.set(n,s(i))),i},wNAFCached(r,n,s){const i=vd(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=vd(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){dv(n,e),hv.set(r,n),bd.delete(r)}}}function B2(t,e,r,n){if(U2(r,t),M2(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=A2(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let p=0;p<n.length;p++){const f=n[p],g=Number(f>>BigInt(d)&BigInt(a));c[g]=c[g].add(r[p])}let h=s;for(let p=c.length-1,f=s;p>0;p--)f=f.add(c[p]),h=h.add(f);if(l=l.add(h),d!==0)for(let p=0;p<o;p++)l=l.double()}return l}function F2(t){return D2(t.Fp),sp(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...uv(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const jr=BigInt(0),er=BigInt(1),Xc=BigInt(2),j2=BigInt(8),q2={zip215:!0};function z2(t){const e=F2(t);return sp(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function H2(t){const e=z2(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=Xc<<BigInt(a*8)-er,l=r.create,d=lv(e.n,e.nBitLength),h=e.uvRatio||((S,N)=>{try{return{isValid:!0,value:r.sqrt(S*r.inv(N))}}catch{return{isValid:!1,value:jr}}}),p=e.adjustScalarBytes||(S=>S),f=e.domain||((S,N,R)=>{if(gd("phflag",R),N.length||R)throw new Error("Contexts/pre-hash are not supported");return S});function g(S,N){ea("coordinate "+S,N,jr,u)}function m(S){if(!(S instanceof v))throw new Error("ExtendedPoint expected")}const w=rm((S,N)=>{const{ex:R,ey:$,ez:k}=S,U=S.is0();N==null&&(N=U?j2:r.inv(k));const W=l(R*N),Y=l($*N),ie=l(k*N);if(U)return{x:jr,y:er};if(ie!==er)throw new Error("invZ was invalid");return{x:W,y:Y}}),b=rm(S=>{const{a:N,d:R}=e;if(S.is0())throw new Error("bad point: ZERO");const{ex:$,ey:k,ez:U,et:W}=S,Y=l($*$),ie=l(k*k),K=l(U*U),ae=l(K*K),ye=l(Y*N),Ke=l(K*l(ye+ie)),Be=l(ae+l(R*l(Y*ie)));if(Ke!==Be)throw new Error("bad point: equation left != right (1)");const Te=l($*k),Mt=l(U*W);if(Te!==Mt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(N,R,$,k){this.ex=N,this.ey=R,this.ez=$,this.et=k,g("x",N),g("y",R),g("z",$),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof v)throw new Error("extended point not allowed");const{x:R,y:$}=N||{};return g("x",R),g("y",$),new v(R,$,er,l(R*$))}static normalizeZ(N){const R=r.invertBatch(N.map($=>$.ez));return N.map(($,k)=>$.toAffine(R[k])).map(v.fromAffine)}static msm(N,R){return B2(v,d,N,R)}_setWindowSize(N){y.setWindowSize(this,N)}assertValidity(){b(this)}equals(N){m(N);const{ex:R,ey:$,ez:k}=this,{ex:U,ey:W,ez:Y}=N,ie=l(R*Y),K=l(U*k),ae=l($*Y),ye=l(W*k);return ie===K&&ae===ye}is0(){return this.equals(v.ZERO)}negate(){return new v(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:N}=e,{ex:R,ey:$,ez:k}=this,U=l(R*R),W=l($*$),Y=l(Xc*l(k*k)),ie=l(N*U),K=R+$,ae=l(l(K*K)-U-W),ye=ie+W,Ke=ye-Y,Be=ie-W,Te=l(ae*Ke),Mt=l(ye*Be),Nt=l(ae*Be),Ht=l(Ke*ye);return new v(Te,Mt,Ht,Nt)}add(N){m(N);const{a:R,d:$}=e,{ex:k,ey:U,ez:W,et:Y}=this,{ex:ie,ey:K,ez:ae,et:ye}=N;if(R===BigInt(-1)){const Tp=l((U-k)*(K+ie)),xp=l((U+k)*(K-ie)),Ml=l(xp-Tp);if(Ml===jr)return this.double();const Op=l(W*Xc*ye),Rp=l(Y*Xc*ae),Dp=Rp+Op,kp=xp+Tp,$p=Rp-Op,k_=l(Dp*Ml),$_=l(kp*$p),U_=l(Dp*$p),M_=l(Ml*kp);return new v(k_,$_,M_,U_)}const Ke=l(k*ie),Be=l(U*K),Te=l(Y*$*ye),Mt=l(W*ae),Nt=l((k+U)*(ie+K)-Ke-Be),Ht=Mt-Te,_r=Mt+Te,Cr=l(Be-R*Ke),Ti=l(Nt*Ht),O_=l(_r*Cr),R_=l(Nt*Cr),D_=l(Ht*_r);return new v(Ti,O_,D_,R_)}subtract(N){return this.add(N.negate())}wNAF(N){return y.wNAFCached(this,N,v.normalizeZ)}multiply(N){const R=N;ea("scalar",R,er,n);const{p:$,f:k}=this.wNAF(R);return v.normalizeZ([$,k])[0]}multiplyUnsafe(N,R=v.ZERO){const $=N;return ea("scalar",$,jr,n),$===jr?E:this.is0()||$===er?this:y.wNAFCachedUnsafe(this,$,v.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return y.unsafeLadder(this,n).is0()}toAffine(N){return w(this,N)}clearCofactor(){const{h:N}=e;return N===er?this:this.multiplyUnsafe(N)}static fromHex(N,R=!1){const{d:$,a:k}=e,U=r.BYTES;N=Rn("pointHex",N,U),gd("zip215",R);const W=N.slice(),Y=N[U-1];W[U-1]=Y&-129;const ie=yu(W),K=R?u:r.ORDER;ea("pointHex.y",ie,jr,K);const ae=l(ie*ie),ye=l(ae-er),Ke=l($*ae-k);let{isValid:Be,value:Te}=h(ye,Ke);if(!Be)throw new Error("Point.fromHex: invalid y coordinate");const Mt=(Te&er)===er,Nt=(Y&128)!==0;if(!R&&Te===jr&&Nt)throw new Error("Point.fromHex: x=0 and x_0=1");return Nt!==Mt&&(Te=l(-Te)),v.fromAffine({x:Te,y:ie})}static fromPrivateKey(N){return I(N).point}toRawBytes(){const{x:N,y:R}=this.toAffine(),$=Bh(R,r.BYTES);return $[$.length-1]|=N&er?128:0,$}toHex(){return np(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,er,l(e.Gx*e.Gy)),v.ZERO=new v(jr,er,er,jr);const{BASE:C,ZERO:E}=v,y=L2(v,a*8);function _(S){return mt(S,n)}function P(S){return _(yu(S))}function I(S){const N=r.BYTES;S=Rn("private key",S,N);const R=Rn("hashed private key",i(S),2*N),$=p(R.slice(0,N)),k=R.slice(N,2*N),U=P($),W=C.multiply(U),Y=W.toRawBytes();return{head:$,prefix:k,scalar:U,point:W,pointBytes:Y}}function x(S){return I(S).pointBytes}function D(S=new Uint8Array,...N){const R=tm(...N);return P(i(f(R,Rn("context",S),!!s)))}function M(S,N,R={}){S=Rn("message",S),s&&(S=s(S));const{prefix:$,scalar:k,pointBytes:U}=I(N),W=D(R.context,$,S),Y=C.multiply(W).toRawBytes(),ie=D(R.context,Y,U,S),K=_(W+ie*k);ea("signature.s",K,jr,n);const ae=tm(Y,Bh(K,r.BYTES));return Rn("result",ae,r.BYTES*2)}const B=q2;function O(S,N,R,$=B){const{context:k,zip215:U}=$,W=r.BYTES;S=Rn("signature",S,2*W),N=Rn("message",N),R=Rn("publicKey",R,W),U!==void 0&&gd("zip215",U),s&&(N=s(N));const Y=yu(S.slice(W,2*W));let ie,K,ae;try{ie=v.fromHex(R,U),K=v.fromHex(S.slice(0,W),U),ae=C.multiplyUnsafe(Y)}catch{return!1}if(!U&&ie.isSmallOrder())return!1;const ye=D(k,K.toRawBytes(),ie.toRawBytes(),N);return K.add(ie.multiplyUnsafe(ye)).subtract(ae).clearCofactor().equals(v.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:x,sign:M,verify:O,ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute(S=8,N=v.BASE){return N._setWindowSize(S),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const ip=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),am=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const W2=BigInt(1),cm=BigInt(2);BigInt(3);const V2=BigInt(5),G2=BigInt(8);function K2(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=ip,o=t*t%i*t%i,a=an(o,cm,i)*o%i,c=an(a,W2,i)*t%i,u=an(c,V2,i)*c%i,l=an(u,e,i)*u%i,d=an(l,r,i)*l%i,h=an(d,n,i)*d%i,p=an(h,s,i)*h%i,f=an(p,s,i)*h%i,g=an(f,e,i)*u%i;return{pow_p_5_8:an(g,cm,i)*t%i,b2:o}}function Y2(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Z2(t,e){const r=ip,n=mt(e*e*e,r),s=mt(n*n*e,r),i=K2(t*s).pow_p_5_8;let o=mt(t*n*i,r);const a=mt(e*o*o,r),c=o,u=mt(o*am,r),l=a===t,d=a===mt(-t,r),h=a===mt(-t*am,r);return l&&(o=c),(d||h)&&(o=u),O2(o,r)&&(o=mt(-o,r)),{isValid:l||d,value:o}}const J2=lv(ip,void 0,!0),Q2={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:J2,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:G2,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:b2,randomBytes:nv,adjustScalarBytes:Y2,uvRatio:Z2},fv=H2(Q2),X2="EdDSA",eO="JWT",Lu=".",wl="base64url",pv="utf8",gv="utf8",tO=":",rO="did",nO="key",um="base58btc",sO="z",iO="K36",oO=32;function op(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function mv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?op(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function yv(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=mv(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return op(r)}function aO(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,m=0,w=0,b=f.length;w!==b&&f[w]===0;)w++,g++;for(var v=(b-w)*l+1>>>0,C=new Uint8Array(v);w!==b;){for(var E=f[w],y=0,_=v-1;(E!==0||y<m)&&_!==-1;_--,y++)E+=256*C[_]>>>0,C[_]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=y,w++}for(var P=v-m;P!==v&&C[P]===0;)P++;for(var I=c.repeat(g);P<v;++P)I+=t.charAt(C[P]);return I}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var m=0,w=0;f[g]===c;)m++,g++;for(var b=(f.length-g)*u+1>>>0,v=new Uint8Array(b);f[g];){var C=r[f.charCodeAt(g)];if(C===255)return;for(var E=0,y=b-1;(C!==0||E<w)&&y!==-1;y--,E++)C+=a*v[y]>>>0,v[y]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");w=E,g++}if(f[g]!==" "){for(var _=b-w;_!==b&&v[_]===0;)_++;for(var P=new Uint8Array(m+(b-_)),I=m;_!==b;)P[I++]=v[_++];return P}}}function p(f){var g=h(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var cO=aO,uO=cO;const wv=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},lO=t=>new TextEncoder().encode(t),dO=t=>new TextDecoder().decode(t);let hO=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},fO=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return bv(this,e)}},pO=class{constructor(e){this.decoders=e}or(e){return bv(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const bv=(t,e)=>new pO({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let gO=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new hO(e,r,n),this.decoder=new fO(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const bl=({name:t,prefix:e,encode:r,decode:n})=>new gO(t,e,r,n),Sc=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=uO(r,e);return bl({prefix:t,name:e,encode:n,decode:i=>wv(s(i))})},mO=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},yO=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},kt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>bl({prefix:e,name:t,encode(s){return yO(s,n,r)},decode(s){return mO(s,n,r,t)}}),wO=bl({prefix:"\0",name:"identity",encode:t=>dO(t),decode:t=>lO(t)});var bO=Object.freeze({__proto__:null,identity:wO});const vO=kt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EO=Object.freeze({__proto__:null,base2:vO});const _O=kt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var CO=Object.freeze({__proto__:null,base8:_O});const AO=Sc({prefix:"9",name:"base10",alphabet:"0123456789"});var IO=Object.freeze({__proto__:null,base10:AO});const SO=kt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NO=kt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var PO=Object.freeze({__proto__:null,base16:SO,base16upper:NO});const TO=kt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xO=kt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),OO=kt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),RO=kt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),DO=kt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kO=kt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$O=kt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UO=kt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),MO=kt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var LO=Object.freeze({__proto__:null,base32:TO,base32upper:xO,base32pad:OO,base32padupper:RO,base32hex:DO,base32hexupper:kO,base32hexpad:$O,base32hexpadupper:UO,base32z:MO});const BO=Sc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),FO=Sc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jO=Object.freeze({__proto__:null,base36:BO,base36upper:FO});const qO=Sc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zO=Sc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var HO=Object.freeze({__proto__:null,base58btc:qO,base58flickr:zO});const WO=kt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),VO=kt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),GO=kt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),KO=kt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var YO=Object.freeze({__proto__:null,base64:WO,base64pad:VO,base64url:GO,base64urlpad:KO});const vv=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ZO=vv.reduce((t,e,r)=>(t[r]=e,t),[]),JO=vv.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function QO(t){return t.reduce((e,r)=>(e+=ZO[r],e),"")}function XO(t){const e=[];for(const r of t){const n=JO[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const eR=bl({prefix:"🚀",name:"base256emoji",encode:QO,decode:XO});var tR=Object.freeze({__proto__:null,base256emoji:eR}),rR=Ev,lm=128,nR=-128,sR=Math.pow(2,31);function Ev(t,e,r){e=e||[],r=r||0;for(var n=r;t>=sR;)e[r++]=t&255|lm,t/=128;for(;t&nR;)e[r++]=t&255|lm,t>>>=7;return e[r]=t|0,Ev.bytes=r-n+1,e}var iR=jh,oR=128,dm=127;function jh(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw jh.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&dm)<<s:(o&dm)*Math.pow(2,s),s+=7}while(o>=oR);return jh.bytes=i-n,r}var aR=Math.pow(2,7),cR=Math.pow(2,14),uR=Math.pow(2,21),lR=Math.pow(2,28),dR=Math.pow(2,35),hR=Math.pow(2,42),fR=Math.pow(2,49),pR=Math.pow(2,56),gR=Math.pow(2,63),mR=function(t){return t<aR?1:t<cR?2:t<uR?3:t<lR?4:t<dR?5:t<hR?6:t<fR?7:t<pR?8:t<gR?9:10},yR={encode:rR,decode:iR,encodingLength:mR},_v=yR;const hm=(t,e,r=0)=>(_v.encode(t,e,r),e),fm=t=>_v.encodingLength(t),qh=(t,e)=>{const r=e.byteLength,n=fm(t),s=n+fm(r),i=new Uint8Array(s+r);return hm(t,i,0),hm(r,i,n),i.set(e,s),new wR(t,r,e,i)};let wR=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const Cv=({name:t,code:e,encode:r})=>new bR(t,e,r);let bR=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?qh(this.code,r):r.then(n=>qh(this.code,n))}else throw Error("Unknown type, must be binary type")}};const Av=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),vR=Cv({name:"sha2-256",code:18,encode:Av("SHA-256")}),ER=Cv({name:"sha2-512",code:19,encode:Av("SHA-512")});var _R=Object.freeze({__proto__:null,sha256:vR,sha512:ER});const Iv=0,CR="identity",Sv=wv,AR=t=>qh(Iv,Sv(t)),IR={code:Iv,name:CR,encode:Sv,digest:AR};var SR=Object.freeze({__proto__:null,identity:IR});new TextEncoder,new TextDecoder;const pm={...bO,...EO,...CO,...IO,...PO,...LO,...jO,...HO,...YO,...tR};({..._R,...SR});function Nv(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const gm=Nv("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ed=Nv("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=mv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Pv={utf8:gm,"utf-8":gm,hex:pm.base16,latin1:Ed,ascii:Ed,binary:Ed,...pm};function vl(t,e="utf8"){const r=Pv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Bo(t,e="utf8"){const r=Pv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?op(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function mm(t){return hi(vl(Bo(t,wl),pv))}function Bu(t){return vl(Bo(Yn(t),pv),wl)}function Tv(t){const e=Bo(iO,um),r=sO+vl(yv([e,t]),um);return[rO,nO,r].join(tO)}function NR(t){return vl(t,wl)}function PR(t){return Bo(t,wl)}function TR(t){return Bo([Bu(t.header),Bu(t.payload)].join(Lu),gv)}function xR(t){return[Bu(t.header),Bu(t.payload),NR(t.signature)].join(Lu)}function zh(t){const e=t.split(Lu),r=mm(e[0]),n=mm(e[1]),s=PR(e[2]),i=Bo(e.slice(0,2).join(Lu),gv);return{header:r,payload:n,signature:s,data:i}}function ym(t=nv(oO)){const e=fv.getPublicKey(t);return{secretKey:yv([t,e]),publicKey:e}}async function OR(t,e,r,n,s=V.fromMiliseconds(Date.now())){const i={alg:X2,typ:eO},o=Tv(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=TR({header:i,payload:c}),l=fv.sign(u,n.secretKey.slice(0,32));return xR({header:i,payload:c,signature:l})}var wm=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},RR=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),DR=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),kR=function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t}(),$R=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),UR=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),MR=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,LR=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,bm=3,BR=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",MR]],vm=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function FR(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new UR:typeof navigator<"u"?qR(navigator.userAgent):HR()}function jR(t){return t!==""&&BR.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function qR(t){var e=jR(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new $R;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<bm&&(s=wm(wm([],s,!0),WR(bm-s.length),!0)):s=[];var i=s.join("."),o=zR(t),a=LR.exec(t);return a&&a[1]?new kR(r,i,o,a[1]):new RR(r,i,o)}function zR(t){for(var e=0,r=vm.length;e<r;e++){var n=vm[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function HR(){var t=typeof process<"u"&&process.version;return t?new DR(process.version.slice(1)):null}function WR(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var He={},Em;function xv(){if(Em)return He;Em=1,Object.defineProperty(He,"__esModule",{value:!0}),He.getLocalStorage=He.getLocalStorageOrThrow=He.getCrypto=He.getCryptoOrThrow=He.getLocation=He.getLocationOrThrow=He.getNavigator=He.getNavigatorOrThrow=He.getDocument=He.getDocumentOrThrow=He.getFromWindowOrThrow=He.getFromWindow=void 0;function t(h){let p;return typeof window<"u"&&typeof window[h]<"u"&&(p=window[h]),p}He.getFromWindow=t;function e(h){const p=t(h);if(!p)throw new Error(`${h} is not defined in Window`);return p}He.getFromWindowOrThrow=e;function r(){return e("document")}He.getDocumentOrThrow=r;function n(){return t("document")}He.getDocument=n;function s(){return e("navigator")}He.getNavigatorOrThrow=s;function i(){return t("navigator")}He.getNavigator=i;function o(){return e("location")}He.getLocationOrThrow=o;function a(){return t("location")}He.getLocation=a;function c(){return e("crypto")}He.getCryptoOrThrow=c;function u(){return t("crypto")}He.getCrypto=u;function l(){return e("localStorage")}He.getLocalStorageOrThrow=l;function d(){return t("localStorage")}return He.getLocalStorage=d,He}var fi=xv(),ta={},_m;function VR(){if(_m)return ta;_m=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.getWindowMetadata=void 0;const t=xv();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const p=r.getElementsByTagName("link"),f=[];for(let g=0;g<p.length;g++){const m=p[g],w=m.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const b=m.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let v=n.protocol+"//"+n.host;if(b.indexOf("/")===0)v+=b;else{const C=n.pathname.split("/");C.pop();const E=C.join("/");v+=E+"/"+b}f.push(v)}else if(b.indexOf("//")===0){const v=n.protocol+b;f.push(v)}else f.push(b)}}return f}function i(...p){const f=r.getElementsByTagName("meta");for(let g=0;g<f.length;g++){const m=f[g],w=["itemprop","property","name"].map(b=>m.getAttribute(b)).filter(b=>b?p.includes(b):!1);if(w.length&&w){const b=m.getAttribute("content");if(b)return b}}return""}function o(){let p=i("name","og:site_name","og:title","twitter:title");return p||(p=r.title),p}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,d=s();return{description:u,url:l,icons:d,name:c}}return ta.getWindowMetadata=e,ta}var GR=VR();function KR(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,h=0;const p=u.length;for(;h!==p&&u[h]===0;)h++,l++;const f=(p-h)*i+1>>>0,g=new Uint8Array(f);for(;h!==p;){let b=u[h],v=0;for(let C=f-1;(b!==0||v<d)&&C!==-1;C--,v++)b+=256*g[C]>>>0,g[C]=b%r>>>0,b=b/r>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let m=f-d;for(;m!==f&&g[m]===0;)m++;let w=n.repeat(l);for(;m<f;++m)w+=t.charAt(g[m]);return w}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,h=0;for(;u[l]===n;)d++,l++;const p=(u.length-l)*s+1>>>0,f=new Uint8Array(p);for(;l<u.length;){const b=u.charCodeAt(l);if(b>255)return;let v=e[b];if(v===255)return;let C=0;for(let E=p-1;(v!==0||C<h)&&E!==-1;E--,C++)v+=r*f[E]>>>0,f[E]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=C,l++}let g=p-h;for(;g!==p&&f[g]===0;)g++;const m=new Uint8Array(d+(p-g));let w=d;for(;g!==p;)m[w++]=f[g++];return m}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var YR="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ov=KR(YR);function Rv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function ba(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=Rv(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function ZR(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,m=0,w=0,b=f.length;w!==b&&f[w]===0;)w++,g++;for(var v=(b-w)*l+1>>>0,C=new Uint8Array(v);w!==b;){for(var E=f[w],y=0,_=v-1;(E!==0||y<m)&&_!==-1;_--,y++)E+=256*C[_]>>>0,C[_]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=y,w++}for(var P=v-m;P!==v&&C[P]===0;)P++;for(var I=c.repeat(g);P<v;++P)I+=t.charAt(C[P]);return I}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var m=0,w=0;f[g]===c;)m++,g++;for(var b=(f.length-g)*u+1>>>0,v=new Uint8Array(b);f[g];){var C=r[f.charCodeAt(g)];if(C===255)return;for(var E=0,y=b-1;(C!==0||E<w)&&y!==-1;y--,E++)C+=a*v[y]>>>0,v[y]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");w=E,g++}if(f[g]!==" "){for(var _=b-w;_!==b&&v[_]===0;)_++;for(var P=new Uint8Array(m+(b-_)),I=m;_!==b;)P[I++]=v[_++];return P}}}function p(f){var g=h(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var JR=ZR,QR=JR;const XR=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},e3=t=>new TextEncoder().encode(t),t3=t=>new TextDecoder().decode(t);class r3{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class n3{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Dv(this,e)}}class s3{constructor(e){this.decoders=e}or(e){return Dv(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Dv=(t,e)=>new s3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class i3{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new r3(e,r,n),this.decoder=new n3(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const El=({name:t,prefix:e,encode:r,decode:n})=>new i3(t,e,r,n),Nc=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=QR(r,e);return El({prefix:t,name:e,encode:n,decode:i=>XR(s(i))})},o3=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},a3=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},$t=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>El({prefix:e,name:t,encode(s){return a3(s,n,r)},decode(s){return o3(s,n,r,t)}}),c3=El({prefix:"\0",name:"identity",encode:t=>t3(t),decode:t=>e3(t)}),u3=Object.freeze(Object.defineProperty({__proto__:null,identity:c3},Symbol.toStringTag,{value:"Module"})),l3=$t({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),d3=Object.freeze(Object.defineProperty({__proto__:null,base2:l3},Symbol.toStringTag,{value:"Module"})),h3=$t({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),f3=Object.freeze(Object.defineProperty({__proto__:null,base8:h3},Symbol.toStringTag,{value:"Module"})),p3=Nc({prefix:"9",name:"base10",alphabet:"0123456789"}),g3=Object.freeze(Object.defineProperty({__proto__:null,base10:p3},Symbol.toStringTag,{value:"Module"})),m3=$t({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),y3=$t({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),w3=Object.freeze(Object.defineProperty({__proto__:null,base16:m3,base16upper:y3},Symbol.toStringTag,{value:"Module"})),b3=$t({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),v3=$t({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),E3=$t({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_3=$t({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),C3=$t({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),A3=$t({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),I3=$t({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),S3=$t({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),N3=$t({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),P3=Object.freeze(Object.defineProperty({__proto__:null,base32:b3,base32hex:C3,base32hexpad:I3,base32hexpadupper:S3,base32hexupper:A3,base32pad:E3,base32padupper:_3,base32upper:v3,base32z:N3},Symbol.toStringTag,{value:"Module"})),T3=Nc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),x3=Nc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),O3=Object.freeze(Object.defineProperty({__proto__:null,base36:T3,base36upper:x3},Symbol.toStringTag,{value:"Module"})),R3=Nc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),D3=Nc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),k3=Object.freeze(Object.defineProperty({__proto__:null,base58btc:R3,base58flickr:D3},Symbol.toStringTag,{value:"Module"})),$3=$t({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),U3=$t({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),M3=$t({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),L3=$t({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),B3=Object.freeze(Object.defineProperty({__proto__:null,base64:$3,base64pad:U3,base64url:M3,base64urlpad:L3},Symbol.toStringTag,{value:"Module"})),kv=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),F3=kv.reduce((t,e,r)=>(t[r]=e,t),[]),j3=kv.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function q3(t){return t.reduce((e,r)=>(e+=F3[r],e),"")}function z3(t){const e=[];for(const r of t){const n=j3[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const H3=El({prefix:"🚀",name:"base256emoji",encode:q3,decode:z3}),W3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:H3},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Cm={...u3,...d3,...f3,...g3,...w3,...P3,...O3,...k3,...B3,...W3};function $v(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Am=$v("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_d=$v("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Rv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Uv={utf8:Am,"utf-8":Am,hex:Cm.base16,latin1:_d,ascii:_d,binary:_d,...Cm};function Dr(t,e="utf8"){const r=Uv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function dr(t,e="utf8"){const r=Uv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const V3={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var G3={};const K3=":";function so(t){const[e,r]=t.split(K3);return{namespace:e,reference:r}}function Mv(t,e){return t.includes(":")?[t]:e.chains||[]}var Y3=Object.defineProperty,Z3=Object.defineProperties,J3=Object.getOwnPropertyDescriptors,Im=Object.getOwnPropertySymbols,Q3=Object.prototype.hasOwnProperty,X3=Object.prototype.propertyIsEnumerable,Sm=(t,e,r)=>e in t?Y3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nm=(t,e)=>{for(var r in e||(e={}))Q3.call(e,r)&&Sm(t,r,e[r]);if(Im)for(var r of Im(e))X3.call(e,r)&&Sm(t,r,e[r]);return t},eD=(t,e)=>Z3(t,J3(e));const tD="ReactNative",vr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},rD="js";function Fu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function $s(){return!fi.getDocument()&&!!fi.getNavigator()&&navigator.product===tD}function nD(){return $s()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function sD(){return $s()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Pc(){return!Fu()&&!!fi.getNavigator()&&!!fi.getDocument()}function Tc(){return $s()?vr.reactNative:Fu()?vr.node:Pc()?vr.browser:vr.unknown}function Pm(){var t;try{return $s()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function iD(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const s=e[n];s!==void 0&&r.set(n,s)}return r.toString()}function oD(t){var e,r;const n=Lv();try{return t!=null&&t.url&&n.url&&t.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),eD(Nm(Nm({},n),t),{url:(t==null?void 0:t.url)||n.url,name:(t==null?void 0:t.name)||n.name,description:(t==null?void 0:t.description)||n.description,icons:(r=t==null?void 0:t.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function Lv(){return GR.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function aD(){if(Tc()===vr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=FR();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function cD(){var t;const e=Tc();return e===vr.browser?[e,((t=fi.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function Bv(t,e,r){const n=aD(),s=cD();return[[t,e].join("-"),[rD,r].join("-"),n,s].join("/")}function uD({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=Bv(t,e,n),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=iD(u[1]||"",d);return u[0]+"?"+h}function Ys(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Hh(t){return Object.fromEntries(t.entries())}function Wh(t){return new Map(Object.entries(t))}function zs(t=V.FIVE_MINUTES,e){const r=V.toMiliseconds(t||V.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function vs(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function Fv(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function lD(t){return Fv("topic",t)}function dD(t){return Fv("id",t)}function jv(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function gt(t,e){return V.fromMiliseconds(Date.now()+V.toMiliseconds(t))}function ds(t){return Date.now()>=V.toMiliseconds(t)}function Le(t,e){return`${t}${e?`:${e}`:""}`}function wu(t=[],e=[]){return[...new Set([...t,...e])]}async function hD({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=fD(i,t,e),a=Tc();if(a===vr.browser){if(!((n=fi.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}pD(o)}else a===vr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function fD(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${wD(n,!0)}`}else s=`${s}/wc?${n}`;return s}function pD(t){let e="_self";yD()?e="_top":(mD()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function gD(t,e){let r="";try{if(Pc()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function Tm(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function xm(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ap(){return typeof process<"u"&&G3.IS_VITEST==="true"}function mD(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function yD(){try{return window.self!==window.top}catch{return!1}}function wD(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function qv(t){return Buffer.from(t,"base64").toString("utf-8")}function bD(t){return new Promise(e=>setTimeout(e,t))}function ja(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function vD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xc(t,...e){if(!vD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ja(t.outputLen),ja(t.blockLen)}function Eo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zv(t,e){xc(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const eu=BigInt(2**32-1),Om=BigInt(32);function ED(t,e=!1){return e?{h:Number(t&eu),l:Number(t>>Om&eu)}:{h:Number(t>>Om&eu)|0,l:Number(t&eu)|0}}function _D(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=ED(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const CD=(t,e,r)=>t<<r|e>>>32-r,AD=(t,e,r)=>e<<r|t>>>32-r,ID=(t,e,r)=>e<<r-32|t>>>64-r,SD=(t,e,r)=>t<<r-32|e>>>64-r,Di=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ND(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Cd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function cn(t,e){return t<<32-e|t>>>e}const Rm=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function PD(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Dm(t){for(let e=0;e<t.length;e++)t[e]=PD(t[e])}function TD(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function _o(t){return typeof t=="string"&&(t=TD(t)),xc(t),t}function xD(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];xc(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let up=class{clone(){return this._cloneInto()}};function Hv(t){const e=n=>t().update(_o(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Fo(t=32){if(Di&&typeof Di.getRandomValues=="function")return Di.getRandomValues(new Uint8Array(t));if(Di&&typeof Di.randomBytes=="function")return Di.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Wv=[],Vv=[],Gv=[],OD=BigInt(0),ra=BigInt(1),RD=BigInt(2),DD=BigInt(7),kD=BigInt(256),$D=BigInt(113);for(let t=0,e=ra,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Wv.push(2*(5*n+r)),Vv.push((t+1)*(t+2)/2%64);let s=OD;for(let i=0;i<7;i++)e=(e<<ra^(e>>DD)*$D)%kD,e&RD&&(s^=ra<<(ra<<BigInt(i))-ra);Gv.push(s)}const[UD,MD]=_D(Gv,!0),km=(t,e,r)=>r>32?ID(t,e,r):CD(t,e,r),$m=(t,e,r)=>r>32?SD(t,e,r):AD(t,e,r);function LD(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=km(u,l,1)^r[a],h=$m(u,l,1)^r[a+1];for(let p=0;p<50;p+=10)t[o+p]^=d,t[o+p+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Vv[o],c=km(s,i,a),u=$m(s,i,a),l=Wv[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=UD[n],t[1]^=MD[n]}r.fill(0)}let BD=class Kv extends up{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ja(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ND(this.state)}keccak(){Rm||Dm(this.state32),LD(this.state32,this.rounds),Rm||Dm(this.state32),this.posOut=0,this.pos=0}update(e){Eo(this);const{blockLen:r,state:n}=this;e=_o(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Eo(this,!1),xc(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ja(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zv(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Kv(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const FD=(t,e,r)=>Hv(()=>new BD(e,t,r)),jD=FD(1,136,256/8),qD="https://rpc.walletconnect.org/v1";function Yv(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(jD(r)).toString("hex")}async function zD(t,e,r,n,s,i){switch(r.t){case"eip191":return await HD(t,e,r.s);case"eip1271":return await WD(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function HD(t,e,r){return(await Y_({hash:Yv(e),signature:r})).toLowerCase()===t.toLowerCase()}async function WD(t,e,r,n,s,i){const o=so(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),d=Yv(e).substring(2),h=a+d+c+u+l,p=await fetch(`${i||qD}/?chainId=${n}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:VD(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:f}=await p.json();return f?f.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function VD(){return Date.now()+Math.floor(Math.random()*1e3)}function GD(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ov.encode(i)}var KD=Object.defineProperty,YD=Object.defineProperties,ZD=Object.getOwnPropertyDescriptors,Um=Object.getOwnPropertySymbols,JD=Object.prototype.hasOwnProperty,QD=Object.prototype.propertyIsEnumerable,Mm=(t,e,r)=>e in t?KD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,XD=(t,e)=>{for(var r in e||(e={}))JD.call(e,r)&&Mm(t,r,e[r]);if(Um)for(var r of Um(e))QD.call(e,r)&&Mm(t,r,e[r]);return t},ek=(t,e)=>YD(t,ZD(e));const tk="did:pkh:",lp=t=>t==null?void 0:t.split(":"),rk=t=>{const e=t&&lp(t);if(e)return t.includes(tk)?e[3]:e[1]},Vh=t=>{const e=t&&lp(t);if(e)return e[2]+":"+e[3]},ju=t=>{const e=t&&lp(t);if(e)return e.pop()};async function Lm(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=Zv(s,s.iss),o=ju(s.iss);return await zD(o,i,n,Vh(s.iss),r)}const Zv=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=ju(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${rk(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,f=bu(t.resources);if(f){const g=qa(f);s=dk(s,g)}return[r,n,"",s,"",i,o,a,c,u,l,d,h,p].filter(g=>g!=null).join(`
`)};function nk(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function sk(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function pi(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function ik(t,e,r,n={}){return r==null||r.sort((s,i)=>s.localeCompare(i)),{att:{[t]:ok(e,r,n)}}}function ok(t,e,r={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function Jv(t){return pi(t),`urn:recap:${nk(t).replace(/=/g,"")}`}function qa(t){const e=sk(t.replace("urn:recap:",""));return pi(e),e}function ak(t,e,r){const n=ik(t,e,r);return Jv(n)}function ck(t){return t&&t.includes("urn:recap:")}function uk(t,e){const r=qa(t),n=qa(e),s=lk(r,n);return Jv(s)}function lk(t,e){pi(t),pi(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=ek(XD({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function dk(t="",e){pi(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function Bm(t){var e;const r=qa(t);pi(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function Fm(t){const e=qa(t);pi(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function bu(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return ck(e)?e:void 0}function Ad(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Qv(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wr(t,...e){if(!Qv(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hk(t,e){wr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function qm(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const As=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),fk=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),pk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pk)throw new Error("Non little-endian hardware is not supported");function gk(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Gh(t){if(typeof t=="string")t=gk(t);else if(Qv(t))t=Kh(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function mk(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function yk(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const wk=(t,e)=>{function r(n,...s){if(wr(n),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?wr(u):wr(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&wr(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");wr(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,wr(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(wr(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function zm(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!bk(e))throw new Error("invalid output, must be aligned");return e}function Hm(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function bk(t){return t.byteOffset%4===0}function Kh(t){return Uint8Array.from(t)}function Co(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Xv=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),vk=Xv("expand 16-byte k"),Ek=Xv("expand 32-byte k"),_k=As(vk),Ck=As(Ek);function Re(t,e){return t<<e|t>>>32-e}function Yh(t){return t.byteOffset%4===0}const tu=64,Ak=16,eE=2**32-1,Wm=new Uint32Array;function Ik(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(tu),l=As(u),d=Yh(s)&&Yh(i),h=d?As(s):Wm,p=d?As(i):Wm;for(let f=0;f<c;o++){if(t(e,r,n,l,o,a),o>=eE)throw new Error("arx: counter overflow");const g=Math.min(tu,c-f);if(d&&g===tu){const m=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let w=0,b;w<Ak;w++)b=m+w,p[b]=h[b]^l[w];f+=tu;continue}for(let m=0,w;m<g;m++)w=f+m,i[w]=s[w]^u[m];f+=g}}function Sk(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=mk({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ad(s),Ad(o),qm(i),qm(r),(a,c,u,l,d=0)=>{wr(a),wr(c),wr(u);const h=u.length;if(l===void 0&&(l=new Uint8Array(h)),wr(l),Ad(d),d<0||d>=eE)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);const p=[];let f=a.length,g,m;if(f===32)p.push(g=Kh(a)),m=Ck;else if(f===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),m=_k,p.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${f}`);Yh(c)||p.push(c=Kh(c));const w=As(g);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(m,w,As(c.subarray(0,16)),w),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const C=new Uint8Array(12);C.set(c,i?0:12-c.length),c=C,p.push(c)}const v=As(c);return Ik(t,m,w,v,u,l,d,o),Co(...p),l}}const Pt=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Nk{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Gh(e),wr(e,32);const r=Pt(e,0),n=Pt(e,2),s=Pt(e,4),i=Pt(e,6),o=Pt(e,8),a=Pt(e,10),c=Pt(e,12),u=Pt(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Pt(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],h=o[5],p=o[6],f=o[7],g=o[8],m=o[9],w=Pt(e,r+0),b=Pt(e,r+2),v=Pt(e,r+4),C=Pt(e,r+6),E=Pt(e,r+8),y=Pt(e,r+10),_=Pt(e,r+12),P=Pt(e,r+14);let I=i[0]+(w&8191),x=i[1]+((w>>>13|b<<3)&8191),D=i[2]+((b>>>10|v<<6)&8191),M=i[3]+((v>>>7|C<<9)&8191),B=i[4]+((C>>>4|E<<12)&8191),O=i[5]+(E>>>1&8191),S=i[6]+((E>>>14|y<<2)&8191),N=i[7]+((y>>>11|_<<5)&8191),R=i[8]+((_>>>8|P<<8)&8191),$=i[9]+(P>>>5|s),k=0,U=k+I*a+x*(5*m)+D*(5*g)+M*(5*f)+B*(5*p);k=U>>>13,U&=8191,U+=O*(5*h)+S*(5*d)+N*(5*l)+R*(5*u)+$*(5*c),k+=U>>>13,U&=8191;let W=k+I*c+x*a+D*(5*m)+M*(5*g)+B*(5*f);k=W>>>13,W&=8191,W+=O*(5*p)+S*(5*h)+N*(5*d)+R*(5*l)+$*(5*u),k+=W>>>13,W&=8191;let Y=k+I*u+x*c+D*a+M*(5*m)+B*(5*g);k=Y>>>13,Y&=8191,Y+=O*(5*f)+S*(5*p)+N*(5*h)+R*(5*d)+$*(5*l),k+=Y>>>13,Y&=8191;let ie=k+I*l+x*u+D*c+M*a+B*(5*m);k=ie>>>13,ie&=8191,ie+=O*(5*g)+S*(5*f)+N*(5*p)+R*(5*h)+$*(5*d),k+=ie>>>13,ie&=8191;let K=k+I*d+x*l+D*u+M*c+B*a;k=K>>>13,K&=8191,K+=O*(5*m)+S*(5*g)+N*(5*f)+R*(5*p)+$*(5*h),k+=K>>>13,K&=8191;let ae=k+I*h+x*d+D*l+M*u+B*c;k=ae>>>13,ae&=8191,ae+=O*a+S*(5*m)+N*(5*g)+R*(5*f)+$*(5*p),k+=ae>>>13,ae&=8191;let ye=k+I*p+x*h+D*d+M*l+B*u;k=ye>>>13,ye&=8191,ye+=O*c+S*a+N*(5*m)+R*(5*g)+$*(5*f),k+=ye>>>13,ye&=8191;let Ke=k+I*f+x*p+D*h+M*d+B*l;k=Ke>>>13,Ke&=8191,Ke+=O*u+S*c+N*a+R*(5*m)+$*(5*g),k+=Ke>>>13,Ke&=8191;let Be=k+I*g+x*f+D*p+M*h+B*d;k=Be>>>13,Be&=8191,Be+=O*l+S*u+N*c+R*a+$*(5*m),k+=Be>>>13,Be&=8191;let Te=k+I*m+x*g+D*f+M*p+B*h;k=Te>>>13,Te&=8191,Te+=O*d+S*l+N*u+R*c+$*a,k+=Te>>>13,Te&=8191,k=(k<<2)+k|0,k=k+U|0,U=k&8191,k=k>>>13,W+=k,i[0]=U,i[1]=W,i[2]=Y,i[3]=ie,i[4]=K,i[5]=ae,i[6]=ye,i[7]=Ke,i[8]=Be,i[9]=Te}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Co(n)}update(e){jm(this);const{buffer:r,blockLen:n}=this;e=Gh(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Co(this.h,this.r,this.buffer,this.pad)}digestInto(e){jm(this),hk(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Pk(t){const e=(n,s)=>t(s).update(Gh(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Tk=Pk(t=>new Nk(t));function xk(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],h=e[2],p=e[3],f=e[4],g=e[5],m=e[6],w=e[7],b=s,v=r[0],C=r[1],E=r[2],y=o,_=a,P=c,I=u,x=l,D=d,M=h,B=p,O=f,S=g,N=m,R=w,$=b,k=v,U=C,W=E;for(let ie=0;ie<i;ie+=2)y=y+x|0,$=Re($^y,16),O=O+$|0,x=Re(x^O,12),y=y+x|0,$=Re($^y,8),O=O+$|0,x=Re(x^O,7),_=_+D|0,k=Re(k^_,16),S=S+k|0,D=Re(D^S,12),_=_+D|0,k=Re(k^_,8),S=S+k|0,D=Re(D^S,7),P=P+M|0,U=Re(U^P,16),N=N+U|0,M=Re(M^N,12),P=P+M|0,U=Re(U^P,8),N=N+U|0,M=Re(M^N,7),I=I+B|0,W=Re(W^I,16),R=R+W|0,B=Re(B^R,12),I=I+B|0,W=Re(W^I,8),R=R+W|0,B=Re(B^R,7),y=y+D|0,W=Re(W^y,16),N=N+W|0,D=Re(D^N,12),y=y+D|0,W=Re(W^y,8),N=N+W|0,D=Re(D^N,7),_=_+M|0,$=Re($^_,16),R=R+$|0,M=Re(M^R,12),_=_+M|0,$=Re($^_,8),R=R+$|0,M=Re(M^R,7),P=P+B|0,k=Re(k^P,16),O=O+k|0,B=Re(B^O,12),P=P+B|0,k=Re(k^P,8),O=O+k|0,B=Re(B^O,7),I=I+x|0,U=Re(U^I,16),S=S+U|0,x=Re(x^S,12),I=I+x|0,U=Re(U^I,8),S=S+U|0,x=Re(x^S,7);let Y=0;n[Y++]=o+y|0,n[Y++]=a+_|0,n[Y++]=c+P|0,n[Y++]=u+I|0,n[Y++]=l+x|0,n[Y++]=d+D|0,n[Y++]=h+M|0,n[Y++]=p+B|0,n[Y++]=f+O|0,n[Y++]=g+S|0,n[Y++]=m+N|0,n[Y++]=w+R|0,n[Y++]=b+$|0,n[Y++]=v+k|0,n[Y++]=C+U|0,n[Y++]=E+W|0}const Ok=Sk(xk,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Rk=new Uint8Array(16),Vm=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Rk.subarray(r))},Dk=new Uint8Array(32);function Gm(t,e,r,n,s){const i=t(e,r,Dk),o=Tk.create(i);s&&Vm(o,s),Vm(o,n);const a=new Uint8Array(16),c=fk(a);Hm(c,0,BigInt(s?s.length:0),!0),Hm(c,8,BigInt(n.length),!0),o.update(a);const u=o.digest();return Co(i,a),u}const kk=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=zm(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=Gm(t,e,r,a,n);return i.set(c,o),Co(c),i},decrypt(s,i){i=zm(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Gm(t,e,r,o,n);if(!yk(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),Co(c),i}}),tE=wk({blockSize:64,nonceLength:12,tagLength:16},kk(Ok));let rE=class extends up{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,cp(e);const n=_o(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Eo(this),this.iHash.update(e),this}digestInto(e){Eo(this),xc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const _l=(t,e,r)=>new rE(t,e).update(r).digest();_l.create=(t,e)=>new rE(t,e);function $k(t,e,r){return cp(t),r===void 0&&(r=new Uint8Array(t.outputLen)),_l(t,_o(r),_o(e))}const Id=new Uint8Array([0]),Km=new Uint8Array;function Uk(t,e,r,n=32){if(cp(t),ja(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/t.outputLen);r===void 0&&(r=Km);const i=new Uint8Array(s*t.outputLen),o=_l.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<s;u++)Id[0]=u+1,a.update(u===0?Km:c).update(r).update(Id).digestInto(c),i.set(c,t.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Id.fill(0),i.slice(0,n)}const Mk=(t,e,r,n,s)=>Uk(t,$k(t,e,r),n,s);function Lk(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function Bk(t,e,r){return t&e^~t&r}function Fk(t,e,r){return t&e^t&r^e&r}let jk=class extends up{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Cd(this.buffer)}update(e){Eo(this);const{view:r,buffer:n,blockLen:s}=this;e=_o(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Cd(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Eo(this),zv(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Lk(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Cd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const qk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),os=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),as=new Uint32Array(64);class zk extends jk{constructor(){super(64,32,8,!1),this.A=os[0]|0,this.B=os[1]|0,this.C=os[2]|0,this.D=os[3]|0,this.E=os[4]|0,this.F=os[5]|0,this.G=os[6]|0,this.H=os[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)as[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=as[d-15],p=as[d-2],f=cn(h,7)^cn(h,18)^h>>>3,g=cn(p,17)^cn(p,19)^p>>>10;as[d]=g+as[d-7]+f+as[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=cn(a,6)^cn(a,11)^cn(a,25),p=l+h+Bk(a,c,u)+qk[d]+as[d]|0,f=(cn(n,2)^cn(n,13)^cn(n,22))+Fk(n,s,i)|0;l=u,u=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+f|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){as.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Oc=Hv(()=>new zk);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cl=BigInt(0),Al=BigInt(1),Hk=BigInt(2);function gi(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rc(t){if(!gi(t))throw new Error("Uint8Array expected")}function Ao(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Wk=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Io(t){Rc(t);let e="";for(let r=0;r<t.length;r++)e+=Wk[t[r]];return e}function to(t){const e=t.toString(16);return e.length&1?"0"+e:e}function dp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Cl:BigInt("0x"+t)}const Dn={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ym(t){if(t>=Dn._0&&t<=Dn._9)return t-Dn._0;if(t>=Dn.A&&t<=Dn.F)return t-(Dn.A-10);if(t>=Dn.a&&t<=Dn.f)return t-(Dn.a-10)}function So(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=Ym(t.charCodeAt(i)),a=Ym(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function si(t){return dp(Io(t))}function za(t){return Rc(t),dp(Io(Uint8Array.from(t).reverse()))}function No(t,e){return So(t.toString(16).padStart(e*2,"0"))}function Il(t,e){return No(t,e).reverse()}function Vk(t){return So(to(t))}function yr(t,e,r){let n;if(typeof e=="string")try{n=So(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(gi(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function Ha(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Rc(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}function Gk(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Kk(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Sd=t=>typeof t=="bigint"&&Cl<=t;function Sl(t,e,r){return Sd(t)&&Sd(e)&&Sd(r)&&e<=t&&t<r}function Hn(t,e,r,n){if(!Sl(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function nE(t){let e;for(e=0;t>Cl;t>>=Al,e+=1);return e}function Yk(t,e){return t>>BigInt(e)&Al}function Zk(t,e,r){return t|(r?Al:Cl)<<BigInt(e)}const hp=t=>(Hk<<BigInt(t-1))-Al,Nd=t=>new Uint8Array(t),Zm=t=>Uint8Array.from(t);function sE(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Nd(t),s=Nd(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...l)=>r(s,n,...l),c=(l=Nd())=>{s=a(Zm([0]),l),n=a(),l.length!==0&&(s=a(Zm([1]),l),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<e;){n=a();const h=n.slice();d.push(h),l+=n.length}return Ha(...d)};return(l,d)=>{o(),c(l);let h;for(;!(h=d(u()));)c();return o(),h}}const Jk={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||gi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jo(t,e,r={}){const n=(s,i,o)=>{const a=Jk[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const Qk=()=>{throw new Error("not implemented")};function Zh(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}var Xk=Object.freeze({__proto__:null,isBytes:gi,abytes:Rc,abool:Ao,bytesToHex:Io,numberToHexUnpadded:to,hexToNumber:dp,hexToBytes:So,bytesToNumberBE:si,bytesToNumberLE:za,numberToBytesBE:No,numberToBytesLE:Il,numberToVarBytesBE:Vk,ensureBytes:yr,concatBytes:Ha,equalBytes:Gk,utf8ToBytes:Kk,inRange:Sl,aInRange:Hn,bitLen:nE,bitGet:Yk,bitSet:Zk,bitMask:hp,createHmacDrbg:sE,validateObject:jo,notImplemented:Qk,memoized:Zh});const It=BigInt(0),ct=BigInt(1),Vs=BigInt(2),e$=BigInt(3),Jh=BigInt(4),Jm=BigInt(5),Qm=BigInt(8);function ur(t,e){const r=t%e;return r>=It?r:e+r}function iE(t,e,r){if(e<It)throw new Error("invalid exponent, negatives unsupported");if(r<=It)throw new Error("invalid modulus");if(r===ct)return It;let n=ct;for(;e>It;)e&ct&&(n=n*t%r),t=t*t%r,e>>=ct;return n}function Wr(t,e,r){let n=t;for(;e-- >It;)n*=n,n%=r;return n}function Qh(t,e){if(t===It)throw new Error("invert: expected non-zero number");if(e<=It)throw new Error("invert: expected positive modulus, got "+e);let r=ur(t,e),n=e,s=It,i=ct;for(;r!==It;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==ct)throw new Error("invert: does not exist");return ur(s,e)}function t$(t){const e=(t-ct)/Vs;let r,n,s;for(r=t-ct,n=0;r%Vs===It;r/=Vs,n++);for(s=Vs;s<t&&iE(s,e,t)!==t-ct;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+ct)/Jh;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+ct)/Vs;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let f=o.sqr(d);h<c&&!o.eql(f,o.ONE);h++)f=o.sqr(f);const p=o.pow(u,ct<<BigInt(c-h-1));u=o.sqr(p),l=o.mul(l,p),d=o.mul(d,u),c=h}return l}}function r$(t){if(t%Jh===e$){const e=(t+ct)/Jh;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%Qm===Jm){const e=(t-Jm)/Qm;return function(r,n){const s=r.mul(n,Vs),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,Vs),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return t$(t)}const n$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function s$(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=n$.reduce((n,s)=>(n[s]="function",n),e);return jo(t,r)}function i$(t,e,r){if(r<It)throw new Error("invalid exponent, negatives unsupported");if(r===It)return t.ONE;if(r===ct)return e;let n=t.ONE,s=e;for(;r>It;)r&ct&&(n=t.mul(n,s)),s=t.sqr(s),r>>=ct;return n}function o$(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function oE(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function aE(t,e,r=!1,n={}){if(t<=It)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=oE(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:hp(s),ZERO:It,ONE:ct,create:c=>ur(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return It<=c&&c<t},is0:c=>c===It,isOdd:c=>(c&ct)===ct,neg:c=>ur(-c,t),eql:(c,u)=>c===u,sqr:c=>ur(c*c,t),add:(c,u)=>ur(c+u,t),sub:(c,u)=>ur(c-u,t),mul:(c,u)=>ur(c*u,t),pow:(c,u)=>i$(a,c,u),div:(c,u)=>ur(c*Qh(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Qh(c,t),sqrt:n.sqrt||(c=>(o||(o=r$(t)),o(a,c))),invertBatch:c=>o$(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?Il(c,i):No(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?za(c):si(c)}});return Object.freeze(a)}function cE(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function uE(t){const e=cE(t);return e+Math.ceil(e/2)}function a$(t,e,r=!1){const n=t.length,s=cE(e),i=uE(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?za(t):si(t),a=ur(o,e-ct)+ct;return r?Il(a,s):No(a,s)}const Xm=BigInt(0),ru=BigInt(1);function Pd(t,e){const r=e.negate();return t?r:e}function lE(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Td(t,e){lE(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function c$(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function u$(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const xd=new WeakMap,dE=new WeakMap;function Od(t){return dE.get(t)||1}function l$(t,e){return{constTimeNegate:Pd,hasPrecomputes(r){return Od(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>Xm;)n&ru&&(s=s.add(i)),i=i.double(),n>>=ru;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=Td(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=Td(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let h=0;h<i;h++){const p=h*o;let f=Number(s&u);s>>=d,f>o&&(f-=l,s+=ru);const g=p,m=p+Math.abs(f)-1,w=h%2!==0,b=f<0;f===0?c=c.add(Pd(w,n[g])):a=a.add(Pd(b,n[m]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=Td(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(s===Xm)break;let p=Number(s&c);if(s>>=l,p>a&&(p-=u,s+=ru),p===0)continue;let f=n[h+Math.abs(p)-1];p<0&&(f=f.negate()),i=i.add(f)}return i},getPrecomputes(r,n,s){let i=xd.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&xd.set(n,s(i))),i},wNAFCached(r,n,s){const i=Od(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=Od(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){lE(n,e),dE.set(r,n),xd.delete(r)}}}function d$(t,e,r,n){if(c$(r,t),u$(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=nE(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let p=0;p<n.length;p++){const f=n[p],g=Number(f>>BigInt(d)&BigInt(a));c[g]=c[g].add(r[p])}let h=s;for(let p=c.length-1,f=s;p>0;p--)f=f.add(c[p]),h=h.add(f);if(l=l.add(h),d!==0)for(let p=0;p<o;p++)l=l.double()}return l}function hE(t){return s$(t.Fp),jo(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...oE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ki=BigInt(0),Rd=BigInt(1);function h$(t){return jo(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function f$(t){const e=h$(t),{P:r}=e,n=b=>ur(b,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>iE(b,r-BigInt(2),r));function u(b,v,C){const E=n(b*(v-C));return v=n(v-E),C=n(C+E),[v,C]}const l=(e.a-BigInt(2))/BigInt(4);function d(b,v){Hn("u",b,ki,r),Hn("scalar",v,ki,r);const C=v,E=b;let y=Rd,_=ki,P=b,I=Rd,x=ki,D;for(let B=BigInt(s-1);B>=ki;B--){const O=C>>B&Rd;x^=O,D=u(x,y,P),y=D[0],P=D[1],D=u(x,_,I),_=D[0],I=D[1],x=O;const S=y+_,N=n(S*S),R=y-_,$=n(R*R),k=N-$,U=P+I,W=P-I,Y=n(W*S),ie=n(U*R),K=Y+ie,ae=Y-ie;P=n(K*K),I=n(E*n(ae*ae)),y=n(N*$),_=n(k*(N+n(l*k)))}D=u(x,y,P),y=D[0],P=D[1],D=u(x,_,I),_=D[0],I=D[1];const M=c(_);return n(y*M)}function h(b){return Il(n(b),i)}function p(b){const v=yr("u coordinate",b,i);return o===32&&(v[31]&=127),za(v)}function f(b){const v=yr("scalar",b),C=v.length;if(C!==i&&C!==o){let E=""+i+" or "+o;throw new Error("invalid scalar, expected "+E+" bytes, got "+C)}return za(a(v))}function g(b,v){const C=p(v),E=f(b),y=d(C,E);if(y===ki)throw new Error("invalid private or public key received");return h(y)}const m=h(e.Gu);function w(b){return g(b,m)}return{scalarMult:g,scalarMultBase:w,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>w(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const Xh=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const p$=BigInt(1),ey=BigInt(2),g$=BigInt(3),m$=BigInt(5);BigInt(8);function y$(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Xh,o=t*t%i*t%i,a=Wr(o,ey,i)*o%i,c=Wr(a,p$,i)*t%i,u=Wr(c,m$,i)*c%i,l=Wr(u,e,i)*u%i,d=Wr(l,r,i)*l%i,h=Wr(d,n,i)*d%i,p=Wr(h,s,i)*h%i,f=Wr(p,s,i)*h%i,g=Wr(f,e,i)*u%i;return{pow_p_5_8:Wr(g,ey,i)*t%i,b2:o}}function w$(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ef=f$({P:Xh,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Xh,{pow_p_5_8:r,b2:n}=y$(t);return ur(Wr(r,g$,e)*n,e)},adjustScalarBytes:w$,randomBytes:Fo});function ty(t){t.lowS!==void 0&&Ao("lowS",t.lowS),t.prehash!==void 0&&Ao("prehash",t.prehash)}function b$(t){const e=hE(t);jo(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:v$,hexToBytes:E$}=Xk;class _$ extends Error{constructor(e=""){super(e)}}const Bn={Err:_$,_tlv:{encode:(t,e)=>{const{Err:r}=Bn;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=to(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?to(s.length/2|128):"";return to(t)+i+s+e},decode(t,e){const{Err:r}=Bn;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Bn;if(t<jn)throw new e("integer: negative integers are not allowed");let r=to(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Bn;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return v$(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Bn,s=typeof t=="string"?E$(t):t;Rc(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Bn,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},jn=BigInt(0),vt=BigInt(1);BigInt(2);const ry=BigInt(3);BigInt(4);function C$(t){const e=b$(t),{Fp:r}=e,n=aE(e.n,e.nBitLength),s=e.toBytes||((g,m,w)=>{const b=m.toAffine();return Ha(Uint8Array.from([4]),r.toBytes(b.x),r.toBytes(b.y))}),i=e.fromBytes||(g=>{const m=g.subarray(1),w=r.fromBytes(m.subarray(0,r.BYTES)),b=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:w,y:b}});function o(g){const{a:m,b:w}=e,b=r.sqr(g),v=r.mul(b,g);return r.add(r.add(v,r.mul(g,m)),w)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return Sl(g,vt,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:w,wrapPrivateKey:b,n:v}=e;if(m&&typeof g!="bigint"){if(gi(g)&&(g=Io(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let C;try{C=typeof g=="bigint"?g:si(yr("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return b&&(C=ur(C,v)),Hn("private key",C,vt,v),C}function u(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const l=Zh((g,m)=>{const{px:w,py:b,pz:v}=g;if(r.eql(v,r.ONE))return{x:w,y:b};const C=g.is0();m==null&&(m=C?r.ONE:r.inv(v));const E=r.mul(w,m),y=r.mul(b,m),_=r.mul(v,m);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(_,r.ONE))throw new Error("invZ was invalid");return{x:E,y}}),d=Zh(g=>{if(g.is0()){if(e.allowInfinityPoint&&!r.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y:w}=g.toAffine();if(!r.isValid(m)||!r.isValid(w))throw new Error("bad point: x or y not FE");const b=r.sqr(w),v=o(m);if(!r.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,w,b){if(this.px=m,this.py=w,this.pz=b,m==null||!r.isValid(m))throw new Error("x required");if(w==null||!r.isValid(w))throw new Error("y required");if(b==null||!r.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:w,y:b}=m||{};if(!m||!r.isValid(w)||!r.isValid(b))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const v=C=>r.eql(C,r.ZERO);return v(w)&&v(b)?h.ZERO:new h(w,b,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const w=r.invertBatch(m.map(b=>b.pz));return m.map((b,v)=>b.toAffine(w[v])).map(h.fromAffine)}static fromHex(m){const w=h.fromAffine(i(yr("pointHex",m)));return w.assertValidity(),w}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,w){return d$(h,n,m,w)}_setWindowSize(m){f.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){u(m);const{px:w,py:b,pz:v}=this,{px:C,py:E,pz:y}=m,_=r.eql(r.mul(w,y),r.mul(C,v)),P=r.eql(r.mul(b,y),r.mul(E,v));return _&&P}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:w}=e,b=r.mul(w,ry),{px:v,py:C,pz:E}=this;let y=r.ZERO,_=r.ZERO,P=r.ZERO,I=r.mul(v,v),x=r.mul(C,C),D=r.mul(E,E),M=r.mul(v,C);return M=r.add(M,M),P=r.mul(v,E),P=r.add(P,P),y=r.mul(m,P),_=r.mul(b,D),_=r.add(y,_),y=r.sub(x,_),_=r.add(x,_),_=r.mul(y,_),y=r.mul(M,y),P=r.mul(b,P),D=r.mul(m,D),M=r.sub(I,D),M=r.mul(m,M),M=r.add(M,P),P=r.add(I,I),I=r.add(P,I),I=r.add(I,D),I=r.mul(I,M),_=r.add(_,I),D=r.mul(C,E),D=r.add(D,D),I=r.mul(D,M),y=r.sub(y,I),P=r.mul(D,x),P=r.add(P,P),P=r.add(P,P),new h(y,_,P)}add(m){u(m);const{px:w,py:b,pz:v}=this,{px:C,py:E,pz:y}=m;let _=r.ZERO,P=r.ZERO,I=r.ZERO;const x=e.a,D=r.mul(e.b,ry);let M=r.mul(w,C),B=r.mul(b,E),O=r.mul(v,y),S=r.add(w,b),N=r.add(C,E);S=r.mul(S,N),N=r.add(M,B),S=r.sub(S,N),N=r.add(w,v);let R=r.add(C,y);return N=r.mul(N,R),R=r.add(M,O),N=r.sub(N,R),R=r.add(b,v),_=r.add(E,y),R=r.mul(R,_),_=r.add(B,O),R=r.sub(R,_),I=r.mul(x,N),_=r.mul(D,O),I=r.add(_,I),_=r.sub(B,I),I=r.add(B,I),P=r.mul(_,I),B=r.add(M,M),B=r.add(B,M),O=r.mul(x,O),N=r.mul(D,N),B=r.add(B,O),O=r.sub(M,O),O=r.mul(x,O),N=r.add(N,O),M=r.mul(B,N),P=r.add(P,M),M=r.mul(R,N),_=r.mul(S,_),_=r.sub(_,M),M=r.mul(S,B),I=r.mul(R,I),I=r.add(I,M),new h(_,P,I)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return f.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:w,n:b}=e;Hn("scalar",m,jn,b);const v=h.ZERO;if(m===jn)return v;if(this.is0()||m===vt)return this;if(!w||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:C,k1:E,k2neg:y,k2:_}=w.splitScalar(m),P=v,I=v,x=this;for(;E>jn||_>jn;)E&vt&&(P=P.add(x)),_&vt&&(I=I.add(x)),x=x.double(),E>>=vt,_>>=vt;return C&&(P=P.negate()),y&&(I=I.negate()),I=new h(r.mul(I.px,w.beta),I.py,I.pz),P.add(I)}multiply(m){const{endo:w,n:b}=e;Hn("scalar",m,vt,b);let v,C;if(w){const{k1neg:E,k1:y,k2neg:_,k2:P}=w.splitScalar(m);let{p:I,f:x}=this.wNAF(y),{p:D,f:M}=this.wNAF(P);I=f.constTimeNegate(E,I),D=f.constTimeNegate(_,D),D=new h(r.mul(D.px,w.beta),D.py,D.pz),v=I.add(D),C=x.add(M)}else{const{p:E,f:y}=this.wNAF(m);v=E,C=y}return h.normalizeZ([v,C])[0]}multiplyAndAddUnsafe(m,w,b){const v=h.BASE,C=(y,_)=>_===jn||_===vt||!y.equals(v)?y.multiplyUnsafe(_):y.multiply(_),E=C(this,w).add(C(m,b));return E.is0()?void 0:E}toAffine(m){return l(this,m)}isTorsionFree(){const{h:m,isTorsionFree:w}=e;if(m===vt)return!0;if(w)return w(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:w}=e;return m===vt?this:w?w(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Ao("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return Ao("isCompressed",m),Io(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const p=e.nBitLength,f=l$(h,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function A$(t){const e=hE(t);return jo(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function I$(t){const e=A$(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(O){return ur(O,n)}function a(O){return Qh(O,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=C$({...e,toBytes(O,S,N){const R=S.toAffine(),$=r.toBytes(R.x),k=Ha;return Ao("isCompressed",N),N?k(Uint8Array.from([S.hasEvenY()?2:3]),$):k(Uint8Array.from([4]),$,r.toBytes(R.y))},fromBytes(O){const S=O.length,N=O[0],R=O.subarray(1);if(S===s&&(N===2||N===3)){const $=si(R);if(!Sl($,vt,r.ORDER))throw new Error("Point is not on curve");const k=l($);let U;try{U=r.sqrt(k)}catch(Y){const ie=Y instanceof Error?": "+Y.message:"";throw new Error("Point is not on curve"+ie)}const W=(U&vt)===vt;return(N&1)===1!==W&&(U=r.neg(U)),{x:$,y:U}}else if(S===i&&N===4){const $=r.fromBytes(R.subarray(0,r.BYTES)),k=r.fromBytes(R.subarray(r.BYTES,2*r.BYTES));return{x:$,y:k}}else{const $=s,k=i;throw new Error("invalid Point, expected length of "+$+", or uncompressed "+k+", got "+S)}}}),h=O=>Io(No(O,e.nByteLength));function p(O){const S=n>>vt;return O>S}function f(O){return p(O)?o(-O):O}const g=(O,S,N)=>si(O.slice(S,N));class m{constructor(S,N,R){this.r=S,this.s=N,this.recovery=R,this.assertValidity()}static fromCompact(S){const N=e.nByteLength;return S=yr("compactSignature",S,N*2),new m(g(S,0,N),g(S,N,2*N))}static fromDER(S){const{r:N,s:R}=Bn.toSig(yr("DER",S));return new m(N,R)}assertValidity(){Hn("r",this.r,vt,n),Hn("s",this.s,vt,n)}addRecoveryBit(S){return new m(this.r,this.s,S)}recoverPublicKey(S){const{r:N,s:R,recovery:$}=this,k=y(yr("msgHash",S));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");const U=$===2||$===3?N+e.n:N;if(U>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=($&1)===0?"02":"03",Y=c.fromHex(W+h(U)),ie=a(U),K=o(-k*ie),ae=o(R*ie),ye=c.BASE.multiplyAndAddUnsafe(Y,K,ae);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return So(this.toDERHex())}toDERHex(){return Bn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return So(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey(O){try{return u(O),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const O=uE(e.n);return a$(e.randomBytes(O),e.n)},precompute(O=8,S=c.BASE){return S._setWindowSize(O),S.multiply(BigInt(3)),S}};function b(O,S=!0){return c.fromPrivateKey(O).toRawBytes(S)}function v(O){const S=gi(O),N=typeof O=="string",R=(S||N)&&O.length;return S?R===s||R===i:N?R===2*s||R===2*i:O instanceof c}function C(O,S,N=!0){if(v(O))throw new Error("first arg must be private key");if(!v(S))throw new Error("second arg must be public key");return c.fromHex(S).multiply(u(O)).toRawBytes(N)}const E=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const S=si(O),N=O.length*8-e.nBitLength;return N>0?S>>BigInt(N):S},y=e.bits2int_modN||function(O){return o(E(O))},_=hp(e.nBitLength);function P(O){return Hn("num < 2^"+e.nBitLength,O,jn,_),No(O,e.nByteLength)}function I(O,S,N=x){if(["recovered","canonical"].some(Be=>Be in N))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:$}=e;let{lowS:k,prehash:U,extraEntropy:W}=N;k==null&&(k=!0),O=yr("msgHash",O),ty(N),U&&(O=yr("prehashed msgHash",R(O)));const Y=y(O),ie=u(S),K=[P(ie),P(Y)];if(W!=null&&W!==!1){const Be=W===!0?$(r.BYTES):W;K.push(yr("extraEntropy",Be))}const ae=Ha(...K),ye=Y;function Ke(Be){const Te=E(Be);if(!d(Te))return;const Mt=a(Te),Nt=c.BASE.multiply(Te).toAffine(),Ht=o(Nt.x);if(Ht===jn)return;const _r=o(Mt*o(ye+Ht*ie));if(_r===jn)return;let Cr=(Nt.x===Ht?0:2)|Number(Nt.y&vt),Ti=_r;return k&&p(_r)&&(Ti=f(_r),Cr^=1),new m(Ht,Ti,Cr)}return{seed:ae,k2sig:Ke}}const x={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function M(O,S,N=x){const{seed:R,k2sig:$}=I(O,S,N),k=e;return sE(k.hash.outputLen,k.nByteLength,k.hmac)(R,$)}c.BASE._setWindowSize(8);function B(O,S,N,R=D){var _r;const $=O;S=yr("msgHash",S),N=yr("publicKey",N);const{lowS:k,prehash:U,format:W}=R;if(ty(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(W!==void 0&&W!=="compact"&&W!=="der")throw new Error("format must be compact or der");const Y=typeof $=="string"||gi($),ie=!Y&&!W&&typeof $=="object"&&$!==null&&typeof $.r=="bigint"&&typeof $.s=="bigint";if(!Y&&!ie)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ae;try{if(ie&&(K=new m($.r,$.s)),Y){try{W!=="compact"&&(K=m.fromDER($))}catch(Cr){if(!(Cr instanceof Bn.Err))throw Cr}!K&&W!=="der"&&(K=m.fromCompact($))}ae=c.fromHex(N)}catch{return!1}if(!K||k&&K.hasHighS())return!1;U&&(S=e.hash(S));const{r:ye,s:Ke}=K,Be=y(S),Te=a(Ke),Mt=o(Be*Te),Nt=o(ye*Te),Ht=(_r=c.BASE.multiplyAndAddUnsafe(ae,Mt,Nt))==null?void 0:_r.toAffine();return Ht?o(Ht.x)===ye:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:C,sign:M,verify:B,ProjectivePoint:c,Signature:m,utils:w}}function S$(t){return{hash:t,hmac:(e,...r)=>_l(t,e,xD(...r)),randomBytes:Fo}}function N$(t,e){const r=n=>I$({...t,...S$(n)});return{...r(e),create:r}}const fE=aE(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),P$=fE.create(BigInt("-3")),T$=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),x$=N$({a:P$,b:T$,Fp:fE,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Oc),pE="base10",Zt="base16",Qr="base64pad",hs="base64url",Dc="utf8",gE=0,Wn=1,kc=2,O$=0,ny=1,va=12,fp=32;function R$(){const t=ef.utils.randomPrivateKey(),e=ef.getPublicKey(t);return{privateKey:dr(t,Zt),publicKey:dr(e,Zt)}}function tf(){const t=Fo(fp);return dr(t,Zt)}function D$(t,e){const r=ef.getSharedSecret(Dr(t,Zt),Dr(e,Zt)),n=Mk(Oc,r,void 0,void 0,fp);return dr(n,Zt)}function vu(t){const e=Oc(Dr(t,Zt));return dr(e,Zt)}function wn(t){const e=Oc(Dr(t,Dc));return dr(e,Zt)}function mE(t){return Dr(`${t}`,pE)}function mi(t){return Number(dr(t,pE))}function yE(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function wE(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function k$(t){const e=mE(typeof t.type<"u"?t.type:gE);if(mi(e)===Wn&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Dr(t.senderPublicKey,Zt):void 0,n=typeof t.iv<"u"?Dr(t.iv,Zt):Fo(va),s=Dr(t.symKey,Zt),i=tE(s,n).encrypt(Dr(t.message,Dc)),o=bE({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===hs?yE(o):o}function $$(t){const e=Dr(t.symKey,Zt),{sealed:r,iv:n}=Wa({encoded:t.encoded,encoding:t.encoding}),s=tE(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return dr(s,Dc)}function U$(t,e){const r=mE(kc),n=Fo(va),s=Dr(t,Dc),i=bE({type:r,sealed:s,iv:n});return e===hs?yE(i):i}function M$(t,e){const{sealed:r}=Wa({encoded:t,encoding:e});return dr(r,Dc)}function bE(t){if(mi(t.type)===kc)return dr(ba([t.type,t.sealed]),Qr);if(mi(t.type)===Wn){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return dr(ba([t.type,t.senderPublicKey,t.iv,t.sealed]),Qr)}return dr(ba([t.type,t.iv,t.sealed]),Qr)}function Wa(t){const e=(t.encoding||Qr)===hs?wE(t.encoded):t.encoded,r=Dr(e,Qr),n=r.slice(O$,ny),s=ny;if(mi(n)===Wn){const c=s+fp,u=c+va,l=r.slice(s,c),d=r.slice(c,u),h=r.slice(u);return{type:n,sealed:h,iv:d,senderPublicKey:l}}if(mi(n)===kc){const c=r.slice(s),u=Fo(va);return{type:n,sealed:c,iv:u}}const i=s+va,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function L$(t,e){const r=Wa({encoded:t,encoding:e==null?void 0:e.encoding});return vE({type:mi(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?dr(r.senderPublicKey,Zt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function vE(t){const e=(t==null?void 0:t.type)||gE;if(e===Wn){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function sy(t){return t.type===Wn&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function iy(t){return t.type===kc}function B$(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return ba([new Uint8Array([4]),e,r])}function F$(t,e){const[r,n,s]=t.split("."),i=Buffer.from(wE(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=Oc(c),l=B$(e);if(!x$.verify(ba([o,a]),u,l))throw new Error("Invalid signature");return zh(t).payload}const j$="irn";function qu(t){return(t==null?void 0:t.relay)||{protocol:j$}}function pa(t){const e=V3[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function q$(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function oy(t){if(!t.includes("wc:")){const u=qv(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:z$(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:q$(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function z$(t){return t.startsWith("//")?t.substring(2):t}function H$(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function ay(t){const e=new URLSearchParams,r=H$(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function nu(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function qo(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function W$(t){const e=[];return Object.values(t).forEach(r=>{e.push(...qo(r.accounts))}),e}function V$(t,e){const r=[];return Object.values(t).forEach(n=>{qo(n.accounts).includes(e)&&r.push(...n.methods)}),r}function G$(t,e){const r=[];return Object.values(t).forEach(n=>{qo(n.accounts).includes(e)&&r.push(...n.events)}),r}function pp(t){return t.includes(":")}function ga(t){return pp(t)?t.split(":")[0]:t}function K$(t){const e={};return t==null||t.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function cy(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=K$(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=wu(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}const Y$={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Z$={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function G(t,e){const{message:r,code:n}=Z$[t];return{message:e?`${r} ${e}`:r,code:n}}function ze(t,e){const{message:r,code:n}=Y$[t];return{message:e?`${r} ${e}`:r,code:n}}function Is(t,e){return!!Array.isArray(t)}function Va(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Rt(t){return typeof t>"u"}function dt(t,e){return e&&Rt(t)?!0:typeof t=="string"&&!!t.trim().length}function gp(t,e){return e&&Rt(t)?!0:typeof t=="number"&&!isNaN(t)}function J$(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return Ys(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=qo(a),d=r[o];(!Ys(Mv(o,d),l)||!Ys(d.methods,c)||!Ys(d.events,u))&&(i=!1)}),i):!1}function zu(t){return dt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Q$(t){if(dt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&zu(r)}}return!1}function X$(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(dt(t,!1)){if(e(t))return!0;const r=qv(t);return e(r)}}catch{}return!1}function e5(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function t5(t){return t==null?void 0:t.topic}function r5(t,e){let r=null;return dt(t==null?void 0:t.publicKey,!1)||(r=G("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function uy(t){let e=!0;return Is(t)?t.length&&(e=t.every(r=>dt(r,!1))):e=!1,e}function n5(t,e,r){let n=null;return Is(e)&&e.length?e.forEach(s=>{n||zu(s)||(n=ze("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):zu(t)||(n=ze("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function s5(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=n5(s,Mv(s,i),`${e} ${r}`);o&&(n=o)}),n}function i5(t,e){let r=null;return Is(t)?t.forEach(n=>{r||Q$(n)||(r=ze("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=ze("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function o5(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=i5(n==null?void 0:n.accounts,`${e} namespace`);s&&(r=s)}),r}function a5(t,e){let r=null;return uy(t==null?void 0:t.methods)?uy(t==null?void 0:t.events)||(r=ze("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ze("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function EE(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=a5(n,`${e}, namespace`);s&&(r=s)}),r}function c5(t,e,r){let n=null;if(t&&Va(t)){const s=EE(t,e);s&&(n=s);const i=s5(t,e,r);i&&(n=i)}else n=G("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Dd(t,e){let r=null;if(t&&Va(t)){const n=EE(t,e);n&&(r=n);const s=o5(t,e);s&&(r=s)}else r=G("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function _E(t){return dt(t.protocol,!0)}function u5(t,e){let r=!1;return t?t&&Is(t)&&t.length&&t.forEach(n=>{r=_E(n)}):r=!0,r}function l5(t){return typeof t=="number"}function ar(t){return typeof t<"u"&&typeof t!==null}function d5(t){return!(!t||typeof t!="object"||!t.code||!gp(t.code,!1)||!t.message||!dt(t.message,!1))}function h5(t){return!(Rt(t)||!dt(t.method,!1))}function f5(t){return!(Rt(t)||Rt(t.result)&&Rt(t.error)||!gp(t.id,!1)||!dt(t.jsonrpc,!1))}function p5(t){return!(Rt(t)||!dt(t.name,!1))}function ly(t,e){return!(!zu(e)||!W$(t).includes(e))}function g5(t,e,r){return dt(r,!1)?V$(t,e).includes(r):!1}function m5(t,e,r){return dt(r,!1)?G$(t,e).includes(r):!1}function dy(t,e,r){let n=null;const s=y5(t),i=w5(e),o=Object.keys(s),a=Object.keys(i),c=hy(Object.keys(t)),u=hy(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),Ys(o,a)||(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const h=qo(e[d].accounts);h.includes(d)||(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{n||(Ys(s[d].methods,i[d].methods)?Ys(s[d].events,i[d].events)||(n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=G("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function y5(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function hy(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function w5(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=qo(t[r].accounts);n==null||n.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function b5(t,e){return gp(t,!1)&&t<=e.max&&t>=e.min}function fy(){const t=Tc();return new Promise(e=>{switch(t){case vr.browser:e(v5());break;case vr.reactNative:e(E5());break;case vr.node:e(_5());break;default:e(!0)}})}function v5(){return Pc()&&(navigator==null?void 0:navigator.onLine)}async function E5(){if($s()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function _5(){return!0}function C5(t){switch(Tc()){case vr.browser:A5(t);break;case vr.reactNative:I5(t);break}}function A5(t){!$s()&&Pc()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function I5(t){$s()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const kd={};class na{static get(e){return kd[e]}static set(e,r){kd[e]=r}static delete(e){delete kd[e]}}const S5="PARSE_ERROR",N5="INVALID_REQUEST",P5="METHOD_NOT_FOUND",T5="INVALID_PARAMS",CE="INTERNAL_ERROR",mp="SERVER_ERROR",x5=[-32700,-32600,-32601,-32602,-32603],Ea={[S5]:{code:-32700,message:"Parse error"},[N5]:{code:-32600,message:"Invalid Request"},[P5]:{code:-32601,message:"Method not found"},[T5]:{code:-32602,message:"Invalid params"},[CE]:{code:-32603,message:"Internal error"},[mp]:{code:-32e3,message:"Server error"}},AE=mp;function O5(t){return x5.includes(t)}function py(t){return Object.keys(Ea).includes(t)?Ea[t]:Ea[AE]}function R5(t){const e=Object.values(Ea).find(r=>r.code===t);return e||Ea[AE]}function IE(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var $d={},kn={},gy;function D5(){if(gy)return kn;gy=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.isBrowserCryptoAvailable=kn.getSubtleCrypto=kn.getBrowerCrypto=void 0;function t(){return(yn==null?void 0:yn.crypto)||(yn==null?void 0:yn.msCrypto)||{}}kn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}kn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return kn.isBrowserCryptoAvailable=r,kn}var $n={},my;function k5(){if(my)return $n;my=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.isBrowser=$n.isNode=$n.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}$n.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}$n.isNode=e;function r(){return!t()&&!e()}return $n.isBrowser=r,$n}var yy;function $5(){return yy||(yy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=_c;e.__exportStar(D5(),t),e.__exportStar(k5(),t)}($d)),$d}var U5=$5();function hn(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Zs(t=6){return BigInt(hn(t))}function Es(t,e,r){return{id:r||hn(),jsonrpc:"2.0",method:t,params:e}}function Nl(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Pl(t,e,r){return{id:t,jsonrpc:"2.0",error:M5(e)}}function M5(t,e){return typeof t>"u"?py(CE):(typeof t=="string"&&(t=Object.assign(Object.assign({},py(mp)),{message:t})),O5(t.code)&&(t=R5(t.code)),t)}let L5=class{},B5=class extends L5{constructor(){super()}},F5=class extends B5{constructor(e){super()}};const j5="^https?:",q5="^wss?:";function z5(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function SE(t,e){const r=z5(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function wy(t){return SE(t,j5)}function by(t){return SE(t,q5)}function H5(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function NE(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function yp(t){return NE(t)&&"method"in t}function Tl(t){return NE(t)&&(fn(t)||Rr(t))}function fn(t){return"result"in t}function Rr(t){return"error"in t}let Br=class extends F5{constructor(e){super(e),this.events=new Lr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Es(e.method,e.params||[],e.id||Zs().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Rr(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Tl(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const W5=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),V5=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",vy=t=>t.split("?")[0],Ey=10,G5=W5();let K5=class{constructor(e){if(this.url=e,this.events=new Lr.EventEmitter,this.registering=!1,!by(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Yn(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!by(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=U5.isReactNative()?void 0:{rejectUnauthorized:!H5(e)},i=new G5(e,[],s);V5()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?hi(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Pl(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return IE(e,vy(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ey&&this.events.setMaxListeners(Ey)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${vy(this.url)}`));return this.events.emit("register_error",r),r}};var Y5={};const PE="wc",TE=2,rf="core",Cn=`${PE}@2:${rf}:`,Z5={logger:"error"},J5={database:":memory:"},Q5="crypto",_y="client_ed25519_seed",X5=V.ONE_DAY,e8="keychain",t8="0.3",r8="messages",n8="0.3",Cy=V.SIX_HOURS,s8="publisher",xE="irn",i8="error",OE="wss://relay.walletconnect.org",o8="relayer",_t={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},a8="_subscription",Ar={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},c8=.1,nf="2.20.2",Qe={link_mode:"link_mode",relay:"relay"},Eu={inbound:"inbound",outbound:"outbound"},u8="0.3",l8="WALLETCONNECT_CLIENT_ID",Ay="WALLETCONNECT_LINK_MODE_APPS",mr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},d8="subscription",h8="0.3",f8="pairing",p8="0.3",sa={wc_pairingDelete:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:V.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:V.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:V.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:V.ONE_DAY,prompt:!1,tag:0},res:{ttl:V.ONE_DAY,prompt:!1,tag:0}}},Gs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},qr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},g8="history",m8="0.3",y8="expirer",Tr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},w8="0.3",b8="verify-api",v8="https://verify.walletconnect.com",RE="https://verify.walletconnect.org",_a=RE,E8=`${_a}/v3`,_8=[v8,RE],C8="echo",A8="https://echo.walletconnect.com",dn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Un={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},zr={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Bs={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Fs={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ia={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},I8=.1,S8="event-client",N8=86400,P8="https://pulse.walletconnect.org/batch";function T8(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var g=0,m=0,w=0,b=f.length;w!==b&&f[w]===0;)w++,g++;for(var v=(b-w)*l+1>>>0,C=new Uint8Array(v);w!==b;){for(var E=f[w],y=0,_=v-1;(E!==0||y<m)&&_!==-1;_--,y++)E+=256*C[_]>>>0,C[_]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");m=y,w++}for(var P=v-m;P!==v&&C[P]===0;)P++;for(var I=c.repeat(g);P<v;++P)I+=t.charAt(C[P]);return I}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var g=0;if(f[g]!==" "){for(var m=0,w=0;f[g]===c;)m++,g++;for(var b=(f.length-g)*u+1>>>0,v=new Uint8Array(b);f[g];){var C=r[f.charCodeAt(g)];if(C===255)return;for(var E=0,y=b-1;(C!==0||E<w)&&y!==-1;y--,E++)C+=a*v[y]>>>0,v[y]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");w=E,g++}if(f[g]!==" "){for(var _=b-w;_!==b&&v[_]===0;)_++;for(var P=new Uint8Array(m+(b-_)),I=m;_!==b;)P[I++]=v[_++];return P}}}function p(f){var g=h(f);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var x8=T8,O8=x8;const DE=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},R8=t=>new TextEncoder().encode(t),D8=t=>new TextDecoder().decode(t);class k8{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class $8{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return kE(this,e)}}class U8{constructor(e){this.decoders=e}or(e){return kE(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kE=(t,e)=>new U8({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class M8{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new k8(e,r,n),this.decoder=new $8(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xl=({name:t,prefix:e,encode:r,decode:n})=>new M8(t,e,r,n),$c=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=O8(r,e);return xl({prefix:t,name:e,encode:n,decode:i=>DE(s(i))})},L8=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},B8=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Ut=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>xl({prefix:e,name:t,encode(s){return B8(s,n,r)},decode(s){return L8(s,n,r,t)}}),F8=xl({prefix:"\0",name:"identity",encode:t=>D8(t),decode:t=>R8(t)});var j8=Object.freeze({__proto__:null,identity:F8});const q8=Ut({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var z8=Object.freeze({__proto__:null,base2:q8});const H8=Ut({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var W8=Object.freeze({__proto__:null,base8:H8});const V8=$c({prefix:"9",name:"base10",alphabet:"0123456789"});var G8=Object.freeze({__proto__:null,base10:V8});const K8=Ut({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Y8=Ut({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Z8=Object.freeze({__proto__:null,base16:K8,base16upper:Y8});const J8=Ut({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Q8=Ut({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),X8=Ut({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eU=Ut({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tU=Ut({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rU=Ut({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nU=Ut({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sU=Ut({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),iU=Ut({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var oU=Object.freeze({__proto__:null,base32:J8,base32upper:Q8,base32pad:X8,base32padupper:eU,base32hex:tU,base32hexupper:rU,base32hexpad:nU,base32hexpadupper:sU,base32z:iU});const aU=$c({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cU=$c({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var uU=Object.freeze({__proto__:null,base36:aU,base36upper:cU});const lU=$c({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dU=$c({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var hU=Object.freeze({__proto__:null,base58btc:lU,base58flickr:dU});const fU=Ut({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pU=Ut({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gU=Ut({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mU=Ut({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var yU=Object.freeze({__proto__:null,base64:fU,base64pad:pU,base64url:gU,base64urlpad:mU});const $E=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),wU=$E.reduce((t,e,r)=>(t[r]=e,t),[]),bU=$E.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function vU(t){return t.reduce((e,r)=>(e+=wU[r],e),"")}function EU(t){const e=[];for(const r of t){const n=bU[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const _U=xl({prefix:"🚀",name:"base256emoji",encode:vU,decode:EU});var CU=Object.freeze({__proto__:null,base256emoji:_U}),AU=UE,Iy=128,IU=-128,SU=Math.pow(2,31);function UE(t,e,r){e=e||[],r=r||0;for(var n=r;t>=SU;)e[r++]=t&255|Iy,t/=128;for(;t&IU;)e[r++]=t&255|Iy,t>>>=7;return e[r]=t|0,UE.bytes=r-n+1,e}var NU=sf,PU=128,Sy=127;function sf(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw sf.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&Sy)<<s:(o&Sy)*Math.pow(2,s),s+=7}while(o>=PU);return sf.bytes=i-n,r}var TU=Math.pow(2,7),xU=Math.pow(2,14),OU=Math.pow(2,21),RU=Math.pow(2,28),DU=Math.pow(2,35),kU=Math.pow(2,42),$U=Math.pow(2,49),UU=Math.pow(2,56),MU=Math.pow(2,63),LU=function(t){return t<TU?1:t<xU?2:t<OU?3:t<RU?4:t<DU?5:t<kU?6:t<$U?7:t<UU?8:t<MU?9:10},BU={encode:AU,decode:NU,encodingLength:LU},ME=BU;const Ny=(t,e,r=0)=>(ME.encode(t,e,r),e),Py=t=>ME.encodingLength(t),of=(t,e)=>{const r=e.byteLength,n=Py(t),s=n+Py(r),i=new Uint8Array(s+r);return Ny(t,i,0),Ny(r,i,n),i.set(e,s),new FU(t,r,e,i)};class FU{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const LE=({name:t,code:e,encode:r})=>new jU(t,e,r);class jU{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?of(this.code,r):r.then(n=>of(this.code,n))}else throw Error("Unknown type, must be binary type")}}const BE=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),qU=LE({name:"sha2-256",code:18,encode:BE("SHA-256")}),zU=LE({name:"sha2-512",code:19,encode:BE("SHA-512")});var HU=Object.freeze({__proto__:null,sha256:qU,sha512:zU});const FE=0,WU="identity",jE=DE,VU=t=>of(FE,jE(t)),GU={code:FE,name:WU,encode:jE,digest:VU};var KU=Object.freeze({__proto__:null,identity:GU});new TextEncoder,new TextDecoder;const Ty={...j8,...z8,...W8,...G8,...Z8,...oU,...uU,...hU,...yU,...CU};({...HU,...KU});function YU(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function qE(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xy=qE("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ud=qE("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=YU(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ZU={utf8:xy,"utf-8":xy,hex:Ty.base16,latin1:Ud,ascii:Ud,binary:Ud,...Ty};function JU(t,e="utf8"){const r=ZU[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var QU=Object.defineProperty,XU=(t,e,r)=>e in t?QU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,un=(t,e,r)=>XU(t,typeof e!="symbol"?e+"":e,r);class e6{constructor(e,r){this.core=e,this.logger=r,un(this,"keychain",new Map),un(this,"name",e8),un(this,"version",t8),un(this,"initialized",!1),un(this,"storagePrefix",Cn),un(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),un(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),un(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),un(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=G("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),un(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=zt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Hh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t6=Object.defineProperty,r6=(t,e,r)=>e in t?t6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tt=(t,e,r)=>r6(t,typeof e!="symbol"?e+"":e,r);class n6{constructor(e,r,n){this.core=e,this.logger=r,Tt(this,"name",Q5),Tt(this,"keychain"),Tt(this,"randomSessionIdentifier",tf()),Tt(this,"initialized",!1),Tt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Tt(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Tt(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=ym(s);return Tv(i.publicKey)}),Tt(this,"generateKeyPair",()=>{this.isInitialized();const s=R$();return this.setPrivateKey(s.publicKey,s.privateKey)}),Tt(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=ym(i),a=this.randomSessionIdentifier;return await OR(a,s,X5,o)}),Tt(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=D$(a,i);return this.setSymKey(c,o)}),Tt(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||vu(s);return await this.keychain.set(o,s),o}),Tt(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Tt(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Tt(this,"encode",async(s,i,o)=>{this.isInitialized();const a=vE(o),c=Yn(i);if(iy(a))return U$(c,o==null?void 0:o.encoding);if(sy(a)){const h=a.senderPublicKey,p=a.receiverPublicKey;s=await this.generateSharedKey(h,p)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return k$({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Tt(this,"decode",async(s,i,o)=>{this.isInitialized();const a=L$(i,o);if(iy(a)){const c=M$(i,o==null?void 0:o.encoding);return hi(c)}if(sy(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=$$({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return hi(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Tt(this,"getPayloadType",(s,i=Qr)=>{const o=Wa({encoded:s,encoding:i});return mi(o.type)}),Tt(this,"getPayloadSenderPublicKey",(s,i=Qr)=>{const o=Wa({encoded:s,encoding:i});return o.senderPublicKey?dr(o.senderPublicKey,Zt):void 0}),this.core=e,this.logger=zt(r,this.name),this.keychain=n||new e6(this.core,this.logger)}get context(){return hr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(_y)}catch{e=tf(),await this.keychain.set(_y,e)}return JU(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var s6=Object.defineProperty,i6=Object.defineProperties,o6=Object.getOwnPropertyDescriptors,Oy=Object.getOwnPropertySymbols,a6=Object.prototype.hasOwnProperty,c6=Object.prototype.propertyIsEnumerable,af=(t,e,r)=>e in t?s6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u6=(t,e)=>{for(var r in e||(e={}))a6.call(e,r)&&af(t,r,e[r]);if(Oy)for(var r of Oy(e))c6.call(e,r)&&af(t,r,e[r]);return t},l6=(t,e)=>i6(t,o6(e)),gr=(t,e,r)=>af(t,typeof e!="symbol"?e+"":e,r);class d6 extends Tx{constructor(e,r){super(e,r),this.logger=e,this.core=r,gr(this,"messages",new Map),gr(this,"messagesWithoutClientAck",new Map),gr(this,"name",r8),gr(this,"version",n8),gr(this,"initialized",!1),gr(this,"storagePrefix",Cn),gr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),gr(this,"set",async(n,s,i)=>{this.isInitialized();const o=wn(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===Eu.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,l6(u6({},c),{[o]:s}))}return await this.persist(),o}),gr(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),gr(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),gr(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=wn(s);return typeof i[o]<"u"}),gr(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=wn(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),gr(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=zt(e,this.name),this.core=r}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Hh(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Hh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wh(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Wh(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var h6=Object.defineProperty,f6=Object.defineProperties,p6=Object.getOwnPropertyDescriptors,Ry=Object.getOwnPropertySymbols,g6=Object.prototype.hasOwnProperty,m6=Object.prototype.propertyIsEnumerable,cf=(t,e,r)=>e in t?h6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,su=(t,e)=>{for(var r in e||(e={}))g6.call(e,r)&&cf(t,r,e[r]);if(Ry)for(var r of Ry(e))m6.call(e,r)&&cf(t,r,e[r]);return t},Md=(t,e)=>f6(t,p6(e)),Hr=(t,e,r)=>cf(t,typeof e!="symbol"?e+"":e,r);class y6 extends xx{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Hr(this,"events",new Lr.EventEmitter),Hr(this,"name",s8),Hr(this,"queue",new Map),Hr(this,"publishTimeout",V.toMiliseconds(V.ONE_MINUTE)),Hr(this,"initialPublishTimeout",V.toMiliseconds(V.ONE_SECOND*15)),Hr(this,"needsTransportRestart",!1),Hr(this,"publish",async(n,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||Cy,c=qu(i),u=(i==null?void 0:i.prompt)||!1,l=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Zs().toString(),h={topic:n,message:s,opts:{ttl:a,relay:c,prompt:u,tag:l,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},p=`Failed to publish payload, please try again. id:${d} tag:${l}`;try{const f=new Promise(async g=>{const m=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(_t.publish,m),g(h))};this.relayer.events.on(_t.publish,m);const w=vs(new Promise((b,v)=>{this.rpcPublish({topic:n,message:s,ttl:a,prompt:u,tag:l,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(C=>{this.logger.warn(C,C==null?void 0:C.message),v(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${l}`);try{await w,this.events.removeListener(_t.publish,m)}catch(b){this.queue.set(d,Md(su({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:n,message:s,opts:i}}),await vs(f,this.publishTimeout,p)}catch(f){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(f),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw f}finally{this.queue.delete(d)}}),Hr(this,"on",(n,s)=>{this.events.on(n,s)}),Hr(this,"once",(n,s)=>{this.events.once(n,s)}),Hr(this,"off",(n,s)=>{this.events.off(n,s)}),Hr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=zt(r,this.name),this.registerEventListeners()}get context(){return hr(this.logger)}async rpcPublish(e){var r,n,s,i;const{topic:o,message:a,ttl:c=Cy,prompt:u,tag:l,id:d,attestation:h,tvf:p}=e,f={method:pa(qu().protocol).publish,params:su({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:h},p),id:d};Rt((r=f.params)==null?void 0:r.prompt)&&((n=f.params)==null||delete n.prompt),Rt((s=f.params)==null?void 0:s.tag)&&((i=f.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});const g=await this.relayer.request(f);return this.relayer.events.emit(_t.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,Md(su({},e),{attempt:n}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(Md(su({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Mo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_t.connection_stalled);return}this.checkQueue()}),this.relayer.on(_t.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var w6=Object.defineProperty,b6=(t,e,r)=>e in t?w6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$i=(t,e,r)=>b6(t,typeof e!="symbol"?e+"":e,r);class v6{constructor(){$i(this,"map",new Map),$i(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),$i(this,"get",e=>this.map.get(e)||[]),$i(this,"exists",(e,r)=>this.get(e).includes(r)),$i(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),$i(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var E6=Object.defineProperty,_6=Object.defineProperties,C6=Object.getOwnPropertyDescriptors,Dy=Object.getOwnPropertySymbols,A6=Object.prototype.hasOwnProperty,I6=Object.prototype.propertyIsEnumerable,uf=(t,e,r)=>e in t?E6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oa=(t,e)=>{for(var r in e||(e={}))A6.call(e,r)&&uf(t,r,e[r]);if(Dy)for(var r of Dy(e))I6.call(e,r)&&uf(t,r,e[r]);return t},Ld=(t,e)=>_6(t,C6(e)),We=(t,e,r)=>uf(t,typeof e!="symbol"?e+"":e,r);class S6 extends Dx{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,We(this,"subscriptions",new Map),We(this,"topicMap",new v6),We(this,"events",new Lr.EventEmitter),We(this,"name",d8),We(this,"version",h8),We(this,"pending",new Map),We(this,"cached",[]),We(this,"initialized",!1),We(this,"storagePrefix",Cn),We(this,"subscribeTimeout",V.toMiliseconds(V.ONE_MINUTE)),We(this,"initialSubscribeTimeout",V.toMiliseconds(V.ONE_SECOND*15)),We(this,"clientId"),We(this,"batchSubscribeTopicsLimit",500),We(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),We(this,"subscribe",async(n,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const i=qu(s),o={topic:n,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),We(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),We(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),We(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),We(this,"on",(n,s)=>{this.events.on(n,s)}),We(this,"once",(n,s)=>{this.events.once(n,s)}),We(this,"off",(n,s)=>{this.events.off(n,s)}),We(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),We(this,"start",async()=>{await this.onConnect()}),We(this,"stop",async()=>{await this.onDisconnect()}),We(this,"restart",async()=>{await this.restore(),await this.onRestart()}),We(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),We(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Mo.pulse,async()=>{await this.checkPending()}),this.events.on(mr.created,async n=>{const s=mr.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(mr.deleted,async n=>{const s=mr.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=zt(r,this.name),this.clientId=""}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=qu(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=ze("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s;(!n||(n==null?void 0:n.transportType)===Qe.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const i={method:pa(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Qe.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},V.toMiliseconds(V.ONE_SECOND)),a;const c=new Promise(async l=>{const d=h=>{h.topic===e&&(this.events.removeListener(mr.created,d),l(h.id))};this.events.on(mr.created,d);try{const h=await vs(new Promise((p,f)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),f(g)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(mr.created,d),l(h)}catch{}}),u=await vs(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_t.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:pa(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await vs(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(_t.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:pa(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await vs(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(_t.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:pa(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,Ld(oa({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,oa({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,oa({},r)),this.topicMap.set(r.topic,e),this.events.emit(mr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(mr.deleted,Ld(oa({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(mr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(mr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>Ld(oa({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await bD(V.toMiliseconds(V.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return wn(e+await this.getClientId())}}var N6=Object.defineProperty,ky=Object.getOwnPropertySymbols,P6=Object.prototype.hasOwnProperty,T6=Object.prototype.propertyIsEnumerable,lf=(t,e,r)=>e in t?N6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$y=(t,e)=>{for(var r in e||(e={}))P6.call(e,r)&&lf(t,r,e[r]);if(ky)for(var r of ky(e))T6.call(e,r)&&lf(t,r,e[r]);return t},De=(t,e,r)=>lf(t,typeof e!="symbol"?e+"":e,r);class x6 extends Ox{constructor(e){super(e),De(this,"protocol","wc"),De(this,"version",2),De(this,"core"),De(this,"logger"),De(this,"events",new Lr.EventEmitter),De(this,"provider"),De(this,"messages"),De(this,"subscriber"),De(this,"publisher"),De(this,"name",o8),De(this,"transportExplicitlyClosed",!1),De(this,"initialized",!1),De(this,"connectionAttemptInProgress",!1),De(this,"relayUrl"),De(this,"projectId"),De(this,"packageName"),De(this,"bundleId"),De(this,"hasExperiencedNetworkDisruption",!1),De(this,"pingTimeout"),De(this,"heartBeatTimeout",V.toMiliseconds(V.THIRTY_SECONDS+V.FIVE_SECONDS)),De(this,"reconnectTimeout"),De(this,"connectPromise"),De(this,"reconnectInProgress",!1),De(this,"requestsInFlight",[]),De(this,"connectTimeout",V.toMiliseconds(V.ONE_SECOND*15)),De(this,"request",async r=>{var n,s;this.logger.debug("Publishing Request Payload");const i=r.id||Zs().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${i}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),De(this,"resetPingTimeout",()=>{Fu()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),De(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),De(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(_t.connect)}),De(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),De(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(_t.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),De(this,"registerProviderListeners",()=>{this.provider.on(Ar.payload,this.onPayloadHandler),this.provider.on(Ar.connect,this.onConnectHandler),this.provider.on(Ar.disconnect,this.onDisconnectHandler),this.provider.on(Ar.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?zt(e.logger,this.name):Ac(Lo({level:e.logger||i8})),this.messages=new d6(this.logger,e.core),this.subscriber=new S6(this,this.logger),this.publisher=new y6(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||OE,this.projectId=e.projectId,nD()?this.packageName=Pm():sD()&&(this.bundleId=Pm()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return hr(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Qe.relay},Eu.outbound)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(mr.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(mr.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,$y({internal:{throwOnFailedPublish:o}},r)).catch(h=>{o&&d(h)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await vs(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await fy())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=gt(V.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(_t.message,e),await this.recordMessageEvent(e,Eu.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ar.disconnect,i),await vs(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ar.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ar.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ar.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,V.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(Fu())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Br(new K5(uD({sdkVersion:nf,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yp(e)){if(!e.method.endsWith(a8))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Qe.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($y({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Tl(e)&&this.events.emit(_t.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Eu.inbound),this.events.emit(_t.message,e))}async acknowledgePayload(e){const r=Nl(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Ar.payload,this.onPayloadHandler),this.provider.off(Ar.connect,this.onConnectHandler),this.provider.off(Ar.disconnect,this.onDisconnectHandler),this.provider.off(Ar.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await fy();C5(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(_t.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},V.toMiliseconds(c8)))))}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function O6(){}function Uy(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function My(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Ly(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const R6="[object RegExp]",D6="[object String]",k6="[object Number]",$6="[object Boolean]",By="[object Arguments]",U6="[object Symbol]",M6="[object Date]",L6="[object Map]",B6="[object Set]",F6="[object Array]",j6="[object Function]",q6="[object ArrayBuffer]",Bd="[object Object]",z6="[object Error]",H6="[object DataView]",W6="[object Uint8Array]",V6="[object Uint8ClampedArray]",G6="[object Uint16Array]",K6="[object Uint32Array]",Y6="[object BigUint64Array]",Z6="[object Int8Array]",J6="[object Int16Array]",Q6="[object Int32Array]",X6="[object BigInt64Array]",eM="[object Float32Array]",tM="[object Float64Array]";function rM(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function nM(t,e,r){return ma(t,e,void 0,void 0,void 0,void 0,r)}function ma(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ca(t,e,i,o)}return Ca(t,e,i,o)}function Ca(t,e,r,n){if(Object.is(t,e))return!0;let s=Ly(t),i=Ly(e);if(s===By&&(s=Bd),i===By&&(i=Bd),s!==i)return!1;switch(s){case D6:return t.toString()===e.toString();case k6:{const c=t.valueOf(),u=e.valueOf();return rM(c,u)}case $6:case M6:case U6:return Object.is(t.valueOf(),e.valueOf());case R6:return t.source===e.source&&t.flags===e.flags;case j6:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case L6:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!ma(u,e.get(c),c,t,e,r,n))return!1;return!0}case B6:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],h=u.findIndex(p=>ma(d,p,void 0,t,e,r,n));if(h===-1)return!1;u.splice(h,1)}return!0}case F6:case W6:case V6:case G6:case K6:case Y6:case Z6:case J6:case Q6:case X6:case eM:case tM:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ma(t[c],e[c],c,t,e,r,n))return!1;return!0}case q6:return t.byteLength!==e.byteLength?!1:Ca(new Uint8Array(t),new Uint8Array(e),r,n);case H6:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ca(new Uint8Array(t),new Uint8Array(e),r,n);case z6:return t.name===e.name&&t.message===e.message;case Bd:{if(!(Ca(t.constructor,e.constructor,r,n)||Uy(t)&&Uy(e)))return!1;const c=[...Object.keys(t),...My(t)],u=[...Object.keys(e),...My(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],h=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!ma(h,p,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function sM(t,e){return nM(t,e,O6)}var iM=Object.defineProperty,Fy=Object.getOwnPropertySymbols,oM=Object.prototype.hasOwnProperty,aM=Object.prototype.propertyIsEnumerable,df=(t,e,r)=>e in t?iM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jy=(t,e)=>{for(var r in e||(e={}))oM.call(e,r)&&df(t,r,e[r]);if(Fy)for(var r of Fy(e))aM.call(e,r)&&df(t,r,e[r]);return t},tr=(t,e,r)=>df(t,typeof e!="symbol"?e+"":e,r);class Ni extends Rx{constructor(e,r,n,s=Cn,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,tr(this,"map",new Map),tr(this,"version",u8),tr(this,"cached",[]),tr(this,"initialized",!1),tr(this,"getKey"),tr(this,"storagePrefix",Cn),tr(this,"recentlyDeleted",[]),tr(this,"recentlyDeletedLimit",200),tr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Rt(o)?this.map.set(this.getKey(o),o):e5(o)?this.map.set(o.id,o):t5(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),tr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),tr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),tr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>sM(a[c],o[c]))):this.values)),tr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=jy(jy({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),tr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=zt(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=G("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cM=Object.defineProperty,uM=(t,e,r)=>e in t?cM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ae=(t,e,r)=>uM(t,typeof e!="symbol"?e+"":e,r);class lM{constructor(e,r){this.core=e,this.logger=r,Ae(this,"name",f8),Ae(this,"version",p8),Ae(this,"events",new Jf),Ae(this,"pairings"),Ae(this,"initialized",!1),Ae(this,"storagePrefix",Cn),Ae(this,"ignoredPayloadTypes",[Wn]),Ae(this,"registeredMethods",[]),Ae(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ae(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Ae(this,"create",async n=>{this.isInitialized();const s=tf(),i=await this.core.crypto.setSymKey(s),o=gt(V.FIVE_MINUTES),a={protocol:xE},c={topic:i,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},u=ay({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(Gs.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n==null?void 0:n.transportType}),{topic:i,uri:u}}),Ae(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[dn.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=oy(n.uri);s.props.properties.topic=i,s.addTrace(dn.pairing_uri_validation_success),s.addTrace(dn.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(dn.existing_pairing),l.active)throw s.setError(Un.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(dn.pairing_not_expired)}const d=c||gt(V.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(dn.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Gs.create,h),s.addTrace(dn.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(dn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Un.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(p){throw s.setError(Un.subscribe_pairing_topic_failure),p}return s.addTrace(dn.subscribe_pairing_topic_success),h}),Ae(this,"activate",async({topic:n})=>{this.isInitialized();const s=gt(V.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),Ae(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=zs();this.events.once(Le("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),Ae(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),Ae(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),Ae(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ae(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",ze("USER_DISCONNECTED")),await this.deletePairing(s))}),Ae(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return ay({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ae(this,"sendRequest",async(n,s,i)=>{const o=Es(s,i),a=await this.core.crypto.encode(n,o),c=sa[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),Ae(this,"sendResult",async(n,s,i)=>{const o=Nl(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=sa[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Ae(this,"sendError",async(n,s,i)=>{const o=Pl(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=sa[c]?sa[c].res:sa.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Ae(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,ze("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),Ae(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>ds(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),Ae(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ae(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ae(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(Gs.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),Ae(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{fn(s)?this.events.emit(Le("pairing_ping",i),{}):Rr(s)&&this.events.emit(Le("pairing_ping",i),{error:s.error})},500)}),Ae(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Gs.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),Ae(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=ze("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),Ae(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(ze("WC_METHOD_UNSUPPORTED",n))}),Ae(this,"isValidPair",(n,s)=>{var i;if(!ar(n)){const{message:a}=G("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Un.malformed_pairing_uri),new Error(a)}if(!X$(n.uri)){const{message:a}=G("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Un.malformed_pairing_uri),new Error(a)}const o=oy(n==null?void 0:n.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=G("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Un.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=G("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Un.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&V.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Un.pairing_expired);const{message:a}=G("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ae(this,"isValidPing",async n=>{if(!ar(n)){const{message:i}=G("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),Ae(this,"isValidDisconnect",async n=>{if(!ar(n)){const{message:i}=G("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),Ae(this,"isValidPairingTopic",async n=>{if(!dt(n,!1)){const{message:s}=G("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=G("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(ds(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=G("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=zt(r,this.name),this.pairings=new Ni(this.core,this.logger,this.name,this.storagePrefix)}get context(){return hr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(_t.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Qe.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);yp(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):Tl(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Tr.expired,async e=>{const{topic:r}=jv(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Gs.expire,{topic:r}))})}}var dM=Object.defineProperty,hM=(t,e,r)=>e in t?dM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xt=(t,e,r)=>hM(t,typeof e!="symbol"?e+"":e,r);class fM extends Px{constructor(e,r){super(e,r),this.core=e,this.logger=r,xt(this,"records",new Map),xt(this,"events",new Lr.EventEmitter),xt(this,"name",g8),xt(this,"version",m8),xt(this,"cached",[]),xt(this,"initialized",!1),xt(this,"storagePrefix",Cn),xt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xt(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:gt(V.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(qr.created,o)}),xt(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=Rr(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(qr.updated,s))}),xt(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),xt(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(qr.deleted,i)}}),this.persist()}),xt(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),xt(this,"on",(n,s)=>{this.events.on(n,s)}),xt(this,"once",(n,s)=>{this.events.once(n,s)}),xt(this,"off",(n,s)=>{this.events.off(n,s)}),xt(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=zt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Es(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(qr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(qr.created,e=>{const r=qr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(qr.updated,e=>{const r=qr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(qr.deleted,e=>{const r=qr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Mo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{V.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(qr.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var pM=Object.defineProperty,gM=(t,e,r)=>e in t?pM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bt=(t,e,r)=>gM(t,typeof e!="symbol"?e+"":e,r);class mM extends kx{constructor(e,r){super(e,r),this.core=e,this.logger=r,Bt(this,"expirations",new Map),Bt(this,"events",new Lr.EventEmitter),Bt(this,"name",y8),Bt(this,"version",w8),Bt(this,"cached",[]),Bt(this,"initialized",!1),Bt(this,"storagePrefix",Cn),Bt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Bt(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Bt(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Tr.created,{target:i,expiration:o})}),Bt(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),Bt(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Tr.deleted,{target:s,expiration:i})}}),Bt(this,"on",(n,s)=>{this.events.on(n,s)}),Bt(this,"once",(n,s)=>{this.events.once(n,s)}),Bt(this,"off",(n,s)=>{this.events.off(n,s)}),Bt(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=zt(r,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lD(e);if(typeof e=="number")return dD(e);const{message:r}=G("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Tr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;V.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Tr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Mo.pulse,()=>this.checkExpirations()),this.events.on(Tr.created,e=>{const r=Tr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Tr.expired,e=>{const r=Tr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Tr.deleted,e=>{const r=Tr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yM=Object.defineProperty,wM=(t,e,r)=>e in t?yM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lt=(t,e,r)=>wM(t,typeof e!="symbol"?e+"":e,r);class bM extends $x{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,lt(this,"name",b8),lt(this,"abortController"),lt(this,"isDevEnv"),lt(this,"verifyUrlV3",E8),lt(this,"storagePrefix",Cn),lt(this,"version",TE),lt(this,"publicKey"),lt(this,"fetchPromise"),lt(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&V.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),lt(this,"register",async s=>{if(!Pc()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=fi.getDocument(),l=this.startAbortTimer(V.ONE_SECOND*5),d=await new Promise((h,p)=>{const f=()=>{window.removeEventListener("message",m),u.body.removeChild(g),p("attestation aborted")};this.abortController.signal.addEventListener("abort",f);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",f,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const b=JSON.parse(w.data);if(b.type==="verify_attestation"){if(zh(b.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",f),window.removeEventListener("message",m),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};u.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(u){this.logger.warn(u)}return""}),lt(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(zh(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),lt(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(V.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),lt(this,"getVerifyUrl",s=>{let i=s||_a;return _8.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${_a}`),i=_a),i}),lt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(V.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),lt(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),lt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),lt(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),lt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),lt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),lt(this,"validateAttestation",(s,i)=>{const o=F$(s,i.publicKey),a={hasExpired:V.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=zt(r,this.name),this.abortController=new AbortController,this.isDevEnv=ap(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return hr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),V.toMiliseconds(e))}}var vM=Object.defineProperty,EM=(t,e,r)=>e in t?vM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qy=(t,e,r)=>EM(t,typeof e!="symbol"?e+"":e,r);class _M extends Ux{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,qy(this,"context",C8),qy(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${A8}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=zt(r,this.context)}}var CM=Object.defineProperty,zy=Object.getOwnPropertySymbols,AM=Object.prototype.hasOwnProperty,IM=Object.prototype.propertyIsEnumerable,hf=(t,e,r)=>e in t?CM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,aa=(t,e)=>{for(var r in e||(e={}))AM.call(e,r)&&hf(t,r,e[r]);if(zy)for(var r of zy(e))IM.call(e,r)&&hf(t,r,e[r]);return t},yt=(t,e,r)=>hf(t,typeof e!="symbol"?e+"":e,r);class SM extends Mx{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,yt(this,"context",S8),yt(this,"storagePrefix",Cn),yt(this,"storageVersion",I8),yt(this,"events",new Map),yt(this,"shouldPersist",!1),yt(this,"init",async()=>{if(!ap())try{const s={eventId:xm(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Bv(this.core.relayer.protocol,this.core.relayer.version,nf)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),yt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=xm(),l=this.core.projectId||"",d=Date.now(),h=aa({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,h),this.shouldPersist=!0),h}),yt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return aa(aa({},a),this.setMethods(a.eventId))}),yt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),yt(this,"setEventListeners",()=>{this.core.heartbeat.on(Mo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{V.fromMiliseconds(Date.now())-V.fromMiliseconds(s.timestamp)>N8&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),yt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),yt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),yt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),yt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),yt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,aa(aa({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),yt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),yt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${P8}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${nf}${i}`,{method:"POST",body:JSON.stringify(s)})}),yt(this,"getAppDomain",()=>Lv().url),this.logger=zt(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var NM=Object.defineProperty,Hy=Object.getOwnPropertySymbols,PM=Object.prototype.hasOwnProperty,TM=Object.prototype.propertyIsEnumerable,ff=(t,e,r)=>e in t?NM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wy=(t,e)=>{for(var r in e||(e={}))PM.call(e,r)&&ff(t,r,e[r]);if(Hy)for(var r of Hy(e))TM.call(e,r)&&ff(t,r,e[r]);return t},Ye=(t,e,r)=>ff(t,typeof e!="symbol"?e+"":e,r);let xM=class zE extends Ax{constructor(e){var r;super(e),Ye(this,"protocol",PE),Ye(this,"version",TE),Ye(this,"name",rf),Ye(this,"relayUrl"),Ye(this,"projectId"),Ye(this,"customStoragePrefix"),Ye(this,"events",new Lr.EventEmitter),Ye(this,"logger"),Ye(this,"heartbeat"),Ye(this,"relayer"),Ye(this,"crypto"),Ye(this,"storage"),Ye(this,"history"),Ye(this,"expirer"),Ye(this,"pairing"),Ye(this,"verify"),Ye(this,"echoClient"),Ye(this,"linkModeSupportedApps"),Ye(this,"eventClient"),Ye(this,"initialized",!1),Ye(this,"logChunkController"),Ye(this,"on",(a,c)=>this.events.on(a,c)),Ye(this,"once",(a,c)=>this.events.once(a,c)),Ye(this,"off",(a,c)=>this.events.off(a,c)),Ye(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ye(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Qe.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||OE,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Lo({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Z5.logger,name:rf}),{logger:i,chunkLoggerController:o}=Xf({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=zt(i,this.name),this.heartbeat=new CT,this.crypto=new n6(this,this.logger,e==null?void 0:e.keychain),this.history=new fM(this,this.logger),this.expirer=new mM(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new ix(Wy(Wy({},J5),e==null?void 0:e.storageOptions)),this.relayer=new x6({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new lM(this,this.logger),this.verify=new bM(this,this.logger,this.storage),this.echoClient=new _M(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new SM(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new zE(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(l8,n),r}get context(){return hr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Ay,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Ay)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Y5.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const OM=xM,HE="wc",WE=2,VE="client",wp=`${HE}@${WE}:${VE}:`,Fd={name:VE,logger:"error"},Vy="WALLETCONNECT_DEEPLINK_CHOICE",RM="proposal",Gy="Proposal expired",DM="session",Ui=V.SEVEN_DAYS,kM="engine",wt={wc_sessionPropose:{req:{ttl:V.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1104},res:{ttl:V.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1106},res:{ttl:V.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:V.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:V.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1112},res:{ttl:V.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1114},res:{ttl:V.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:V.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:V.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1119}}},jd={min:V.FIVE_MINUTES,max:V.SEVEN_DAYS},ln={idle:"IDLE",active:"ACTIVE"},Ky={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},$M="request",UM=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],MM="wc",LM="auth",BM="authKeys",FM="pairingTopics",jM="requests",Ol=`${MM}@${1.5}:${LM}:`,_u=`${Ol}:PUB_KEY`;var qM=Object.defineProperty,zM=Object.defineProperties,HM=Object.getOwnPropertyDescriptors,Yy=Object.getOwnPropertySymbols,WM=Object.prototype.hasOwnProperty,VM=Object.prototype.propertyIsEnumerable,pf=(t,e,r)=>e in t?qM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ve=(t,e)=>{for(var r in e||(e={}))WM.call(e,r)&&pf(t,r,e[r]);if(Yy)for(var r of Yy(e))VM.call(e,r)&&pf(t,r,e[r]);return t},Wt=(t,e)=>zM(t,HM(e)),j=(t,e,r)=>pf(t,typeof e!="symbol"?e+"":e,r);class GM extends jx{constructor(e){super(e),j(this,"name",kM),j(this,"events",new Jf),j(this,"initialized",!1),j(this,"requestQueue",{state:ln.idle,queue:[]}),j(this,"sessionRequestQueue",{state:ln.idle,queue:[]}),j(this,"requestQueueDelay",V.ONE_SECOND),j(this,"expectedPairingMethodMap",new Map),j(this,"recentlyDeletedMap",new Map),j(this,"recentlyDeletedLimit",200),j(this,"relayMessageCache",[]),j(this,"pendingSessions",new Map),j(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(wt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},V.toMiliseconds(this.requestQueueDelay)))}),j(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Wt(Ve({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=n;let l=s,d,h=!1;try{if(l){const y=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=y.active}}catch(y){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),y}if(!l||!h){const{topic:y,uri:_}=await this.client.core.pairing.create();l=y,d=_}if(!l){const{message:y}=G("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(y)}const p=await this.client.core.crypto.generateKeyPair(),f=wt.wc_sessionPropose.req.ttl||V.FIVE_MINUTES,g=gt(f),m=Wt(Ve(Ve({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:xE}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:hn()}),w=Le("session_connect",m.id),{reject:b,resolve:v,done:C}=zs(f,Gy),E=({id:y})=>{y===m.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(m.id),this.events.emit(w,{error:{message:Gy,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(w,({error:y,session:_})=>{this.client.events.off("proposal_expire",E),y?b(y):_&&v(_)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:C}}),j(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),j(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[zr.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(Bs.no_internet_connection),I}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Bs.proposal_not_found),I}try{await this.isValidApprove(r)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Bs.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:h}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:f,proposer:g,requiredNamespaces:m,optionalNamespaces:w}=p;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:f});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:zr.session_approve_started,properties:{topic:f,trace:[zr.session_approve_started,zr.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),C=g.publicKey,E=await this.client.core.crypto.generateSharedKey(v,C),y=Ve(Ve(Ve({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:v,metadata:this.client.metadata},expiry:gt(Ui)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),_=Qe.relay;b.addTrace(zr.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:_})}catch(I){throw b.setError(Bs.subscribe_session_topic_failure),I}b.addTrace(zr.subscribe_session_topic_success);const P=Wt(Ve({},y),{topic:E,requiredNamespaces:m,optionalNamespaces:w,pairingTopic:f,acknowledged:!1,self:y.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Qe.relay});await this.client.session.set(E,P),b.addTrace(zr.store_session);try{b.addTrace(zr.publishing_session_settle),await this.sendRequest({topic:E,method:"wc_sessionSettle",params:y,throwOnFailedPublish:!0}).catch(I=>{throw b==null||b.setError(Bs.session_settle_publish_failure),I}),b.addTrace(zr.session_settle_publish_success),b.addTrace(zr.publishing_session_approve),await this.sendResult({id:a,topic:f,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(I=>{throw b==null||b.setError(Bs.session_approve_publish_failure),I}),b.addTrace(zr.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(E,ze("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),I}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:f,metadata:g.metadata}),await this.client.proposal.delete(a,ze("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:f}),await this.setExpiry(E,gt(Ui)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),j(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&(await this.sendError({id:n,topic:i,error:s,rpcOpts:wt.wc_sessionPropose.reject}),await this.client.proposal.delete(n,ze("USER_DISCONNECTED")))}),j(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=zs(),c=hn(),u=Zs().toString(),l=this.client.session.get(n).namespaces;return this.events.once(Le("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:l}),a(d)}),{acknowledged:i}}),j(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=hn(),{done:i,resolve:o,reject:a}=zs();return this.events.once(Le("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,gt(Ui)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),j(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:n,request:s,topic:i,expiry:o=wt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Qe.relay&&await this.confirmOnlineStateOrThrow();const c=hn(),u=Zs().toString(),{done:l,resolve:d,reject:h}=zs(o,"Request expired. Please try again.");this.events.once(Le("session_request",c),({error:w,result:b})=>{w?h(w):d(b)});const p="wc_sessionRequest",f=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:{request:Wt(Ve({},s),{expiryTimestamp:gt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const g={request:Wt(Ve({},s),{expiryTimestamp:gt(o)}),chainId:n},m=this.shouldSetTVF(p,g);return await Promise.all([new Promise(async w=>{await this.sendRequest(Ve({clientRpcId:c,relayRpcId:u,topic:i,method:p,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),w()}),new Promise(async w=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await gD(this.client.core.storage,Vy);await hD({id:c,topic:i,wcDeepLink:v})}w()}),l()]).then(w=>w[2])}),j(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:s}=r,{id:i}=s,o=this.client.session.get(n);o.transportType===Qe.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);fn(s)?await this.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0,appLink:a}):Rr(s)&&await this.sendError({id:i,topic:n,error:s.error,appLink:a}),this.cleanupAfterResponse(r)}),j(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=hn(),i=Zs().toString(),{done:o,resolve:a,reject:c}=zs();this.events.once(Le("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),j(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=Zs().toString(),a=hn();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),j(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:ze("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=G("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),j(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>J$(n,r)))),j(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),j(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Qe.link_mode:Qe.relay;o===Qe.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:h,exp:p,nbf:f,methods:g=[],expiry:m}=r,w=[...r.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const C=await this.client.core.crypto.generateKeyPair(),E=vu(C);if(await Promise.all([this.client.auth.authKeys.set(_u,{responseTopic:E,publicKey:C}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:b})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=so(a[0]);let U=ak(k,"request",g);bu(w)&&(U=uk(U,w.pop())),w.push(U)}const y=m&&m>wt.wc_sessionAuthenticate.req.ttl?m:wt.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:h??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:f,resources:w},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:gt(y)},P={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:P,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:gt(wt.wc_sessionPropose.req.ttl),id:hn()},{done:x,resolve:D,reject:M}=zs(y,"Request expired"),B=hn(),O=Le("session_connect",I.id),S=Le("session_request",B),N=async({error:k,session:U})=>{this.events.off(S,R),k?M(k):U&&D({session:U})},R=async k=>{var U,W,Y;if(await this.deletePendingAuthRequest(B,{message:"fulfilled",code:0}),k.error){const Te=ze("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===Te.code?void 0:(this.events.off(O,N),M(k.error.message))}await this.deleteProposal(I.id),this.events.off(O,N);const{cacaos:ie,responder:K}=k.result,ae=[],ye=[];for(const Te of ie){await Lm({cacao:Te,projectId:this.client.core.projectId})||(this.client.logger.error(Te,"Signature verification failed"),M(ze("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Mt}=Te,Nt=bu(Mt.resources),Ht=[Vh(Mt.iss)],_r=ju(Mt.iss);if(Nt){const Cr=Bm(Nt),Ti=Fm(Nt);ae.push(...Cr),Ht.push(...Ti)}for(const Cr of Ht)ye.push(`${Cr}:${_r}`)}const Ke=await this.client.core.crypto.generateSharedKey(C,K.publicKey);let Be;ae.length>0&&(Be={topic:Ke,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:gt(Ui),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:cy([...new Set(ae)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Ke,{transportType:o}),await this.client.session.set(Ke,Be),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:K.metadata}),Be=this.client.session.get(Ke)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(W=K.metadata.redirect)!=null&&W.linkMode&&(Y=K.metadata.redirect)!=null&&Y.universal&&n&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(Ke,{transportType:Qe.link_mode})),D({auths:ie,session:Be})};this.events.once(O,N),this.events.once(S,R);let $;try{if(i){const k=Es("wc_sessionAuthenticate",_,B);this.client.core.history.set(b,k);const U=await this.client.core.crypto.encode("",k,{type:kc,encoding:hs});$=nu(n,b,U)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:_,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:B}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:I,expiry:wt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(k){throw this.events.off(O,N),this.events.off(S,R),k}return await this.setProposal(I.id,I),await this.setAuthRequest(B,{request:Wt(Ve({},_),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:$??v,response:x}}),j(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Fs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(ia.no_internet_connection),m}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(ia.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Qe.relay;a===Qe.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=vu(c),d={type:Wn,receiverPublicKey:c,senderPublicKey:u},h=[],p=[];for(const m of s){if(!await Lm({cacao:m,projectId:this.client.core.projectId})){i.setError(ia.invalid_cacao);const E=ze("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:E,encodeOpts:d}),new Error(E.message)}i.addTrace(Fs.cacaos_verified);const{p:w}=m,b=bu(w.resources),v=[Vh(w.iss)],C=ju(w.iss);if(b){const E=Bm(b),y=Fm(b);h.push(...E),v.push(...y)}for(const E of v)p.push(`${E}:${C}`)}const f=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Fs.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:f,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:gt(Ui),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:cy([...new Set(h)],[...new Set(p)]),transportType:a},i.addTrace(Fs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:a})}catch(m){throw i.setError(ia.subscribe_authenticated_session_topic_failure),m}i.addTrace(Fs.subscribe_authenticated_session_topic_success),await this.client.session.set(f,g),i.addTrace(Fs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Fs.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(ia.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),j(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Qe.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=vu(o),u={type:Wn,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:wt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,ze("USER_DISCONNECTED"))}),j(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return Zv(n,s)}),j(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),j(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),j(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,ze("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Vy).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,ze("USER_DISCONNECTED"))}),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ln.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),j(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Bs.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ze("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),j(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=ln.idle,this.client.events.emit("session_request_expire",{id:r}))}),j(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),j(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),j(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,gt(wt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),j(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Qe.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),j(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||gt(wt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),j(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d}=r,h=Es(s,i,c);let p;const f=!!l;try{const w=f?hs:Qr;p=await this.client.core.crypto.encode(n,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),w}let g;if(UM.includes(s)){const w=wn(JSON.stringify(h)),b=wn(p);g=await this.client.core.verify.register({id:b,decryptedId:w})}const m=wt[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(n,h),f){const w=nu(l,n,p);await global.Linking.openURL(w,this.client.name)}else{const w=wt[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=Wt(Ve({},d),{correlationId:h.id}),u?(w.internal=Wt(Ve({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,p,w)):this.client.core.relayer.publish(n,p,w).catch(b=>this.client.logger.error(b))}return h.id}),j(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=Nl(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?hs:Qr;l=await this.client.core.crypto.encode(s,u,Wt(Ve({},a||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),f}let h,p;try{h=await this.client.core.history.get(s,n);const f=h.request;try{this.shouldSetTVF(f.method,f.params)&&(p=this.getTVFParams(n,f.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),f}if(d){const f=nu(c,s,l);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,g=wt[f].res;g.tvf=Wt(Ve({},p),{correlationId:n}),o?(g.internal=Wt(Ve({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,g)):this.client.core.relayer.publish(s,l,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(u)}),j(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=Pl(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?hs:Qr;l=await this.client.core.crypto.encode(s,u,Wt(Ve({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let h;try{h=await this.client.core.history.get(s,n)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),p}if(d){const p=nu(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,f=a||wt[p].res;this.client.core.relayer.publish(s,l,f)}await this.client.core.history.resolve(u)}),j(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;ds(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ds(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),j(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),j(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),j(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ln.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ln.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ln.idle}),j(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),j(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),j(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=G("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),j(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),j(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(Un.proposal_listener_not_found)),this.isValidConnect(Ve({},s.params));const l=a.expiryTimestamp||gt(wt.wc_sessionPropose.req.ttl),d=Ve({id:c,pairingTopic:n,expiryTimestamp:l},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:wn(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u==null||u.addTrace(dn.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:wt.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),j(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(fn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(Rr(n)){await this.client.proposal.delete(i,ze("USER_DISCONNECTED"));const o=Le("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),j(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:h}=n.params,p=[...this.pendingSessions.values()].find(m=>m.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const f=this.client.proposal.get(p.proposalId),g=Wt(Ve(Ve(Ve({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Qe.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Le("session_connect",p.proposalId),{session:g}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),j(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;fn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Le("session_approve",s),{})):Rr(n)&&(await this.client.session.delete(r,ze("USER_DISCONNECTED")),this.events.emit(Le("session_approve",s),{error:n.error}))}),j(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=na.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:ze("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ve({topic:r},s));try{na.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw na.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),j(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),j(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=Le("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fn(n)?this.events.emit(Le("session_update",s),{}):Rr(n)&&this.events.emit(Le("session_update",s),{error:n.error})}),j(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,gt(Ui)),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),j(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=Le("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fn(n)?this.events.emit(Le("session_extend",s),{}):Rr(n)&&this.events.emit(Le("session_extend",s),{error:n.error})}),j(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),j(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=Le("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);fn(n)?this.events.emit(Le("session_ping",s),{}):Rr(n)&&this.events.emit(Le("session_ping",s),{error:n.error})},500)}),j(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(_t.publish,async()=>{i(await this.deleteSession({topic:r,id:s}))})}),this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ze("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),j(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:d,params:h}=a;try{await this.isValidRequest(Ve({topic:o},h));const p=this.client.session.get(o),f=await this.getVerifyContext({attestationId:c,hash:wn(JSON.stringify(Es("wc_sessionRequest",h,d))),encryptedId:u,metadata:p.peer.metadata,transportType:l}),g={id:d,topic:o,params:h,verifyContext:f};await this.setPendingSessionRequest(g),l===Qe.link_mode&&(n=p.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(p){await this.sendError({id:d,topic:o,error:p}),this.client.logger.error(p)}}),j(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=Le("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fn(n)?this.events.emit(Le("session_request",s),{result:n.result}):Rr(n)&&this.events.emit(Le("session_request",s),{error:n.error})}),j(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=na.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Ve({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),na.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),j(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),fn(n)?this.events.emit(Le("session_request",s),{result:n.result}):Rr(n)&&this.events.emit(Le("session_request",s),{error:n.error})}),j(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:wn(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),p={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:c}),c===Qe.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Wn,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:p,rpcOpts:wt.wc_sessionAuthenticate.autoReject,appLink:h})}}),j(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),j(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ln.idle,this.processSessionRequestQueue()},V.toMiliseconds(this.requestQueueDelay))}),j(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Le("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Le("session_request",i.request.id),{error:n})})}),j(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ln.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ln.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),j(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),j(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Es("wc_sessionPropose",Wt(Ve({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),j(this,"isValidConnect",async r=>{if(!ar(r)){const{message:u}=G("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(Rt(n)||await this.isValidPairingTopic(n),!u5(c)){const{message:u}=G("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!Rt(s)&&Va(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Rt(i)&&Va(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Rt(o)||this.validateSessionProps(o,"sessionProperties"),!Rt(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),j(this,"validateNamespaces",(r,n)=>{const s=c5(r,"connect()",n);if(s)throw new Error(s.message)}),j(this,"isValidApprove",async r=>{if(!ar(r))throw new Error(G("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=Dd(s,"approve()");if(u)throw new Error(u.message);const l=dy(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!dt(i,!0)){const{message:d}=G("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Rt(o)||this.validateSessionProps(o,"sessionProperties"),!Rt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),j(this,"isValidReject",async r=>{if(!ar(r)){const{message:i}=G("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!d5(s)){const{message:i}=G("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),j(this,"isValidSessionSettleRequest",r=>{if(!ar(r)){const{message:u}=G("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!_E(n)){const{message:u}=G("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=r5(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Dd(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ds(o)){const{message:u}=G("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),j(this,"isValidUpdate",async r=>{if(!ar(r)){const{message:c}=G("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=Dd(s,"update()");if(o)throw new Error(o.message);const a=dy(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),j(this,"isValidExtend",async r=>{if(!ar(r)){const{message:s}=G("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),j(this,"isValidRequest",async r=>{if(!ar(r)){const{message:c}=G("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!ly(a,i)){const{message:c}=G("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!h5(s)){const{message:c}=G("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!g5(a,i,s.method)){const{message:c}=G("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!b5(o,jd)){const{message:c}=G("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${jd.min} and ${jd.max}`);throw new Error(c)}}),j(this,"isValidRespond",async r=>{var n;if(!ar(r)){const{message:o}=G("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!f5(i)){const{message:o}=G("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),j(this,"isValidPing",async r=>{if(!ar(r)){const{message:s}=G("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),j(this,"isValidEmit",async r=>{if(!ar(r)){const{message:a}=G("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!ly(o,i)){const{message:a}=G("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!p5(s)){const{message:a}=G("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!m5(o,i,s.name)){const{message:a}=G("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),j(this,"isValidDisconnect",async r=>{if(!ar(r)){const{message:s}=G("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),j(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!dt(s,!1))throw new Error("uri is required parameter");if(!dt(i,!1))throw new Error("domain is required parameter");if(!dt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>so(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=so(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),j(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||_a,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Qe.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),j(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=G("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),j(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),j(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),j(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=G("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),j(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,d,h;return!r||n!==Qe.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r==null?void 0:r.redirect)==null?void 0:l.universal)!==void 0&&((d=r==null?void 0:r.redirect)==null?void 0:d.universal)!==""&&((h=r==null?void 0:r.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),j(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r==null?void 0:r.redirect)==null?void 0:s.universal:void 0}),j(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=Tm(r,"topic")||"",s=decodeURIComponent(Tm(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Qe.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),j(this,"registerLinkModeListeners",async()=>{var r;if(ap()||$s()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),j(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:s}=n;return Object.keys(Ky).includes(s.method)}),j(this,"getTVFParams",(r,n,s)=>{var i,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,s);return Wt(Ve({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(i=n.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),j(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),j(this,"extractTxHashesFromResult",(r,n)=>{try{const s=Ky[r];if(typeof n=="string")return[n];const i=n[s.key];if(Is(i))return r==="solana_signAllTransactions"?i.map(o=>GD(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_t.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(_u)?this.client.auth.authKeys.get(_u):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Qe.link_mode?hs:Qr});yp(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:wn(n)})):Tl(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Tr.expired,async e=>{const{topic:r,id:n}=jv(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,G("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,G("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Gs.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Gs.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!dt(e,!1)){const{message:r}=G("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(ds(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=G("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!dt(e,!1)){const{message:r}=G("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(ds(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=G("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=G("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(dt(e,!1)){const{message:r}=G("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=G("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!l5(e)){const{message:r}=G("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(ds(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=G("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class KM extends Ni{constructor(e,r){super(e,r,RM,wp),this.core=e,this.logger=r}}let YM=class extends Ni{constructor(e,r){super(e,r,DM,wp),this.core=e,this.logger=r}};class ZM extends Ni{constructor(e,r){super(e,r,$M,wp,n=>n.id),this.core=e,this.logger=r}}class JM extends Ni{constructor(e,r){super(e,r,BM,Ol,()=>_u),this.core=e,this.logger=r}}class QM extends Ni{constructor(e,r){super(e,r,FM,Ol),this.core=e,this.logger=r}}class XM extends Ni{constructor(e,r){super(e,r,jM,Ol,n=>n.id),this.core=e,this.logger=r}}var eL=Object.defineProperty,tL=(t,e,r)=>e in t?eL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qd=(t,e,r)=>tL(t,typeof e!="symbol"?e+"":e,r);class rL{constructor(e,r){this.core=e,this.logger=r,qd(this,"authKeys"),qd(this,"pairingTopics"),qd(this,"requests"),this.authKeys=new JM(this.core,this.logger),this.pairingTopics=new QM(this.core,this.logger),this.requests=new XM(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var nL=Object.defineProperty,sL=(t,e,r)=>e in t?nL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ie=(t,e,r)=>sL(t,typeof e!="symbol"?e+"":e,r);let iL=class GE extends Fx{constructor(e){super(e),Ie(this,"protocol",HE),Ie(this,"version",WE),Ie(this,"name",Fd.name),Ie(this,"metadata"),Ie(this,"core"),Ie(this,"logger"),Ie(this,"events",new Lr.EventEmitter),Ie(this,"engine"),Ie(this,"session"),Ie(this,"proposal"),Ie(this,"pendingRequest"),Ie(this,"auth"),Ie(this,"signConfig"),Ie(this,"on",(n,s)=>this.events.on(n,s)),Ie(this,"once",(n,s)=>this.events.once(n,s)),Ie(this,"off",(n,s)=>this.events.off(n,s)),Ie(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),Ie(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Ie(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Ie(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),Ie(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),Ie(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Fd.name,this.metadata=oD(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ac(Lo({level:(e==null?void 0:e.logger)||Fd.logger}));this.core=(e==null?void 0:e.core)||new OM(e),this.logger=zt(r,this.name),this.session=new YM(this.core,this.logger),this.proposal=new KM(this.core,this.logger),this.pendingRequest=new ZM(this.core,this.logger),this.engine=new GM(this),this.auth=new rL(this.core,this.logger)}static async init(e){const r=new GE(e);return await r.initialize(),r}get context(){return hr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},V.toMiliseconds(V.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var iu={exports:{}},Zy;function oL(){return Zy||(Zy=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof yn<"u"&&yn,n=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof yn<"u"&&yn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(S){return S&&l.indexOf(Object.prototype.toString.call(S))>-1};function h(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function p(S){return typeof S!="string"&&(S=String(S)),S}function f(S){var N={next:function(){var R=S.shift();return{done:R===void 0,value:R}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(S){this.map={},S instanceof g?S.forEach(function(N,R){this.append(R,N)},this):Array.isArray(S)?S.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(N){this.append(N,S[N])},this)}g.prototype.append=function(S,N){S=h(S),N=p(N);var R=this.map[S];this.map[S]=R?R+", "+N:N},g.prototype.delete=function(S){delete this.map[h(S)]},g.prototype.get=function(S){return S=h(S),this.has(S)?this.map[S]:null},g.prototype.has=function(S){return this.map.hasOwnProperty(h(S))},g.prototype.set=function(S,N){this.map[h(S)]=p(N)},g.prototype.forEach=function(S,N){for(var R in this.map)this.map.hasOwnProperty(R)&&S.call(N,this.map[R],R,this)},g.prototype.keys=function(){var S=[];return this.forEach(function(N,R){S.push(R)}),f(S)},g.prototype.values=function(){var S=[];return this.forEach(function(N){S.push(N)}),f(S)},g.prototype.entries=function(){var S=[];return this.forEach(function(N,R){S.push([R,N])}),f(S)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function w(S){return new Promise(function(N,R){S.onload=function(){N(S.result)},S.onerror=function(){R(S.error)}})}function b(S){var N=new FileReader,R=w(N);return N.readAsArrayBuffer(S),R}function v(S){var N=new FileReader,R=w(N),$=/charset=([A-Za-z0-9_-]+)/.exec(S.type),k=$?$[1]:"utf-8";return N.readAsText(S,k),R}function C(S){for(var N=new Uint8Array(S),R=new Array(N.length),$=0;$<N.length;$++)R[$]=String.fromCharCode(N[$]);return R.join("")}function E(S){if(S.slice)return S.slice(0);var N=new Uint8Array(S.byteLength);return N.set(new Uint8Array(S)),N.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&u(S)?(this._bodyArrayBuffer=E(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||d(S))?this._bodyArrayBuffer=E(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=m(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=m(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=m(this);if(S)return S;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function P(S){var N=S.toUpperCase();return _.indexOf(N)>-1?N:S}function I(S,N){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var R=N.body;if(S instanceof I){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,N.headers||(this.headers=new g(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!R&&S._bodyInit!=null&&(R=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=P(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function x(S){var N=new FormData;return S.trim().split("&").forEach(function(R){if(R){var $=R.split("="),k=$.shift().replace(/\+/g," "),U=$.join("=").replace(/\+/g," ");N.append(decodeURIComponent(k),decodeURIComponent(U))}}),N}function D(S){var N=new g,R=S.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var k=$.split(":"),U=k.shift().trim();if(U){var W=k.join(":").trim();try{N.append(U,W)}catch(Y){console.warn("Response "+Y.message)}}}),N}y.call(I.prototype);function M(S,N){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(S)}y.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},M.error=function(){var S=new M(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var B=[301,302,303,307,308];M.redirect=function(S,N){if(B.indexOf(N)===-1)throw new RangeError("Invalid status code");return new M(null,{status:N,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,R){this.message=N,this.name=R;var $=Error(N);this.stack=$.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function O(S,N){return new Promise(function(R,$){var k=new I(S,N);if(k.signal&&k.signal.aborted)return $(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function W(){U.abort()}U.onload=function(){var K={statusText:U.statusText,headers:D(U.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(U.status<200||U.status>599)?K.status=200:K.status=U.status,K.url="responseURL"in U?U.responseURL:K.headers.get("X-Request-URL");var ae="response"in U?U.response:U.responseText;setTimeout(function(){R(new M(ae,K))},0)},U.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){$(new o.DOMException("Aborted","AbortError"))},0)};function Y(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(U.open(k.method,Y(k.url),!0),k.credentials==="include"?U.withCredentials=!0:k.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var ie=[];Object.getOwnPropertyNames(N.headers).forEach(function(K){ie.push(h(K)),U.setRequestHeader(K,p(N.headers[K]))}),k.headers.forEach(function(K,ae){ie.indexOf(ae)===-1&&U.setRequestHeader(ae,K)})}else k.headers.forEach(function(K,ae){U.setRequestHeader(ae,K)});k.signal&&(k.signal.addEventListener("abort",W),U.onreadystatechange=function(){U.readyState===4&&k.signal.removeEventListener("abort",W)}),U.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return O.polyfill=!0,a.fetch||(a.fetch=O,a.Headers=g,a.Request=I,a.Response=M),o.Headers=g,o.Request=I,o.Response=M,o.fetch=O,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(iu,iu.exports)),iu.exports}var aL=oL();const Jy=nl(aL);var cL=Object.defineProperty,uL=Object.defineProperties,lL=Object.getOwnPropertyDescriptors,Qy=Object.getOwnPropertySymbols,dL=Object.prototype.hasOwnProperty,hL=Object.prototype.propertyIsEnumerable,Xy=(t,e,r)=>e in t?cL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ew=(t,e)=>{for(var r in e||(e={}))dL.call(e,r)&&Xy(t,r,e[r]);if(Qy)for(var r of Qy(e))hL.call(e,r)&&Xy(t,r,e[r]);return t},tw=(t,e)=>uL(t,lL(e));const fL={Accept:"application/json","Content-Type":"application/json"},pL="POST",rw={headers:fL,method:pL},nw=10;let sn=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Lr.EventEmitter,this.isAvailable=!1,this.registering=!1,!wy(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Yn(e),n=await(await Jy(this.url,tw(ew({},rw),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!wy(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Yn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Jy(e,tw(ew({},rw),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?hi(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=Pl(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return IE(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>nw&&this.events.setMaxListeners(nw)}};const sw="error",gL="wss://relay.walletconnect.org",mL="wc",yL="universal_provider",ou=`${mL}@2:${yL}:`,KE="https://rpc.walletconnect.org/v1/",Zi="generic",wL=`${KE}bundler`,Fr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function bL(){}function bp(t){return t==null||typeof t!="object"&&typeof t!="function"}function vp(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vL(t){if(bp(t))return t;if(Array.isArray(t)||vp(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function iw(t){return typeof t=="object"&&t!==null}function YE(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function ZE(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const EL="[object RegExp]",JE="[object String]",QE="[object Number]",XE="[object Boolean]",e_="[object Arguments]",_L="[object Symbol]",CL="[object Date]",AL="[object Map]",IL="[object Set]",SL="[object Array]",NL="[object ArrayBuffer]",PL="[object Object]",TL="[object DataView]",xL="[object Uint8Array]",OL="[object Uint8ClampedArray]",RL="[object Uint16Array]",DL="[object Uint32Array]",kL="[object Int8Array]",$L="[object Int16Array]",UL="[object Int32Array]",ML="[object Float32Array]",LL="[object Float64Array]";function BL(t,e){return ro(t,void 0,t,new Map,e)}function ro(t,e,r,n=new Map,s=void 0){const i=s==null?void 0:s(t,e,r,n);if(i!=null)return i;if(bp(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=ro(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,ro(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(ro(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(vp(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=ro(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Ks(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Ks(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Ks(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Ks(o,t,r,n,s),o}if(typeof t=="object"&&FL(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Ks(o,t,r,n,s),o}return t}function Ks(t,e,r=t,n,s){const i=[...Object.keys(e),...YE(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=ro(e[a],a,r,n,s))}}function FL(t){switch(ZE(t)){case e_:case SL:case NL:case TL:case XE:case CL:case ML:case LL:case kL:case $L:case UL:case AL:case QE:case PL:case EL:case IL:case JE:case _L:case xL:case OL:case RL:case DL:return!0;default:return!1}}function jL(t,e){return BL(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case QE:case JE:case XE:{const o=new t.constructor(t==null?void 0:t.valueOf());return Ks(o,t),o}case e_:{const o={};return Ks(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function ow(t){return jL(t)}function aw(t){return t!==null&&typeof t=="object"&&ZE(t)==="[object Arguments]"}function qL(t){return vp(t)}function zL(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function HL(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=gf(s,o,n,new Map)}return s}function gf(t,e,r,n){if(bp(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return vL(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...YE(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(aw(a)&&(a={...a}),aw(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=ow(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const p=d[h];l[p]=c[p]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||iw(c)&&iw(a)?t[o]=gf(c,a,r,n):c==null&&zL(a)?t[o]=gf({},a,r,n):c==null&&qL(a)?t[o]=ow(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function WL(t,...e){return HL(t,...e,bL)}var VL=Object.defineProperty,GL=Object.defineProperties,KL=Object.getOwnPropertyDescriptors,cw=Object.getOwnPropertySymbols,YL=Object.prototype.hasOwnProperty,ZL=Object.prototype.propertyIsEnumerable,uw=(t,e,r)=>e in t?VL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,au=(t,e)=>{for(var r in e||(e={}))YL.call(e,r)&&uw(t,r,e[r]);if(cw)for(var r of cw(e))ZL.call(e,r)&&uw(t,r,e[r]);return t},JL=(t,e)=>GL(t,KL(e));function Er(t,e,r){var n;const s=so(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${KE}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function Pi(t){return t.includes(":")?t.split(":")[1]:t}function t_(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function QL(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function zd(t={},e={}){const r=lw(t),n=lw(e);return WL(r,n)}function lw(t){var e,r,n,s;const i={};if(!Va(t))return i;for(const[o,a]of Object.entries(t)){const c=pp(o)?[o]:a.chains,u=a.methods||[],l=a.events||[],d=a.rpcMap||{},h=ga(o);i[h]=JL(au(au({},i[h]),a),{chains:wu(c,(e=i[h])==null?void 0:e.chains),methods:wu(u,(r=i[h])==null?void 0:r.methods),events:wu(l,(n=i[h])==null?void 0:n.events),rpcMap:au(au({},d),(s=i[h])==null?void 0:s.rpcMap)})}return i}function dw(t){return t.includes(":")?t.split(":")[2]:t}function hw(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=pp(r)?[r]:n.chains?n.chains:t_(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function Hd(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const r_={},$e=t=>r_[t],Wd=(t,e)=>{r_[t]=e};var XL=Object.defineProperty,eB=(t,e,r)=>e in t?XL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mi=(t,e,r)=>eB(t,typeof e!="symbol"?e+"":e,r);class tB{constructor(e){Mi(this,"name","polkadot"),Mi(this,"client"),Mi(this,"httpProviders"),Mi(this,"events"),Mi(this,"namespace"),Mi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Pi(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var rB=Object.defineProperty,nB=Object.defineProperties,sB=Object.getOwnPropertyDescriptors,fw=Object.getOwnPropertySymbols,iB=Object.prototype.hasOwnProperty,oB=Object.prototype.propertyIsEnumerable,mf=(t,e,r)=>e in t?rB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pw=(t,e)=>{for(var r in e||(e={}))iB.call(e,r)&&mf(t,r,e[r]);if(fw)for(var r of fw(e))oB.call(e,r)&&mf(t,r,e[r]);return t},gw=(t,e)=>nB(t,sB(e)),Li=(t,e,r)=>mf(t,typeof e!="symbol"?e+"":e,r);class aB{constructor(e){Li(this,"name","eip155"),Li(this,"client"),Li(this,"chainId"),Li(this,"namespace"),Li(this,"httpProviders"),Li(this,"events"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Er(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(Pi(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s;const i=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((s=o==null?void 0:o.sessionProperties)==null?void 0:s.capabilities)||{};if(a!=null&&a[i])return a==null?void 0:a[i];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:gw(pw({},o.sessionProperties||{}),{capabilities:gw(pw({},a||{}),{[i]:c})})})}catch(u){console.warn("Failed to update session with capabilities",u)}return c}async getCallStatus(e){var r,n;const s=this.client.session.get(e.topic),i=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Es("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${wL}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var cB=Object.defineProperty,uB=(t,e,r)=>e in t?cB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bi=(t,e,r)=>uB(t,typeof e!="symbol"?e+"":e,r);class lB{constructor(e){Bi(this,"name","solana"),Bi(this,"client"),Bi(this,"httpProviders"),Bi(this,"events"),Bi(this,"namespace"),Bi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Pi(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var dB=Object.defineProperty,hB=(t,e,r)=>e in t?dB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fi=(t,e,r)=>hB(t,typeof e!="symbol"?e+"":e,r);class fB{constructor(e){Fi(this,"name","cosmos"),Fi(this,"client"),Fi(this,"httpProviders"),Fi(this,"events"),Fi(this,"namespace"),Fi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Pi(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var pB=Object.defineProperty,gB=(t,e,r)=>e in t?pB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ji=(t,e,r)=>gB(t,typeof e!="symbol"?e+"":e,r);class mB{constructor(e){ji(this,"name","algorand"),ji(this,"client"),ji(this,"httpProviders"),ji(this,"events"),ji(this,"namespace"),ji(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Er(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Br(new sn(n,$e("disableProviderPing")))}}var yB=Object.defineProperty,wB=(t,e,r)=>e in t?yB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qi=(t,e,r)=>wB(t,typeof e!="symbol"?e+"":e,r);class bB{constructor(e){qi(this,"name","cip34"),qi(this,"client"),qi(this,"httpProviders"),qi(this,"events"),qi(this,"namespace"),qi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),s=Pi(r);e[s]=this.createHttpProvider(s,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var vB=Object.defineProperty,EB=(t,e,r)=>e in t?vB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zi=(t,e,r)=>EB(t,typeof e!="symbol"?e+"":e,r);class _B{constructor(e){zi(this,"name","elrond"),zi(this,"client"),zi(this,"httpProviders"),zi(this,"events"),zi(this,"namespace"),zi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Pi(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var CB=Object.defineProperty,AB=(t,e,r)=>e in t?CB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hi=(t,e,r)=>AB(t,typeof e!="symbol"?e+"":e,r);class IB{constructor(e){Hi(this,"name","multiversx"),Hi(this,"client"),Hi(this,"httpProviders"),Hi(this,"events"),Hi(this,"namespace"),Hi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=Pi(r);e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var SB=Object.defineProperty,NB=(t,e,r)=>e in t?SB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wi=(t,e,r)=>NB(t,typeof e!="symbol"?e+"":e,r);class PB{constructor(e){Wi(this,"name","near"),Wi(this,"client"),Wi(this,"httpProviders"),Wi(this,"events"),Wi(this,"namespace"),Wi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Er(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace);return typeof n>"u"?void 0:new Br(new sn(n,$e("disableProviderPing")))}}var TB=Object.defineProperty,xB=(t,e,r)=>e in t?TB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vi=(t,e,r)=>xB(t,typeof e!="symbol"?e+"":e,r);class OB{constructor(e){Vi(this,"name","tezos"),Vi(this,"client"),Vi(this,"httpProviders"),Vi(this,"events"),Vi(this,"namespace"),Vi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Er(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace);return typeof n>"u"?void 0:new Br(new sn(n))}}var RB=Object.defineProperty,DB=(t,e,r)=>e in t?RB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gi=(t,e,r)=>DB(t,typeof e!="symbol"?e+"":e,r);class kB{constructor(e){Gi(this,"name",Zi),Gi(this,"client"),Gi(this,"httpProviders"),Gi(this,"events"),Gi(this,"namespace"),Gi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{const i=so(s);n[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Er(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Br(new sn(n,$e("disableProviderPing")))}}var $B=Object.defineProperty,UB=Object.defineProperties,MB=Object.getOwnPropertyDescriptors,mw=Object.getOwnPropertySymbols,LB=Object.prototype.hasOwnProperty,BB=Object.prototype.propertyIsEnumerable,yf=(t,e,r)=>e in t?$B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cu=(t,e)=>{for(var r in e||(e={}))LB.call(e,r)&&yf(t,r,e[r]);if(mw)for(var r of mw(e))BB.call(e,r)&&yf(t,r,e[r]);return t},Vd=(t,e)=>UB(t,MB(e)),Ir=(t,e,r)=>yf(t,typeof e!="symbol"?e+"":e,r);let FB=class n_{constructor(e){Ir(this,"client"),Ir(this,"namespaces"),Ir(this,"optionalNamespaces"),Ir(this,"sessionProperties"),Ir(this,"scopedProperties"),Ir(this,"events",new Jf),Ir(this,"rpcProviders",{}),Ir(this,"session"),Ir(this,"providerOpts"),Ir(this,"logger"),Ir(this,"uri"),Ir(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ac(Lo({level:(e==null?void 0:e.logger)||sw})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new n_(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:cu({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,Nl(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ze("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=hw(this.session.namespaces);this.namespaces=zd(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const s=await n();this.session=s;const i=hw(s.namespaces);return this.namespaces=zd(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e),i=this.getProvider(n);i.name===Zi?i.setDefaultChain(`${n}:${s}`,r):i.setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Is(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await iL.init({core:this.providerOpts.core,logger:this.providerOpts.logger||sw,relayUrl:this.providerOpts.relayUrl||gL,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>ga(r)))];Wd("client",this.client),Wd("events",this.events),Wd("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=QL(r,this.session),s=t_(n),i=zd(this.namespaces,this.optionalNamespaces),o=Vd(cu({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new aB({namespace:o});break;case"algorand":this.rpcProviders[r]=new mB({namespace:o});break;case"solana":this.rpcProviders[r]=new lB({namespace:o});break;case"cosmos":this.rpcProviders[r]=new fB({namespace:o});break;case"polkadot":this.rpcProviders[r]=new tB({namespace:o});break;case"cip34":this.rpcProviders[r]=new bB({namespace:o});break;case"elrond":this.rpcProviders[r]=new _B({namespace:o});break;case"multiversx":this.rpcProviders[r]=new IB({namespace:o});break;case"near":this.rpcProviders[r]=new PB({namespace:o});break;case"tezos":this.rpcProviders[r]=new OB({namespace:o});break;default:this.rpcProviders[Zi]?this.rpcProviders[Zi].updateNamespace(o):this.rpcProviders[Zi]=new kB({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Is(o)&&this.events.emit("accountsChanged",o.map(dw))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=ga(o),u=Hd(o)!==Hd(a)?`${c}:${Hd(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Vd(cu({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Vd(cu({},ze("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Fr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Zi]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:s,scopedProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>ga(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=ga(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(n,s),this.events.emit("chainChanged",s);const i=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(dw);if(!Is(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${ou}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${ou}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${ou}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(ou)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};var Po={};const jB="https://secure.walletconnect.org/sdk",qB=(typeof process<"u"&&typeof Po<"u"?Po.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||jB,zB=(typeof process<"u"&&typeof Po<"u"?Po.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",HB=(typeof process<"u"&&typeof Po<"u"?Po.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ne={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Dt={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Hs=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),pt=tt({...Hs}),WB={state:pt,subscribeKey(t,e){return qt(pt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ue.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){pt.message=Hs.message,pt.variant=Hs.variant,pt.svg=Hs.svg,pt.open=Hs.open,pt.autoClose=Hs.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Hs.autoClose}){pt.open?(pt.open=!1,setTimeout(()=>{pt.message=t,pt.variant=r,pt.svg=e,pt.open=!0,pt.autoClose=n},150)):(pt.message=t,pt.variant=r,pt.svg=e,pt.open=!0,pt.autoClose=n)}},Jr=WB,Aa={getSIWX(){return q.state.siwx},async initializeIfEnabled(){var i;const t=q.state.siwx,e=T.getActiveCaipAddress();if(!(t&&e))return;const[r,n,s]=e.split(":");if(T.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,s)).length)return;await ut.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),et.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=he._getClient())==null?void 0:i.disconnect().catch(console.error)),Se.reset("Connect"),Jr.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=q.state.siwx,e=ue.getPlainAddress(T.getActiveCaipAddress()),r=T.getActiveCaipNetwork(),n=he._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),i=s.toString();te.getConnectorId(r.chainNamespace)===z.CONNECTOR_ID.AUTH&&Se.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ut.close(),et.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ut.state.open||Se.state.view==="ApproveTransaction")&&await ut.open({view:"SIWXSignMessage"}),i.isSmartAccount?Jr.showError("This application might not support Smart Accounts"):Jr.showError("Signature declined"),et.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await he.disconnect():ut.close(),Se.reset("Connect"),et.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=q.state.siwx,e=ue.getPlainAddress(T.getActiveCaipAddress()),r=T.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=Se.state.view==="ApproveTransaction",n=Se.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var a,c,u;const n=Aa.getSIWX(),s=new Set(e.map(l=>l.split(":")[0]));if(!n||s.size!==1||!s.has("eip155"))return!1;const i=await n.createMessage({chainId:((a=T.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:r,chains:[i.chainId,...e.filter(l=>l!==i.chainId)]});if(Jr.showLoading("Authenticating...",{autoClose:!1}),se.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(u=o==null?void 0:o.auths)!=null&&u.length){const l=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await n.setSessions(l),et.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Aa.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),et.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Aa.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Jr.hide()}}return!0},getSIWXEventProperties(){var e,r;const t=T.state.activeChain;return{network:((e=T.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((r=se.state.preferredAccountTypes)==null?void 0:r[t])===Dt.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Ze=tt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),VB={state:Ze,subscribe(t){return Qt(Ze,()=>t(Ze))},setLastNetworkInView(t){Ze.lastNetworkInView=t},async fetchTransactions(t,e){var r,n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Ze.loading=!0;try{const s=await pe.fetchTransactions({account:t,cursor:Ze.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),i=ya.filterSpamTransactions(s.data),o=ya.filterByConnectedChain(i),a=[...Ze.transactions,...o];Ze.loading=!1,e==="coinbase"?Ze.coinbaseTransactions=ya.groupTransactionsByYearAndMonth(Ze.coinbaseTransactions,s.data):(Ze.transactions=a,Ze.transactionsByYear=ya.groupTransactionsByYearAndMonth(Ze.transactionsByYear,o)),Ze.empty=a.length===0,Ze.next=s.next?s.next:void 0}catch{const i=T.state.activeChain;et.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:q.state.projectId,cursor:Ze.next,isSmartAccount:((n=se.state.preferredAccountTypes)==null?void 0:n[i])===Dt.ACCOUNT_TYPES.SMART_ACCOUNT}}),Jr.showError("Failed to fetch transactions"),Ze.loading=!1,Ze.empty=!0,Ze.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var s;return((s=n.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Ze.next=void 0},resetTransactions(){Ze.transactions=[],Ze.transactionsByYear={},Ze.lastNetworkInView=void 0,Ze.loading=!1,Ze.empty=!1,Ze.next=void 0}},ya=Mr(VB,"API_ERROR"),Ge=tt({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let js;const GB={state:Ge,subscribeKey(t,e){return qt(Ge,t,e)},_getClient(){return Ge._client},setClient(t){Ge._client=di(t)},async connectWalletConnect(){var t,e,r,n;if(ue.isTelegram()||ue.isSafari()&&ue.isIos()){if(js){await js,js=void 0;return}if(!ue.isPairingExpired(Ge==null?void 0:Ge.wcPairingExpiry)){const s=Ge.wcUri;Ge.wcUri=s;return}js=(e=(t=he._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),he.state.status="connecting",await js,js=void 0,Ge.wcPairingExpiry=void 0,he.state.status="connected"}else await((n=(r=he._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,s;await((s=(n=he._getClient())==null?void 0:n.connectExternal)==null?void 0:s.call(n,t)),r&&T.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=he._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||T.state.activeChain;e&&te.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var n;ut.setLoading(!0,T.state.activeChain);const r=te.getAuthConnector();r&&(se.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),J.setPreferredAccountTypes(se.state.preferredAccountTypes??{[e]:t}),await he.reconnectExternal(r),ut.setLoading(!1,T.state.activeChain),et.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=he._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=he._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=he._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=he._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=he._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=he._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=he._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=he._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=he._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=he._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=he._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=he._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){Ge.wcUri=void 0,Ge.wcPairingExpiry=void 0,Ge.wcLinking=void 0,Ge.recentWallet=void 0,Ge.status="disconnected",ya.resetTransactions(),J.deleteWalletConnectDeepLink()},resetUri(){Ge.wcUri=void 0,Ge.wcPairingExpiry=void 0,js=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=he.state;t&&J.setWalletConnectDeepLink(t),e&&J.setAppKitRecent(e),et.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=Se.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){Ge.wcBasic=t},setUri(t){Ge.wcUri=t,Ge.wcPairingExpiry=ue.getPairingExpiry()},setWcLinking(t){Ge.wcLinking=t},setWcError(t){Ge.wcError=t,Ge.buffering=!1},setRecentWallet(t){Ge.recentWallet=t},setBuffering(t){Ge.buffering=t},setStatus(t){Ge.status=t},async disconnect(t){try{ut.setLoading(!0,t),await Aa.clearSessions(),await T.disconnect(t),ut.setLoading(!1,t),te.setFilterByNamespace(void 0)}catch(e){throw new Ba("Failed to disconnect","INTERNAL_SDK_ERROR",e)}},setConnections(t,e){Ge.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:r}){if(te.state.activeConnectorIds[r]===t.connectorId){const i=T.state.activeCaipNetwork;if(i){const o=`${r}:${i.id}:${e}`;se.setCaipAddress(o,r)}else console.warn(`No current network found for namespace "${r}"`)}else{const i=te.getConnector(t.connectorId);i?he.connectExternal(i,r):console.warn(`No connector found for namespace "${r}"`)}}},he=Mr(GB),Ki=tt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),En={state:Ki,subscribe(t){return Qt(Ki,()=>t(Ki))},subscribeOpen(t){return qt(Ki,"open",t)},set(t){Object.assign(Ki,{...Ki,...t})}},Gd={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return rl(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},yw={async getMyTokensWithBalance(t){const e=se.state.address,r=T.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,r);if(s)return this.filterLowQualityTokens(s)}const n=await pe.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const s=Gd.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await he.getCapabilities(t);if(!((n=(r=i==null?void 0:i[s])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await he.walletGetAssets({account:t,chainFilter:[s]});return Gd.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>Gd.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:T.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Fe=tt({tokenBalances:[],loading:!1}),KB={state:Fe,subscribe(t){return Qt(Fe,()=>t(Fe))},subscribeKey(t,e){return qt(Fe,t,e)},setToken(t){t&&(Fe.token=di(t))},setTokenAmount(t){Fe.sendTokenAmount=t},setReceiverAddress(t){Fe.receiverAddress=t},setReceiverProfileImageUrl(t){Fe.receiverProfileImageUrl=t},setReceiverProfileName(t){Fe.receiverProfileName=t},setNetworkBalanceInUsd(t){Fe.networkBalanceInUSD=t},setLoading(t){Fe.loading=t},async sendToken(){var t;try{switch(Ue.setLoading(!0),(t=T.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Ue.sendEvmToken();return;case"solana":await Ue.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ue.setLoading(!1)}},async sendEvmToken(){var r,n,s,i;const t=T.state.activeChain,e=(r=se.state.preferredAccountTypes)==null?void 0:r[t];if(!Ue.state.sendTokenAmount||!Ue.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ue.state.token)throw new Error("A token is required");(n=Ue.state.token)!=null&&n.address?(et.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ue.state.token.address,amount:Ue.state.sendTokenAmount,network:((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Ue.sendERC20Token({receiverAddress:Ue.state.receiverAddress,tokenAddress:Ue.state.token.address,sendTokenAmount:Ue.state.sendTokenAmount,decimals:Ue.state.token.quantity.decimals})):(et.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ue.state.token.symbol||"",amount:Ue.state.sendTokenAmount,network:((i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Ue.sendNativeToken({receiverAddress:Ue.state.receiverAddress,sendTokenAmount:Ue.state.sendTokenAmount,decimals:Ue.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Fe.loading=!0;const e=(i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=T.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=T.state.activeCaipAddress,s=n?ue.getPlainAddress(n):void 0;if(Fe.lastRetry&&!ue.isAllowedRetry(Fe.lastRetry,30*ft.ONE_SEC_MS))return Fe.loading=!1,[];try{if(s&&e&&r){const a=await yw.getMyTokensWithBalance();return Fe.tokenBalances=a,Fe.lastRetry=void 0,a}}catch(a){Fe.lastRetry=Date.now(),t==null||t(a),Jr.showError("Token Balance Unavailable")}finally{Fe.loading=!1}return[]},fetchNetworkBalance(){if(Fe.tokenBalances.length===0)return;const t=yw.mapBalancesToSwapTokens(Fe.tokenBalances);if(!t)return;const e=t.find(r=>r.address===T.getActiveNetworkTokenAddress());e&&(Fe.networkBalanceInUSD=e?_P.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Se.pushTransactionStack({view:null,goBack:!1});const e=t.receiverAddress,r=se.state.address,n=he.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await he.sendTransaction({chainNamespace:"eip155",to:e,address:r,data:"0x",value:n??BigInt(0)}),et.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=se.state.preferredAccountTypes)==null?void 0:i.eip155)===Dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Ue.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=he._getClient())==null||c.updateBalance("eip155"),Ue.resetSend()},async sendERC20Token(t){Se.pushTransactionStack({view:"Account",goBack:!1});const e=he.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(se.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=ue.getPlainAddress(t.tokenAddress);await he.writeContract({fromAddress:se.state.address,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:SP.getERC20Abi(r),chainNamespace:"eip155"}),Ue.resetSend()}},async sendSolanaToken(){var t;if(!Ue.state.sendTokenAmount||!Ue.state.receiverAddress)throw new Error("An amount and receiver address are required");Se.pushTransactionStack({view:"Account",goBack:!1}),await he.sendTransaction({chainNamespace:"solana",to:Ue.state.receiverAddress,value:Ue.state.sendTokenAmount}),(t=he._getClient())==null||t.updateBalance("solana"),Ue.resetSend()},resetSend(){Fe.token=void 0,Fe.sendTokenAmount=void 0,Fe.receiverAddress=void 0,Fe.receiverProfileImageUrl=void 0,Fe.receiverProfileName=void 0,Fe.loading=!1,Fe.tokenBalances=[]}},Ue=Mr(KB),Kd={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},uu={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Z=tt({chains:hP(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),YB={state:Z,subscribe(t){return Qt(Z,()=>{t(Z)})},subscribeKey(t,e){return qt(Z,t,e)},subscribeChainProp(t,e,r){let n;return Qt(Z.chains,()=>{var i;const s=r||Z.activeChain;if(s){const o=(i=Z.chains.get(s))==null?void 0:i[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:s}=J.getActiveNetworkProps(),i=e==null?void 0:e.find(l=>l.id.toString()===(n==null?void 0:n.toString())),a=t.find(l=>(l==null?void 0:l.namespace)===s)||(t==null?void 0:t[0]),c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=q.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(l=>l.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Z.noAdapters=!0),Z.noAdapters||(Z.activeChain=a==null?void 0:a.namespace,Z.activeCaipNetwork=i,T.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Z.activeChain&&En.set({activeChain:a==null?void 0:a.namespace})),u.forEach(l=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===l);T.state.chains.set(l,{namespace:l,networkState:tt({...uu,caipNetwork:d==null?void 0:d[0]}),accountState:tt(Kd),caipNetworks:d??[],...r}),T.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){var e,r;if(Z.activeChain===t){const n=Array.from(Z.chains.entries()).find(([s])=>s!==t);if(n){const s=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];s&&T.setActiveCaipNetwork(s)}}Z.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){Z.chains.set(t.namespace,{namespace:t.namespace,networkState:{...uu,caipNetwork:n[0]},accountState:Kd,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),T.setRequestedCaipNetworks((n==null?void 0:n.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=Z.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(s=>s.id===t.id)||n.push(t),Z.chains.set(t.chainNamespace,{...e,caipNetworks:n}),T.setRequestedCaipNetworks(n,t.chainNamespace),te.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var n,s,i;const r=Z.chains.get(t);if(r){const o=((n=Z.activeCaipNetwork)==null?void 0:n.id)===e,a=[...((s=r.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=r==null?void 0:r.caipNetworks)!=null&&i[0])&&T.setActiveCaipNetwork(r.caipNetworks[0]),Z.chains.set(t,{...r,caipNetworks:a}),T.setRequestedCaipNetworks(a||[],t),a.length===0&&te.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=Z.chains.get(t);r&&(r.networkState={...r.networkState||uu,...e},Z.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=Z.chains.get(t);if(n){const s={...n.accountState||Kd,...e};Z.chains.set(t,{...n,accountState:s}),(Z.chains.size===1||Z.activeChain===t)&&(e.caipAddress&&(Z.activeCaipAddress=e.caipAddress),se.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const r=Z.chains.get(t);if(r){const n={...r.networkState||uu,...e};Z.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){T.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&te.removeConnectorId(r)},setActiveNamespace(t){var n,s;Z.activeChain=t;const e=t?Z.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(Z.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Z.activeCaipNetwork=r,T.setChainNetworkData(t,{caipNetwork:r}),J.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),En.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,s,i;if(!t)return;Z.activeChain!==t.chainNamespace&&T.setIsSwitchingNamespace(!0);const e=Z.chains.get(t.chainNamespace);Z.activeChain=t.chainNamespace,Z.activeCaipNetwork=t,T.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?Z.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Z.activeCaipAddress=void 0,T.setAccountProp("caipAddress",Z.activeCaipAddress,t.chainNamespace),e&&se.replaceState(e.accountState),Ue.resetSend(),En.set({activeChain:Z.activeChain,selectedNetworkId:(i=Z.activeCaipNetwork)==null?void 0:i.caipNetworkId}),J.setActiveCaipNetworkId(t.caipNetworkId),!T.checkIfSupportedNetwork(t.chainNamespace)&&q.state.enableNetworkSwitch&&!q.state.allowUnsupportedChain&&!he.state.wcBasic&&T.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=Z.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==T.state.activeChain,r=(s=T.getNetworkData(t))==null?void 0:s.caipNetwork,n=T.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await T.switchActiveNetwork(n)},async switchActiveNetwork(t){var s;const e=T.state.chains.get(T.state.activeChain);!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Z.activeCaipNetwork)==null?void 0:o.id)}))&&Se.goBack();const n=T.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),et.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||Z.activeChain,r=Z.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||Z.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=Z.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var s;let r=Z.activeChain;if(e&&(r=e),!r)return;const n=(s=Z.chains.get(r))==null?void 0:s.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=Z.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=Z.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return ue.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return Z.chains.forEach(e=>{const r=T.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){T.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=T.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));te.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Z.chains.forEach(e=>{const r=T.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return Z.activeCaipNetwork},getActiveCaipAddress(){return Z.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=Z.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=T.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());T.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||Z.activeCaipNetwork,n=T.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(s=>s.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!Z.activeChain)return!0;const e=T.getRequestedCaipNetworks(Z.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){T.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=La.caipNetworkIdToNumber((n=Z.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=Z.activeChain;if(!e||!t)return!1;const r=T.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,s;const t=((n=Z.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((s=Z.activeCaipNetwork)==null?void 0:s.id)||1,r=ft.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){ut.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Z.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ft.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){T.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Z.activeCaipAddress=void 0,T.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),te.removeConnectorId(e)},async disconnect(t){const e=WP(t);try{Ue.resetSend();const r=await Promise.allSettled(e.map(async([s,i])=>{var o;try{const{caipAddress:a}=T.getAccountData(s)||{};a&&((o=i.connectionControllerClient)!=null&&o.disconnect)&&await i.connectionControllerClient.disconnect(s),T.resetAccount(s),T.resetNetwork(s)}catch(a){throw new Error(`Failed to disconnect chain ${s}: ${a.message}`)}}));he.resetWcConnection();const n=r.filter(s=>s.status==="rejected");if(n.length>0)throw new Error(n.map(s=>s.reason.message).join(", "));J.deleteConnectedSocialProvider(),t?te.removeConnectorId(t):te.resetConnectorIds(),et.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),et.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){Z.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(Z.chains.forEach(s=>{z.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(n=(r=Z.chains.get(s))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=T.state.chains.get(t))==null?void 0:e.accountState:se.state},getNetworkData(t){var r;const e=t||Z.activeChain;if(e)return(r=T.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const r=T.state.chains.get(t),n=(s=r==null?void 0:r.caipNetworks)==null?void 0:s.find(a=>a.id===e);return n||((i=r==null?void 0:r.networkState)==null?void 0:i.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=te.state.filterByNamespace;return(t?[Z.chains.get(t)]:Array.from(Z.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?T.getRequestedCaipNetworks(t):T.getAllRequestedCaipNetworks()}},T=Mr(YB),ZB={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},s_=ue.getBlockchainApiUrl(),rr=tt({clientId:null,api:new Ec({baseUrl:s_,clientId:null}),supportedChains:{http:[],ws:[]}}),pe={state:rr,async get(t){const{st:e,sv:r}=pe.getSdkProperties(),n=q.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return rr.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=q.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{rr.supportedChains.http.length||await pe.getSupportedNetworks()}catch{return!1}return rr.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await pe.get({path:"v1/supported-chains"});return rr.supportedChains=t,t}catch{return rr.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await pe.isNetworkSupported(e))return{avatar:"",name:""};const n=J.getIdentityFromCacheForAddress(t);if(n)return n;const s=await pe.get({path:`/v1/identity/${t}`,params:{sender:T.state.activeCaipAddress?ue.getPlainAddress(T.state.activeCaipAddress):void 0}});return J.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:s,chainId:i}){var a;return await pe.isNetworkSupported((a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?pe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:i},signal:n,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){var o;return await pe.isNetworkSupported((o=T.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?pe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?rr.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:q.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:r}=pe.getSdkProperties();if(!await pe.isNetworkSupported((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return pe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){var o;if(!await pe.isNetworkSupported((o=T.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return rr.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ft.CONVERT_SLIPPAGE_TOLERANCE},projectId:q.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:s}=pe.getSdkProperties();if(!await pe.isNetworkSupported((o=T.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return pe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){var u;const{st:n,sv:s}=pe.getSdkProperties();if(!await pe.isNetworkSupported((u=T.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return Jr.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=J.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await pe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return J.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pe.get({path:`/v1/profile/reverse/${t}`,params:{sender:se.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var i;return await pe.isNetworkSupported((i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?rr.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){var a;return await pe.isNetworkSupported((a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await rr.api.post({path:"/v1/generators/onrampurl",params:{projectId:q.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await pe.isNetworkSupported((e=T.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await pe.get({path:"/v1/onramp/options"})}catch{return ZB}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var s;try{return await pe.isNetworkSupported((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await rr.api.post({path:"/v1/onramp/quote",params:{projectId:q.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var s;return await pe.isNetworkSupported((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?rr.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:q.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){rr.clientId=t,rr.api=new Ec({baseUrl:s_,clientId:t})}},Sr=tt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),JB={state:Sr,replaceState(t){t&&Object.assign(Sr,di(t))},subscribe(t){return T.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return T.subscribeChainProp("accountState",s=>{if(s){const i=s[t];n!==i&&(n=i,e(i))}},r)},setStatus(t,e){T.setAccountProp("status",t,e)},getCaipAddress(t){return T.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?ue.getPlainAddress(t):void 0;e===T.state.activeChain&&(T.state.activeCaipAddress=t),T.setAccountProp("caipAddress",t,e),T.setAccountProp("address",r,e)},setBalance(t,e,r){T.setAccountProp("balance",t,r),T.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){T.setAccountProp("profileName",t,e)},setProfileImage(t,e){T.setAccountProp("profileImage",t,e)},setUser(t,e){T.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){T.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){T.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){T.setAccountProp("currentTab",t,T.state.activeChain)},setTokenBalance(t,e){t&&T.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){T.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){T.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=T.getAccountProp("addressLabels",r)||new Map;n.set(t,e),T.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=T.getAccountProp("addressLabels",e)||new Map;r.delete(t),T.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){T.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){T.setAccountProp("preferredAccountTypes",{...Sr.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Sr.preferredAccountTypes=t},setSocialProvider(t,e){t&&T.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){T.setAccountProp("socialWindow",t?di(t):void 0,e)},setFarcasterUrl(t,e){T.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Sr.balanceLoading=!0;const e=(i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,r=(o=T.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=T.state.activeCaipAddress,s=n?ue.getPlainAddress(n):void 0;if(Sr.lastRetry&&!ue.isAllowedRetry(Sr.lastRetry,30*ft.ONE_SEC_MS))return Sr.balanceLoading=!1,[];try{if(s&&e&&r){const c=(await pe.getBalance(s,e)).balances.filter(u=>u.quantity.decimals!=="0");return se.setTokenBalance(c,r),Sr.lastRetry=void 0,Sr.balanceLoading=!1,c}}catch(a){Sr.lastRetry=Date.now(),t==null||t(a),Jr.showError("Token Balance Unavailable")}finally{Sr.balanceLoading=!1}return[]},resetAccount(t){T.resetAccount(t)}},se=Mr(JB),nr=tt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),QB={state:nr,subscribe(t){return Qt(nr,()=>t(nr))},subscribeKey(t,e){return qt(nr,t,e)},async open(t){var s;const e=se.state.status==="connected";he.state.wcBasic?de.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await de.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await T.switchActiveNamespace(t.namespace),ut.setLoading(!0,t.namespace)):ut.setLoading(!0),te.setFilterByNamespace(t==null?void 0:t.namespace);const r=(s=T.getAccountData(t==null?void 0:t.namespace))==null?void 0:s.caipAddress,n=T.state.noAdapters;q.state.manualWCControl||n&&!r?ue.isMobile()?Se.reset("AllWallets"):Se.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Se.reset(t.view,t.data):r?Se.reset("Account"):Se.reset("Connect"),nr.open=!0,En.set({open:!0}),et.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(t=!1){if(t||Se.state.view!=="ApproveTransaction"){const e=q.state.enableEmbedded,r=!!T.state.activeCaipAddress;nr.open&&et.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:r}}),nr.open=!1,ut.clearLoading(),e?r?Se.replace("Account"):Se.push("Connect"):En.set({open:!1})}he.resetUri()},setLoading(t,e){e&&nr.loadingNamespaceMap.set(e,t),nr.loading=t,En.set({loading:t})},clearLoading(){nr.loadingNamespaceMap.clear(),nr.loading=!1},shake(){nr.shake||(nr.shake=!0,setTimeout(()=>{nr.shake=!1},500))}},ut=Mr(QB),ww=2147483648,XB={convertEVMChainIdToCoinType(t){if(t>=ww)throw new Error("Invalid chainId");return(ww|t)>>>0}},Nr=tt({suggestions:[],loading:!1}),e4={state:Nr,subscribe(t){return Qt(Nr,()=>t(Nr))},subscribeKey(t,e){return qt(Nr,t,e)},async resolveName(t){var e,r;try{return await pe.lookupEnsName(t)}catch(n){const s=n;throw new Error(((r=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await pe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Nr.loading=!0,Nr.suggestions=[];const e=await pe.getEnsNameSuggestions(t);return Nr.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],Nr.suggestions}catch(e){const r=Ia.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Nr.loading=!1}},async getNamesForAddress(t){try{if(!T.state.activeCaipNetwork)return[];const r=J.getEnsFromCacheForAddress(t);if(r)return r;const n=await pe.reverseLookupEnsName({address:t});return J.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=Ia.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=T.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=se.state.address,n=te.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");Nr.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Se.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){Nr.loading=!1}});const i=await he.signMessage(s),o=e.id;if(!o)throw new Error("Network not found");const a=XB.convertEVMChainIdToCoinType(Number(o));await pe.registerEnsName({coinType:a,address:r,signature:i,message:s}),se.setProfileName(t,e.chainNamespace),Se.replace("RegisterAccountNameSuccess")}catch(s){const i=Ia.parseEnsApiError(s,`Error registering name ${t}`);throw Se.replace("RegisterAccountName"),new Error(i)}finally{Nr.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,s;const r=t;return((s=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:s.description)||e}},Ia=Mr(e4),Xe={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},_s={ConnectorExplorerIds:{[z.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[z.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[z.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[z.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[z.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Xe.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Xe.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Xe.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Xe.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Xe.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Xe.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Xe.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Xe.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Xe.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Xe.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Xe.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[z.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[z.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[z.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[z.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[z.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[z.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[z.CONNECTOR_ID.INJECTED]:"Browser Wallet",[z.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[z.CONNECTOR_ID.COINBASE]:"Coinbase",[z.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[z.CONNECTOR_ID.LEDGER]:"Ledger",[z.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[z.CONNECTOR_ID.INJECTED]:"INJECTED",[z.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[z.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[z.CONNECTOR_ID.AUTH]:"AUTH"}},Rl={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Xe.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},t4=new AbortController,Et={EmbeddedWalletAbortController:t4,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${r4()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function r4(){return typeof window<"u"}const n4={createLogger(t,e="error"){const r=Lo({level:e}),{logger:n}=Xf({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},s4="rpc.walletconnect.org";function bw(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const Yd=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],bn={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===s4}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:z.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${z.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var s,i,o;const n=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Yd.includes(e)?bw(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var h,p,f,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,r),c=((g=(f=(p=t==null?void 0:t.rpcUrls)==null?void 0:p.chainDefault)==null?void 0:f.http)==null?void 0:g[0])||o,u=((m=n==null?void 0:n[i])==null?void 0:m.map(w=>w.url))||[],l=[...u,a],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:_s.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>bn.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){var s,i,o;const n=[];return r==null||r.forEach(a=>{n.push(Bc(a.url,a.config))}),Yd.includes(t.caipNetworkId)&&n.push(Bc(bw(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{n.push(Bc(a))}),Lp(n)},extendWagmiTransports(t,e,r){if(Yd.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Lp([r,Bc(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:z.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=J.getActiveCaipNetworkId(),r=T.getAllRequestedCaipNetworks(),n=Array.from(((c=T.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?n.includes(s):!1,o=r==null?void 0:r.find(u=>u.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},Hu={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},sr=tt({providers:{...Hu},providerIds:{...Hu}}),qe={state:sr,subscribeKey(t,e){return qt(sr,t,e)},subscribe(t){return Qt(sr,()=>{t(sr)})},subscribeProviders(t){return Qt(sr.providers,()=>t(sr.providers))},setProvider(t,e){e&&(sr.providers[t]=di(e))},getProvider(t){return sr.providers[t]},setProviderId(t,e){e&&(sr.providerIds[t]=e)},getProviderId(t){if(t)return sr.providerIds[t]},reset(){sr.providers={...Hu},sr.providerIds={...Hu}},resetChain(t){sr.providers[t]=void 0,sr.providerIds[t]=void 0}},vw={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ot={set(t,e){br.isClient&&localStorage.setItem(`${ne.STORAGE_KEY}${t}`,e)},get(t){return br.isClient?localStorage.getItem(`${ne.STORAGE_KEY}${t}`):null},delete(t,e){br.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ne.STORAGE_KEY}${t}`))}},lu=30*1e3,br={checkIfAllowedToTriggerEmail(){const t=Ot.get(ne.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<lu){const r=Math.ceil((lu-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=Ot.get(ne.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<lu)return Math.ceil((lu-e)/1e3)}return 0},checkIfRequestExists(t){return Dt.NOT_SAFE_RPC_METHODS.includes(t.method)||Dt.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(vw.transactionHash))||(t==null?void 0:t.match(vw.signedMessage)))?ne.RPC_RESPONSE_TYPE_TX:ne.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Dt.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var ke;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ke||(ke={}));var wf;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(wf||(wf={}));const Q=ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fs=t=>{switch(typeof t){case"undefined":return Q.undefined;case"string":return Q.string;case"number":return isNaN(t)?Q.nan:Q.number;case"boolean":return Q.boolean;case"function":return Q.function;case"bigint":return Q.bigint;case"symbol":return Q.symbol;case"object":return Array.isArray(t)?Q.array:t===null?Q.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Q.promise:typeof Map<"u"&&t instanceof Map?Q.map:typeof Set<"u"&&t instanceof Set?Q.set:typeof Date<"u"&&t instanceof Date?Q.date:Q.object;default:return Q.unknown}},H=ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),i4=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class en extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ke.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}en.create=t=>new en(t);const Ga=(t,e)=>{let r;switch(t.code){case H.invalid_type:t.received===Q.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ke.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:r=`Unrecognized key(s) in object: ${ke.joinValues(t.keys,", ")}`;break;case H.invalid_union:r="Invalid input";break;case H.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ke.joinValues(t.options)}`;break;case H.invalid_enum_value:r=`Invalid enum value. Expected ${ke.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:r="Invalid function arguments";break;case H.invalid_return_type:r="Invalid function return type";break;case H.invalid_date:r="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ke.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case H.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case H.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case H.custom:r="Invalid input";break;case H.invalid_intersection_types:r="Intersection results could not be merged";break;case H.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:r="Number must be finite";break;default:r=e.defaultError,ke.assertNever(t)}return{message:r}};let i_=Ga;function o4(t){i_=t}function Wu(){return i_}const Vu=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},a4=[];function re(t,e){const r=Vu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Wu(),Ga].filter(n=>!!n)});t.common.issues.push(r)}class jt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return me;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return jt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return me;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const me=Object.freeze({status:"aborted"}),o_=t=>({status:"dirty",value:t}),Xt=t=>({status:"valid",value:t}),bf=t=>t.status==="aborted",vf=t=>t.status==="dirty",Ka=t=>t.status==="valid",Gu=t=>typeof Promise<"u"&&t instanceof Promise;var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));class An{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ew=(t,e)=>{if(Ka(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new en(t.common.issues);return this._error=r,this._error}}};function Ee(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class Ce{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return fs(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:fs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jt,ctx:{common:e.parent.common,data:e.data,parsedType:fs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Gu(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fs(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Ew(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fs(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Gu(s)?s:Promise.resolve(s));return Ew(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:H.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new rn({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Vn.create(this,this._def)}nullable(){return bi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tn.create(this,this._def)}promise(){return xo.create(this,this._def)}or(e){return Qa.create([this,e],this._def)}and(e){return Xa.create(this,e,this._def)}transform(e){return new rn({...Ee(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new sc({...Ee(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new c_({typeName:fe.ZodBranded,type:this,...Ee(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Ju({...Ee(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Uc.create(this,e)}readonly(){return Xu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const c4=/^c[^\s-]{8,}$/i,u4=/^[a-z][a-z0-9]*$/,l4=/^[0-9A-HJKMNP-TV-Z]{26}$/,d4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,h4=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,f4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zd;const p4=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,g4=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,m4=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function y4(t,e){return!!((e==="v4"||!e)&&p4.test(t)||(e==="v6"||!e)&&g4.test(t))}class Xr extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Q.string){const i=this._getOrReturnCtx(e);return re(i,{code:H.invalid_type,expected:Q.string,received:i.parsedType}),me}const n=new jt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),re(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),re(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?re(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&re(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")h4.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"email",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Zd||(Zd=new RegExp(f4,"u")),Zd.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"emoji",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")d4.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"uuid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")c4.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"cuid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")u4.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"cuid2",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")l4.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"ulid",code:H.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),re(s,{validation:"url",code:H.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"regex",code:H.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),re(s,{code:H.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),re(s,{code:H.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),re(s,{code:H.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?m4(i).test(e.data)||(s=this._getOrReturnCtx(e,s),re(s,{code:H.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?y4(e.data,i.version)||(s=this._getOrReturnCtx(e,s),re(s,{validation:"ip",code:H.invalid_string,message:i.message}),n.dirty()):ke.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:H.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new Xr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ce.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new Xr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Xr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Xr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Xr.create=t=>{var e;return new Xr({checks:[],typeName:fe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ee(t)})};function w4(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Rs extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Q.number){const i=this._getOrReturnCtx(e);return re(i,{code:H.invalid_type,expected:Q.number,received:i.parsedType}),me}let n;const s=new jt;for(const i of this._def.checks)i.kind==="int"?ke.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:H.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:H.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:H.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?w4(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),re(n,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:H.not_finite,message:i.message}),s.dirty()):ke.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,s){return new Rs({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(s)}]})}_addCheck(e){return new Rs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ke.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Rs.create=t=>new Rs({checks:[],typeName:fe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ee(t)});class Ds extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Q.bigint){const i=this._getOrReturnCtx(e);return re(i,{code:H.invalid_type,expected:Q.bigint,received:i.parsedType}),me}let n;const s=new jt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:H.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:H.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),re(n,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ke.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,s){return new Ds({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(s)}]})}_addCheck(e){return new Ds({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ds.create=t=>{var e;return new Ds({checks:[],typeName:fe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ee(t)})};class Ya extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Q.boolean){const n=this._getOrReturnCtx(e);return re(n,{code:H.invalid_type,expected:Q.boolean,received:n.parsedType}),me}return Xt(e.data)}}Ya.create=t=>new Ya({typeName:fe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ee(t)});class yi extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Q.date){const i=this._getOrReturnCtx(e);return re(i,{code:H.invalid_type,expected:Q.date,received:i.parsedType}),me}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return re(i,{code:H.invalid_date}),me}const n=new jt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),re(s,{code:H.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),re(s,{code:H.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ke.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new yi({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}yi.create=t=>new yi({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:fe.ZodDate,...Ee(t)});class Ku extends Ce{_parse(e){if(this._getType(e)!==Q.symbol){const n=this._getOrReturnCtx(e);return re(n,{code:H.invalid_type,expected:Q.symbol,received:n.parsedType}),me}return Xt(e.data)}}Ku.create=t=>new Ku({typeName:fe.ZodSymbol,...Ee(t)});class Za extends Ce{_parse(e){if(this._getType(e)!==Q.undefined){const n=this._getOrReturnCtx(e);return re(n,{code:H.invalid_type,expected:Q.undefined,received:n.parsedType}),me}return Xt(e.data)}}Za.create=t=>new Za({typeName:fe.ZodUndefined,...Ee(t)});class Ja extends Ce{_parse(e){if(this._getType(e)!==Q.null){const n=this._getOrReturnCtx(e);return re(n,{code:H.invalid_type,expected:Q.null,received:n.parsedType}),me}return Xt(e.data)}}Ja.create=t=>new Ja({typeName:fe.ZodNull,...Ee(t)});class To extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return Xt(e.data)}}To.create=t=>new To({typeName:fe.ZodAny,...Ee(t)});class ii extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xt(e.data)}}ii.create=t=>new ii({typeName:fe.ZodUnknown,...Ee(t)});class Zn extends Ce{_parse(e){const r=this._getOrReturnCtx(e);return re(r,{code:H.invalid_type,expected:Q.never,received:r.parsedType}),me}}Zn.create=t=>new Zn({typeName:fe.ZodNever,...Ee(t)});class Yu extends Ce{_parse(e){if(this._getType(e)!==Q.undefined){const n=this._getOrReturnCtx(e);return re(n,{code:H.invalid_type,expected:Q.void,received:n.parsedType}),me}return Xt(e.data)}}Yu.create=t=>new Yu({typeName:fe.ZodVoid,...Ee(t)});class tn extends Ce{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==Q.array)return re(r,{code:H.invalid_type,expected:Q.array,received:r.parsedType}),me;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(re(r,{code:o?H.too_big:H.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(re(r,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(re(r,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new An(r,o,r.path,a)))).then(o=>jt.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new An(r,o,r.path,a)));return jt.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new tn({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new tn({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new tn({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}}tn.create=(t,e)=>new tn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Ee(e)});function Ji(t){if(t instanceof nt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Vn.create(Ji(n))}return new nt({...t._def,shape:()=>e})}else return t instanceof tn?new tn({...t._def,type:Ji(t.element)}):t instanceof Vn?Vn.create(Ji(t.unwrap())):t instanceof bi?bi.create(Ji(t.unwrap())):t instanceof In?In.create(t.items.map(e=>Ji(e))):t}class nt extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ke.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Q.object){const u=this._getOrReturnCtx(e);return re(u,{code:H.invalid_type,expected:Q.object,received:u.parsedType}),me}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Zn&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new An(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Zn){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(re(s,{code:H.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new An(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>jt.mergeObjectSync(n,u)):jt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new nt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=ce.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new nt({...this._def,unknownKeys:"strip"})}passthrough(){return new nt({...this._def,unknownKeys:"passthrough"})}extend(e){return new nt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new nt({...this._def,catchall:e})}pick(e){const r={};return ke.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new nt({...this._def,shape:()=>r})}omit(e){const r={};return ke.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new nt({...this._def,shape:()=>r})}deepPartial(){return Ji(this)}partial(e){const r={};return ke.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new nt({...this._def,shape:()=>r})}required(e){const r={};return ke.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Vn;)i=i._def.innerType;r[n]=i}}),new nt({...this._def,shape:()=>r})}keyof(){return a_(ke.objectKeys(this.shape))}}nt.create=(t,e)=>new nt({shape:()=>t,unknownKeys:"strip",catchall:Zn.create(),typeName:fe.ZodObject,...Ee(e)});nt.strictCreate=(t,e)=>new nt({shape:()=>t,unknownKeys:"strict",catchall:Zn.create(),typeName:fe.ZodObject,...Ee(e)});nt.lazycreate=(t,e)=>new nt({shape:t,unknownKeys:"strip",catchall:Zn.create(),typeName:fe.ZodObject,...Ee(e)});class Qa extends Ce{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new en(a.ctx.common.issues));return re(r,{code:H.invalid_union,unionErrors:o}),me}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new en(c));return re(r,{code:H.invalid_union,unionErrors:a}),me}}get options(){return this._def.options}}Qa.create=(t,e)=>new Qa({options:t,typeName:fe.ZodUnion,...Ee(e)});const Cu=t=>t instanceof tc?Cu(t.schema):t instanceof rn?Cu(t.innerType()):t instanceof rc?[t.value]:t instanceof ks?t.options:t instanceof nc?Object.keys(t.enum):t instanceof sc?Cu(t._def.innerType):t instanceof Za?[void 0]:t instanceof Ja?[null]:null;class Dl extends Ce{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Q.object)return re(r,{code:H.invalid_type,expected:Q.object,received:r.parsedType}),me;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(re(r,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),me)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=Cu(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Dl({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Ee(n)})}}function Ef(t,e){const r=fs(t),n=fs(e);if(t===e)return{valid:!0,data:t};if(r===Q.object&&n===Q.object){const s=ke.objectKeys(e),i=ke.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Ef(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===Q.array&&n===Q.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Ef(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===Q.date&&n===Q.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Xa extends Ce{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(bf(i)||bf(o))return me;const a=Ef(i.value,o.value);return a.valid?((vf(i)||vf(o))&&r.dirty(),{status:r.value,value:a.data}):(re(n,{code:H.invalid_intersection_types}),me)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Xa.create=(t,e,r)=>new Xa({left:t,right:e,typeName:fe.ZodIntersection,...Ee(r)});class In extends Ce{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.array)return re(n,{code:H.invalid_type,expected:Q.array,received:n.parsedType}),me;if(n.data.length<this._def.items.length)return re(n,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&n.data.length>this._def.items.length&&(re(n,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new An(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>jt.mergeArray(r,o)):jt.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new In({...this._def,rest:e})}}In.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new In({items:t,typeName:fe.ZodTuple,rest:null,...Ee(e)})};class ec extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.object)return re(n,{code:H.invalid_type,expected:Q.object,received:n.parsedType}),me;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new An(n,a,n.path,a)),value:o._parse(new An(n,n.data[a],n.path,a))});return n.common.async?jt.mergeObjectAsync(r,s):jt.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ce?new ec({keyType:e,valueType:r,typeName:fe.ZodRecord,...Ee(n)}):new ec({keyType:Xr.create(),valueType:e,typeName:fe.ZodRecord,...Ee(r)})}}class Zu extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.map)return re(n,{code:H.invalid_type,expected:Q.map,received:n.parsedType}),me;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new An(n,a,n.path,[u,"key"])),value:i._parse(new An(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return me;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return me;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}Zu.create=(t,e,r)=>new Zu({valueType:e,keyType:t,typeName:fe.ZodMap,...Ee(r)});class wi extends Ce{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.set)return re(n,{code:H.invalid_type,expected:Q.set,received:n.parsedType}),me;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(re(n,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(re(n,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return me;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new An(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new wi({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new wi({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}wi.create=(t,e)=>new wi({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Ee(e)});class io extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Q.function)return re(r,{code:H.invalid_type,expected:Q.function,received:r.parsedType}),me;function n(a,c){return Vu({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wu(),Ga].filter(u=>!!u),issueData:{code:H.invalid_arguments,argumentsError:c}})}function s(a,c){return Vu({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Wu(),Ga].filter(u=>!!u),issueData:{code:H.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof xo){const a=this;return Xt(async function(...c){const u=new en([]),l=await a._def.args.parseAsync(c,i).catch(p=>{throw u.addIssue(n(c,p)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw u.addIssue(s(d,p)),u})})}else{const a=this;return Xt(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new en([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new en([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new io({...this._def,args:In.create(e).rest(ii.create())})}returns(e){return new io({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new io({args:e||In.create([]).rest(ii.create()),returns:r||ii.create(),typeName:fe.ZodFunction,...Ee(n)})}}class tc extends Ce{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}tc.create=(t,e)=>new tc({getter:t,typeName:fe.ZodLazy,...Ee(e)});class rc extends Ce{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return re(r,{received:r.data,code:H.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:e.data}}get value(){return this._def.value}}rc.create=(t,e)=>new rc({value:t,typeName:fe.ZodLiteral,...Ee(e)});function a_(t,e){return new ks({values:t,typeName:fe.ZodEnum,...Ee(e)})}class ks extends Ce{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{expected:ke.joinValues(n),received:r.parsedType,code:H.invalid_type}),me}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{received:r.data,code:H.invalid_enum_value,options:n}),me}return Xt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return ks.create(e)}exclude(e){return ks.create(this.options.filter(r=>!e.includes(r)))}}ks.create=a_;class nc extends Ce{_parse(e){const r=ke.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Q.string&&n.parsedType!==Q.number){const s=ke.objectValues(r);return re(n,{expected:ke.joinValues(s),received:n.parsedType,code:H.invalid_type}),me}if(r.indexOf(e.data)===-1){const s=ke.objectValues(r);return re(n,{received:n.data,code:H.invalid_enum_value,options:s}),me}return Xt(e.data)}get enum(){return this._def.values}}nc.create=(t,e)=>new nc({values:t,typeName:fe.ZodNativeEnum,...Ee(e)});class xo extends Ce{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Q.promise&&r.common.async===!1)return re(r,{code:H.invalid_type,expected:Q.promise,received:r.parsedType}),me;const n=r.parsedType===Q.promise?r.data:Promise.resolve(r.data);return Xt(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}xo.create=(t,e)=>new xo({type:t,typeName:fe.ZodPromise,...Ee(e)});class rn extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{re(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?me:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?me:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ka(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ka(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);ke.assertNever(s)}}rn.create=(t,e,r)=>new rn({schema:t,typeName:fe.ZodEffects,effect:e,...Ee(r)});rn.createWithPreprocess=(t,e,r)=>new rn({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Ee(r)});class Vn extends Ce{_parse(e){return this._getType(e)===Q.undefined?Xt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vn.create=(t,e)=>new Vn({innerType:t,typeName:fe.ZodOptional,...Ee(e)});class bi extends Ce{_parse(e){return this._getType(e)===Q.null?Xt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bi.create=(t,e)=>new bi({innerType:t,typeName:fe.ZodNullable,...Ee(e)});class sc extends Ce{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Q.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}sc.create=(t,e)=>new sc({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});class Ju extends Ce{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Gu(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new en(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new en(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ju.create=(t,e)=>new Ju({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});class Qu extends Ce{_parse(e){if(this._getType(e)!==Q.nan){const n=this._getOrReturnCtx(e);return re(n,{code:H.invalid_type,expected:Q.nan,received:n.parsedType}),me}return{status:"valid",value:e.data}}}Qu.create=t=>new Qu({typeName:fe.ZodNaN,...Ee(t)});const b4=Symbol("zod_brand");class c_ extends Ce{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Uc extends Ce{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?me:i.status==="dirty"?(r.dirty(),o_(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?me:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Uc({in:e,out:r,typeName:fe.ZodPipeline})}}class Xu extends Ce{_parse(e){const r=this._def.innerType._parse(e);return Ka(r)&&(r.value=Object.freeze(r.value)),r}}Xu.create=(t,e)=>new Xu({innerType:t,typeName:fe.ZodReadonly,...Ee(e)});const u_=(t,e={},r)=>t?To.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):To.create(),v4={object:nt.lazycreate};var fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));const E4=(t,e={message:`Input not instance of ${t.name}`})=>u_(r=>r instanceof t,e),l_=Xr.create,d_=Rs.create,_4=Qu.create,C4=Ds.create,h_=Ya.create,A4=yi.create,I4=Ku.create,S4=Za.create,N4=Ja.create,P4=To.create,T4=ii.create,x4=Zn.create,O4=Yu.create,R4=tn.create,D4=nt.create,k4=nt.strictCreate,$4=Qa.create,U4=Dl.create,M4=Xa.create,L4=In.create,B4=ec.create,F4=Zu.create,j4=wi.create,q4=io.create,z4=tc.create,H4=rc.create,W4=ks.create,V4=nc.create,G4=xo.create,_w=rn.create,K4=Vn.create,Y4=bi.create,Z4=rn.createWithPreprocess,J4=Uc.create,Q4=()=>l_().optional(),X4=()=>d_().optional(),eF=()=>h_().optional(),tF={string:t=>Xr.create({...t,coerce:!0}),number:t=>Rs.create({...t,coerce:!0}),boolean:t=>Ya.create({...t,coerce:!0}),bigint:t=>Ds.create({...t,coerce:!0}),date:t=>yi.create({...t,coerce:!0})},rF=me;var A=Object.freeze({__proto__:null,defaultErrorMap:Ga,setErrorMap:o4,getErrorMap:Wu,makeIssue:Vu,EMPTY_PATH:a4,addIssueToContext:re,ParseStatus:jt,INVALID:me,DIRTY:o_,OK:Xt,isAborted:bf,isDirty:vf,isValid:Ka,isAsync:Gu,get util(){return ke},get objectUtil(){return wf},ZodParsedType:Q,getParsedType:fs,ZodType:Ce,ZodString:Xr,ZodNumber:Rs,ZodBigInt:Ds,ZodBoolean:Ya,ZodDate:yi,ZodSymbol:Ku,ZodUndefined:Za,ZodNull:Ja,ZodAny:To,ZodUnknown:ii,ZodNever:Zn,ZodVoid:Yu,ZodArray:tn,ZodObject:nt,ZodUnion:Qa,ZodDiscriminatedUnion:Dl,ZodIntersection:Xa,ZodTuple:In,ZodRecord:ec,ZodMap:Zu,ZodSet:wi,ZodFunction:io,ZodLazy:tc,ZodLiteral:rc,ZodEnum:ks,ZodNativeEnum:nc,ZodPromise:xo,ZodEffects:rn,ZodTransformer:rn,ZodOptional:Vn,ZodNullable:bi,ZodDefault:sc,ZodCatch:Ju,ZodNaN:Qu,BRAND:b4,ZodBranded:c_,ZodPipeline:Uc,ZodReadonly:Xu,custom:u_,Schema:Ce,ZodSchema:Ce,late:v4,get ZodFirstPartyTypeKind(){return fe},coerce:tF,any:P4,array:R4,bigint:C4,boolean:h_,date:A4,discriminatedUnion:U4,effect:_w,enum:W4,function:q4,instanceof:E4,intersection:M4,lazy:z4,literal:H4,map:F4,nan:_4,nativeEnum:V4,never:x4,null:N4,nullable:Y4,number:d_,object:D4,oboolean:eF,onumber:X4,optional:K4,ostring:Q4,pipeline:J4,preprocess:Z4,promise:G4,record:B4,set:j4,strictObject:k4,string:l_,symbol:I4,transformer:_w,tuple:L4,undefined:S4,union:$4,unknown:T4,void:O4,NEVER:rF,ZodIssueCode:H,quotelessJson:i4,ZodError:en});const st=A.object({message:A.string()});function X(t){return A.literal(ne[t])}A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const nF=A.object({chainId:A.string().or(A.number())}),sF=A.object({email:A.string().email()}),iF=A.object({otp:A.string()}),oF=A.object({uri:A.string(),preferredAccountType:A.optional(A.string())}),aF=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string())}),cF=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),uF=A.object({email:A.string().email()}),lF=A.object({otp:A.string()}),dF=A.object({otp:A.string()}),hF=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),fF=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),pF=A.object({type:A.string()}),gF=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),mF=A.object({url:A.string()}),yF=A.object({userName:A.string()}),wF=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([Dt.ACCOUNT_TYPES.EOA,Dt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string())}),bF=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),vF=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([Dt.ACCOUNT_TYPES.EOA,Dt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string())}),EF=A.object({uri:A.string()}),_F=A.object({isConnected:A.boolean()}),CF=A.object({chainId:A.string().or(A.number())}),AF=A.object({chainId:A.string().or(A.number())}),IF=A.object({newEmail:A.string().email()}),SF=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const NF=A.object({version:A.string().optional()}),PF=A.object({type:A.string(),address:A.string()}),TF=A.any(),xF=A.object({method:A.literal("eth_accounts")}),OF=A.object({method:A.literal("eth_blockNumber")}),RF=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),DF=A.object({method:A.literal("eth_chainId")}),kF=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),$F=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),UF=A.object({method:A.literal("eth_gasPrice")}),MF=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),LF=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),BF=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),FF=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),jF=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),qF=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),zF=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),HF=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),WF=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),VF=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),GF=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),KF=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),YF=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),ZF=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),JF=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),QF=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),XF=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),e9=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),t9=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),r9=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),n9=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),s9=A.object({method:A.literal("eth_newBlockFilter")}),i9=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),o9=A.object({method:A.literal("eth_newPendingTransactionFilter")}),a9=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),c9=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),u9=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),Cw=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),l9=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),d9=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),h9=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),f9=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),p9=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),g9=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),m9=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),y9=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),w9=A.object({method:A.literal("wallet_getCapabilities")}),b9=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),v9=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),E9=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),Aw=A.object({token:A.string()}),ee=A.object({id:A.string().optional()}),ca={appEvent:ee.extend({type:X("APP_SWITCH_NETWORK"),payload:nF}).or(ee.extend({type:X("APP_CONNECT_EMAIL"),payload:sF})).or(ee.extend({type:X("APP_CONNECT_DEVICE")})).or(ee.extend({type:X("APP_CONNECT_OTP"),payload:iF})).or(ee.extend({type:X("APP_CONNECT_SOCIAL"),payload:oF})).or(ee.extend({type:X("APP_GET_FARCASTER_URI")})).or(ee.extend({type:X("APP_CONNECT_FARCASTER")})).or(ee.extend({type:X("APP_GET_USER"),payload:A.optional(aF)})).or(ee.extend({type:X("APP_GET_SOCIAL_REDIRECT_URI"),payload:cF})).or(ee.extend({type:X("APP_SIGN_OUT")})).or(ee.extend({type:X("APP_IS_CONNECTED"),payload:A.optional(Aw)})).or(ee.extend({type:X("APP_GET_CHAIN_ID")})).or(ee.extend({type:X("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ee.extend({type:X("APP_INIT_SMART_ACCOUNT")})).or(ee.extend({type:X("APP_SET_PREFERRED_ACCOUNT"),payload:pF})).or(ee.extend({type:X("APP_RPC_REQUEST"),payload:Cw.or(E9).or(xF).or(OF).or(RF).or(DF).or(kF).or($F).or(UF).or(MF).or(LF).or(BF).or(FF).or(jF).or(qF).or(zF).or(HF).or(WF).or(VF).or(GF).or(KF).or(YF).or(ZF).or(JF).or(QF).or(XF).or(e9).or(t9).or(r9).or(n9).or(s9).or(i9).or(o9).or(a9).or(c9).or(u9).or(Cw).or(l9).or(d9).or(h9).or(f9).or(p9).or(g9).or(y9).or(m9).or(w9).or(b9).or(v9)})).or(ee.extend({type:X("APP_UPDATE_EMAIL"),payload:uF})).or(ee.extend({type:X("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:lF})).or(ee.extend({type:X("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:dF})).or(ee.extend({type:X("APP_SYNC_THEME"),payload:hF})).or(ee.extend({type:X("APP_SYNC_DAPP_DATA"),payload:fF})).or(ee.extend({type:X("APP_RELOAD")})),frameEvent:ee.extend({type:X("FRAME_SWITCH_NETWORK_ERROR"),payload:st}).or(ee.extend({type:X("FRAME_SWITCH_NETWORK_SUCCESS"),payload:AF})).or(ee.extend({type:X("FRAME_CONNECT_EMAIL_SUCCESS"),payload:gF})).or(ee.extend({type:X("FRAME_CONNECT_EMAIL_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:mF})).or(ee.extend({type:X("FRAME_GET_FARCASTER_URI_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:yF})).or(ee.extend({type:X("FRAME_CONNECT_FARCASTER_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_CONNECT_OTP_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_CONNECT_OTP_SUCCESS")})).or(ee.extend({type:X("FRAME_CONNECT_DEVICE_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ee.extend({type:X("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:wF})).or(ee.extend({type:X("FRAME_CONNECT_SOCIAL_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_GET_USER_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_GET_USER_SUCCESS"),payload:vF})).or(ee.extend({type:X("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:EF})).or(ee.extend({type:X("FRAME_SIGN_OUT_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_SIGN_OUT_SUCCESS")})).or(ee.extend({type:X("FRAME_IS_CONNECTED_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_IS_CONNECTED_SUCCESS"),payload:_F})).or(ee.extend({type:X("FRAME_GET_CHAIN_ID_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_GET_CHAIN_ID_SUCCESS"),payload:CF})).or(ee.extend({type:X("FRAME_RPC_REQUEST_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_RPC_REQUEST_SUCCESS"),payload:TF})).or(ee.extend({type:X("FRAME_SESSION_UPDATE"),payload:Aw})).or(ee.extend({type:X("FRAME_UPDATE_EMAIL_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_UPDATE_EMAIL_SUCCESS"),payload:bF})).or(ee.extend({type:X("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ee.extend({type:X("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:IF})).or(ee.extend({type:X("FRAME_SYNC_THEME_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_SYNC_THEME_SUCCESS")})).or(ee.extend({type:X("FRAME_SYNC_DAPP_DATA_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ee.extend({type:X("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:SF})).or(ee.extend({type:X("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:PF})).or(ee.extend({type:X("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_READY"),payload:NF})).or(ee.extend({type:X("FRAME_RELOAD_ERROR"),payload:st})).or(ee.extend({type:X("FRAME_RELOAD_SUCCESS")}))};function Jd(t,e={}){var r;return typeof(e==null?void 0:e.type)=="string"&&((r=e==null?void 0:e.type)==null?void 0:r.includes(t))}class _9{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=z.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:u}){if(!Jd(ne.FRAME_EVENT_KEY,u))return;const l=ca.frameEvent.parse(u);l.id===i&&(o(l),window.removeEventListener("message",c))}br.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{br.isClient&&window.addEventListener("message",({data:o})=>{if(!Jd(ne.FRAME_EVENT_KEY,o))return;const a=ca.frameEvent.parse(o);i(a)})},onAppEvent:i=>{br.isClient&&window.addEventListener("message",({data:o})=>{if(!Jd(ne.APP_EVENT_KEY,o))return;const a=ca.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(br.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");ca.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(br.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");ca.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),r&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),br.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${qB}?projectId=${e}&chainId=${n}&version=${HB}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}class C9{constructor(e){var i;const r=Lo({level:zB}),{logger:n,chunkLoggerController:s}=Xf({opts:r});this.logger=zt(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class A9{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,n&&(this.w3mLogger=new C9(e)),this.abortController=i,this.w3mFrame=new _9({projectId:e,isAppClient:!0,chainId:r,enableLogger:n}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ot.get(ne.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ot.get(ne.EMAIL)}getUsername(){return Ot.get(ne.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:ne.APP_RELOAD})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error reloading iframe"),r}}async connectEmail(e){var r;try{br.checkIfAllowedToTriggerEmail(),await this.init();const n=await this.appEvent({type:ne.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){var e;try{return this.appEvent({type:ne.APP_CONNECT_DEVICE})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting device"),r}}async connectOtp(e){var r;try{return this.appEvent({type:ne.APP_CONNECT_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const r=await this.appEvent({type:ne.APP_IS_CONNECTED});return r!=null&&r.isConnected||this.deleteAuthLoginCache(),r}catch(r){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error checking connection"),r}}async getChainId(){var e;try{const r=await this.appEvent({type:ne.APP_GET_CHAIN_ID});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting chain id"),r}}async getSocialRedirectUri(e){var r;try{return await this.init(),this.appEvent({type:ne.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){var r;try{const n=await this.appEvent({type:ne.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){var r;try{return this.appEvent({type:ne.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){var r;try{const n=await this.appEvent({type:ne.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){var r;try{return this.appEvent({type:ne.APP_SYNC_THEME,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){var r;try{return this.appEvent({type:ne.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){var e;try{const r=await this.appEvent({type:ne.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(r.smartAccountEnabledNetworks),r}catch(r){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting smart account enabled networks"),r}}async setPreferredAccount(e){var r;try{return this.appEvent({type:ne.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){var r,n;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:ne.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1;e!=null&&e.preferredAccountType&&await this.setPreferredAccount(e.preferredAccountType);const i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting"),s}}async getUser(e){var r;try{await this.init();const n=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ne.APP_GET_USER,payload:{...e,chainId:n}});return this.user=s,s}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting"),n}}async connectSocial(e){var r;try{await this.init();const n=await this.appEvent({type:ne.APP_CONNECT_SOCIAL,payload:{uri:e}});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error connecting social"),n}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:ne.APP_GET_FARCASTER_URI})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error getting farcaster uri"),r}}async connectFarcaster(){var e;try{const r=await this.appEvent({type:ne.APP_CONNECT_FARCASTER});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error connecting farcaster"),r}}async switchNetwork(e){var r;try{const n=await this.appEvent({type:ne.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(r=this.w3mLogger)==null||r.logger.error({error:n},"Error switching network"),n}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async n=>{const s=setTimeout(()=>{n()},3e3);await this.appEvent({type:ne.APP_SIGN_OUT}),clearTimeout(s),n()})}catch(r){throw(e=this.w3mLogger)==null||e.logger.error({error:r},"Error disconnecting"),r}}async request(e){var r,n,s,i;try{if(Dt.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(r=this.rpcRequestHandler)==null||r.call(this,e);const o=await this.appEvent({type:ne.APP_RPC_REQUEST,payload:e});return(n=this.rpcSuccessHandler)==null||n.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_IS_CONNECTED_ERROR&&e(),r.type===ne.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===ne.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Dt.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===ne.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(r.payload.smartAccountEnabledNetworks):r.type===ne.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:r,method:n})=>{Dt.SAFE_RPC_METHODS.includes(n)||r.abort()}),this.openRpcRequests=[]}catch(r){(e=this.w3mLogger)==null||e.logger.error({error:r},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[ne.APP_SYNC_DAPP_DATA,ne.APP_SYNC_THEME,ne.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[ne.APP_CONNECT_EMAIL,ne.APP_CONNECT_DEVICE,ne.APP_CONNECT_OTP,ne.APP_CONNECT_SOCIAL,ne.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,u)=>{var p,f,g;const l=Math.random().toString(36).substring(7);(g=(p=this.w3mLogger)==null?void 0:(f=p.logger).info)==null||g.call(f,{event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});function h(m,w){var b,v,C;m.id===l&&((v=w==null?void 0:(b=w.logger).info)==null||v.call(b,{framEvent:m,id:l},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in m&&u(new Error(((C=m.payload)==null?void 0:C.message)||"An error occurred")),u(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(l,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ot.set(ne.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ot.set(ne.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ot.set(ne.EMAIL,e),Ot.set(ne.EMAIL_LOGIN_USED_KEY,"true"),Ot.delete(ne.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ot.delete(ne.EMAIL_LOGIN_USED_KEY),Ot.delete(ne.EMAIL),Ot.delete(ne.LAST_USED_CHAIN_KEY),Ot.delete(ne.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ot.set(ne.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ot.get(ne.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){Ot.set(ne.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class oi{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i}){return oi.instance||(oi.instance=new A9({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i})),oi.instance}}var Iw={};const I9={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof Iw<"u"?Iw.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},_f={filterOutDuplicatesByRDNS(t){const e=q.state.enableEIP6963?te.state.connectors:[],r=J.getRecentWallets(),n=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&ue.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=te.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=J.getRecentWallets(),n=e.map(a=>a.explorerId),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=te.state,r=e.filter(i=>i.type==="ANNOUNCED").reduce((i,o)=>{var a;return(a=o.info)!=null&&a.rdns&&(i[o.info.rdns]=!0),i},{});return t.map(i=>({...i,installed:!!i.rdns&&!!r[i.rdns??""]})).sort((i,o)=>Number(o.installed)-Number(i.installed))},getConnectOrderMethod(t,e){var c;const r=(t==null?void 0:t.connectMethodsOrder)||((c=q.state.features)==null?void 0:c.connectMethodsOrder),n=e||te.state.connectors;if(r)return r;const{injected:s,announced:i}=Au.getConnectorsByType(n,de.state.recommended,de.state.featured),o=s.filter(Au.showConnector),a=i.filter(Au.showConnector);return o.length||a.length?["wallet","email","social"]:I9.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&de.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&de.state.excludedWallets.some(n=>Rl.isLowerCaseMatch(n.name,t.name));return e||r}},Au={getConnectorsByType(t,e,r){const{customWallets:n}=q.state,s=J.getRecentWallets(),i=_f.filterOutDuplicateWallets(e),o=_f.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,r=!!e&&de.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!t.name&&de.state.excludedWallets.some(i=>Rl.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ue.isMobile()||ue.isMobile()&&!e&&!he.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(T.state.chains.values()).some(r=>te.getConnectorId(r.namespace)===z.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(u=>(u=q.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const l=Au.getIsConnectedWithWC(),p=[{type:"walletConnect",isEnabled:q.state.enableWalletConnect&&!l},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(p.map(w=>w.type)),g=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),m=p.filter(({type:w})=>!g.some(({type:v})=>v===w));return Array.from(new Set([...g,...m].map(({type:w})=>w)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Iu=globalThis,Ep=Iu.ShadowRoot&&(Iu.ShadyCSS===void 0||Iu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,_p=Symbol(),Sw=new WeakMap;let f_=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==_p)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Ep&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Sw.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Sw.set(r,e))}return e}toString(){return this.cssText}};const Pr=t=>new f_(typeof t=="string"?t:t+"",void 0,_p),oo=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new f_(r,t,_p)},S9=(t,e)=>{if(Ep)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),s=Iu.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},Nw=Ep?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return Pr(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:N9,defineProperty:P9,getOwnPropertyDescriptor:T9,getOwnPropertyNames:x9,getOwnPropertySymbols:O9,getPrototypeOf:R9}=Object,Ss=globalThis,Pw=Ss.trustedTypes,D9=Pw?Pw.emptyScript:"",Qd=Ss.reactiveElementPolyfillSupport,Sa=(t,e)=>t,Cf={toAttribute(t,e){switch(e){case Boolean:t=t?D9:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},p_=(t,e)=>!N9(t,e),Tw={attribute:!0,type:String,converter:Cf,reflect:!1,useDefault:!1,hasChanged:p_};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Ss.litPropertyMetadata??(Ss.litPropertyMetadata=new WeakMap);let Qi=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Tw){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&P9(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=T9(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Tw}static _$Ei(){if(this.hasOwnProperty(Sa("elementProperties")))return;const e=R9(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Sa("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Sa("properties"))){const r=this.properties,n=[...x9(r),...O9(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(Nw(s))}else e!==void 0&&r.push(Nw(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return S9(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var i;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)==null?void 0:i.toAttribute)!==void 0?n.converter:Cf).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,r){var i,o;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=n.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Cf;this._$Em=s,this[s]=c.fromAttribute(r,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,r,n){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(n??(n=i.getPropertyOptions(e)),!((n.hasChanged??p_)(o,r)||n.useDefault&&n.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(r)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var s;return(s=n.hostUpdated)==null?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Qi.elementStyles=[],Qi.shadowRootOptions={mode:"open"},Qi[Sa("elementProperties")]=new Map,Qi[Sa("finalized")]=new Map,Qd==null||Qd({ReactiveElement:Qi}),(Ss.reactiveElementVersions??(Ss.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Na=globalThis,el=Na.trustedTypes,xw=el?el.createPolicy("lit-html",{createHTML:t=>t}):void 0,g_="$lit$",ps=`lit$${Math.random().toFixed(9).slice(2)}$`,m_="?"+ps,k9=`<${m_}>`,vi=document,ic=()=>vi.createComment(""),oc=t=>t===null||typeof t!="object"&&typeof t!="function",Cp=Array.isArray,$9=t=>Cp(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Xd=`[ 	
\f\r]`,ua=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ow=/-->/g,Rw=/>/g,qs=RegExp(`>|${Xd}(?:([^\\s"'>=/]+)(${Xd}*=${Xd}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Dw=/'/g,kw=/"/g,y_=/^(?:script|style|textarea|title)$/i,w_=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),cq=w_(1),uq=w_(2),Oo=Symbol.for("lit-noChange"),Ct=Symbol.for("lit-nothing"),$w=new WeakMap,Js=vi.createTreeWalker(vi,129);function b_(t,e){if(!Cp(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return xw!==void 0?xw.createHTML(e):e}const U9=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ua;for(let a=0;a<r;a++){const c=t[a];let u,l,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,l=o.exec(c),l!==null);)h=o.lastIndex,o===ua?l[1]==="!--"?o=Ow:l[1]!==void 0?o=Rw:l[2]!==void 0?(y_.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=qs):l[3]!==void 0&&(o=qs):o===qs?l[0]===">"?(o=s??ua,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?qs:l[3]==='"'?kw:Dw):o===kw||o===Dw?o=qs:o===Ow||o===Rw?o=ua:(o=qs,s=void 0);const p=o===qs&&t[a+1].startsWith("/>")?" ":"";i+=o===ua?c+k9:d>=0?(n.push(u),c.slice(0,d)+g_+c.slice(d)+ps+p):c+ps+(d===-2?a:p)}return[b_(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class ac{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=U9(e,r);if(this.el=ac.createElement(u,n),Js.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Js.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(g_)){const h=l[o++],p=s.getAttribute(d).split(ps),f=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:f[2],strings:p,ctor:f[1]==="."?L9:f[1]==="?"?B9:f[1]==="@"?F9:kl}),s.removeAttribute(d)}else d.startsWith(ps)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(y_.test(s.tagName)){const d=s.textContent.split(ps),h=d.length-1;if(h>0){s.textContent=el?el.emptyScript:"";for(let p=0;p<h;p++)s.append(d[p],ic()),Js.nextNode(),c.push({type:2,index:++i});s.append(d[h],ic())}}}else if(s.nodeType===8)if(s.data===m_)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ps,d+1))!==-1;)c.push({type:7,index:i}),d+=ps.length-1}i++}}static createElement(e,r){const n=vi.createElement("template");return n.innerHTML=e,n}}function Ro(t,e,r=t,n){var o,a;if(e===Oo)return e;let s=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const i=oc(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=s:r._$Cl=s),s!==void 0&&(e=Ro(t,s._$AS(t,e.values),s,n)),e}class M9{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=((e==null?void 0:e.creationScope)??vi).importNode(r,!0);Js.currentNode=s;let i=Js.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Mc(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new j9(i,this,e)),this._$AV.push(u),c=n[++a]}o!==(c==null?void 0:c.index)&&(i=Js.nextNode(),o++)}return Js.currentNode=vi,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Mc{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=Ct,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Ro(this,e,r),oc(e)?e===Ct||e==null||e===""?(this._$AH!==Ct&&this._$AR(),this._$AH=Ct):e!==this._$AH&&e!==Oo&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):$9(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ct&&oc(this._$AH)?this._$AA.nextSibling.data=e:this.T(vi.createTextNode(e)),this._$AH=e}$(e){var i;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ac.createElement(b_(n.h,n.h[0]),this.options)),n);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(r);else{const o=new M9(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let r=$w.get(e.strings);return r===void 0&&$w.set(e.strings,r=new ac(e)),r}k(e){Cp(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new Mc(this.O(ic()),this.O(ic()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class kl{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=Ct,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Ct}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Ro(this,e,r,0),o=!oc(e)||e!==this._$AH&&e!==Oo,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Ro(this,a[n+c],r,c),u===Oo&&(u=this._$AH[c]),o||(o=!oc(u)||u!==this._$AH[c]),u===Ct?e=Ct:e!==Ct&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===Ct?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class L9 extends kl{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ct?void 0:e}}class B9 extends kl{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ct)}}class F9 extends kl{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Ro(this,e,r,0)??Ct)===Oo)return;const n=this._$AH,s=e===Ct&&n!==Ct||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==Ct&&(n===Ct||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class j9{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Ro(this,e)}}const eh=Na.litHtmlPolyfillSupport;eh==null||eh(ac,Mc),(Na.litHtmlVersions??(Na.litHtmlVersions=[])).push("3.3.0");const q9=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let s=n._$litPart$;if(s===void 0){const i=(r==null?void 0:r.renderBefore)??null;n._$litPart$=s=new Mc(e.insertBefore(ic(),i),i,void 0,r??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ai=globalThis;class Su extends Qi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=q9(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Oo}}var Yw;Su._$litElement$=!0,Su.finalized=!0,(Yw=ai.litElementHydrateSupport)==null||Yw.call(ai,{LitElement:Su});const th=ai.litElementPolyfillSupport;th==null||th({LitElement:Su});(ai.litElementVersions??(ai.litElementVersions=[])).push("4.2.0");let Pa,Ns,Ps;function lq(t,e){Pa=document.createElement("style"),Ns=document.createElement("style"),Ps=document.createElement("style"),Pa.textContent=ao(t).core.cssText,Ns.textContent=ao(t).dark.cssText,Ps.textContent=ao(t).light.cssText,document.head.appendChild(Pa),document.head.appendChild(Ns),document.head.appendChild(Ps),v_(e)}function v_(t){Ns&&Ps&&(t==="light"?(Ns.removeAttribute("media"),Ps.media="enabled"):(Ps.removeAttribute("media"),Ns.media="enabled"))}function z9(t){Pa&&Ns&&Ps&&(Pa.textContent=ao(t).core.cssText,Ns.textContent=ao(t).dark.cssText,Ps.textContent=ao(t).light.cssText)}function ao(t){return{core:oo`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Pr(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Pr((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Pr((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Pr((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Pr((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:oo`
      :root {
        --w3m-color-mix: ${Pr((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Pr(qn(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Pr(qn(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:oo`
      :root {
        --w3m-color-mix: ${Pr((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Pr(qn(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Pr(qn(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const dq=oo`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,hq=oo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,fq=oo`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,wa={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},H9={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ta={getMethodsByChainNamespace(t){return H9[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case ig.caipNetworkId:l.chains.push(ig.deprecatedCaipNetworkId);break;case og.caipNetworkId:l.chains.push(og.deprecatedCaipNetworkId);break}return l!=null&&l.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await Ia.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,r){for(const n of[...e,...r])if(n.includes("*")){const i=`^${n.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else if(n===t)return!0;return!1}};class Ap{constructor({provider:e,namespace:r}){this.id=z.CONNECTOR_ID.WALLET_CONNECT,this.name=_s.ConnectorNamesMap[z.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=_s.ConnectorImageIds[z.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=T.getCaipNetworks.bind(T),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=q.state.universalProviderConfigOverride,s=Ta.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Aa.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:W9})}}const W9=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class E_{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=r=>T.getCaipNetworks(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:z.CONNECTOR_ID.AUTH,type:"AUTH",name:z.CONNECTOR_NAMES.AUTH,provider:e,imageId:_s.ConnectorImageIds[z.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){se.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(s&&n==="AUTH"){const o=s,a=(i=se.state.preferredAccountTypes)==null?void 0:i[r.chainNamespace];await o.switchNetwork(r.caipNetworkId);const c=await o.getUser({chainId:r.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof Ap);if(!e)throw new Error("WalletConnectConnector not found");return e}}class V9 extends E_{setUniversalProvider(e){this.addConnector(new Ap({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const r=this.provider,n=((a=(o=(i=(s=r==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,u]=c.split(":");return u}).filter((c,u,l)=>l.indexOf(c)===u))||[];return Promise.resolve({accounts:n.map(c=>ue.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,u;if(!(e.caipNetwork&&ft.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(se.state.balanceLoading&&e.chainId===((c=T.state.activeCaipNetwork)==null?void 0:c.id))return{balance:se.state.balance||"0.00",symbol:se.state.balanceSymbol||""};const s=(await se.fetchTokenBalance()).find(l=>{var d,h;return l.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&l.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=T.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===z.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Ov.encode(new TextEncoder().encode(n)),pubkey:s}},(a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},(c=T.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,u;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===z.CHAIN.EVM)try{await((s=n.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Bp(r.id)}]}))}catch(l){if(l.code===wa.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===wa.ERROR_INVALID_CHAIN_ID||l.code===wa.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===wa.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=n.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:Bp(r.id),rpcUrls:[(a=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:a.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(c=r.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class G9{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{var s,i,o,a;if(r){const c=(i=(s=T.getNetworkData(r))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===n);if(c)return c;const u=(o=T.getNetworkData(r))==null?void 0:o.caipNetwork;return u||((a=T.getRequestedCaipNetworks(r).filter(d=>d.chainNamespace===r))==null?void 0:a[0])}return T.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>T.getCaipNetworks(r),this.getActiveChainNamespace=()=>T.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{T.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>T.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>T.state.activeChain===r||!r?T.state.activeCaipAddress:T.getAccountProp("caipAddress",r),this.setClientId=r=>{pe.setClientId(r)},this.getProvider=r=>qe.getProvider(r),this.getProviderType=r=>qe.getProviderId(r),this.getPreferredAccountType=r=>{var n;return(n=se.state.preferredAccountTypes)==null?void 0:n[r]},this.setCaipAddress=(r,n)=>{se.setCaipAddress(r,n)},this.setBalance=(r,n,s)=>{se.setBalance(r,n,s)},this.setProfileName=(r,n)=>{se.setProfileName(r,n)},this.setProfileImage=(r,n)=>{se.setProfileImage(r,n)},this.setUser=(r,n)=>{se.setUser(r,n),q.state.enableEmbedded&&ut.close()},this.resetAccount=r=>{se.resetAccount(r)},this.setCaipNetwork=r=>{T.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{T.setChainNetworkData(n,{caipNetwork:r})},this.setAllAccounts=(r,n)=>{se.setAllAccounts(r,n),q.setHasMultipleAddresses((r==null?void 0:r.length)>1)},this.setStatus=(r,n)=>{se.setStatus(r,n),te.isConnected()?J.setConnectionStatus("connected"):J.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>T.getAccountProp("address",r),this.setConnectors=r=>{const n=[...te.state.allConnectors,...r];te.setConnectors(n)},this.setConnections=(r,n)=>{he.setConnections(r,n)},this.fetchIdentity=r=>pe.fetchIdentity(r),this.getReownName=r=>Ia.getNamesForAddress(r),this.getConnectors=()=>te.getConnectors(),this.getConnectorImage=r=>K0.getConnectorImage(r),this.setConnectedWalletInfo=(r,n)=>{const s=qe.getProviderId(n),i=r?{...r,type:s}:void 0;se.setConnectedWalletInfo(i,n)},this.getIsConnectedState=()=>!!T.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{se.addAddressLabel(r,n,s)},this.removeAddressLabel=(r,n)=>{se.removeAddressLabel(r,n)},this.getAddress=r=>T.state.activeChain===r||!r?se.state.address:T.getAccountProp("address",r),this.setApprovedCaipNetworksData=r=>T.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{T.resetNetwork(r)},this.addConnector=r=>{te.addConnector(r)},this.resetWcConnection=()=>{he.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{se.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{se.setSmartAccountDeployed(r,n)},this.setSmartAccountEnabledNetworks=(r,n)=>{T.setSmartAccountEnabledNetworks(r,n)},this.setPreferredAccountType=(r,n)=>{se.setPreferredAccountType(r,n)},this.setEIP6963Enabled=r=>{q.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,r){const n=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(n!=null&&n.length)return[...new Set(n)];const s=r==null?void 0:r.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var r,n,s;this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),En.set({initialized:!0}),await this.syncExistingConnection(),((r=q.state.features)!=null&&r.email||Array.isArray((n=q.state.features)==null?void 0:n.socials)&&((s=q.state.features)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await de.fetchAllowedOrigins();if(e&&ue.isClient()){const r=window.location.origin;Ta.isOriginAllowed(r,e,wa.DEFAULT_ALLOWED_ANCESTORS)||Kt.open(Et.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Kt.open(Et.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,delete r.universalProvider,et.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(s=>s.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&cr.setThemeMode(e.themeMode),e.themeVariables&&cr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");T.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&T.setActiveCaipNetwork(r)}initializeConnectionController(e){he.setWcBasic(e.basic??!1)}initializeConnectorController(){te.initialize(this.chainNamespaces)}initializeOptionsController(e){var o;q.setDebug(e.debug!==!1),q.setEnableWalletConnect(e.enableWalletConnect!==!1),q.setEnableWalletGuide(e.enableWalletGuide!==!1),q.setEnableWallets(e.enableWallets!==!1),q.setEIP6963Enabled(e.enableEIP6963!==!1),q.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),q.setEnableAuthLogger(e.enableAuthLogger!==!1),q.setCustomRpcUrls(e.customRpcUrls),q.setSdkVersion(e.sdkVersion),q.setProjectId(e.projectId),q.setEnableEmbedded(e.enableEmbedded),q.setAllWallets(e.allWallets),q.setIncludeWalletIds(e.includeWalletIds),q.setExcludeWalletIds(e.excludeWalletIds),q.setFeaturedWalletIds(e.featuredWalletIds),q.setTokens(e.tokens),q.setTermsConditionsUrl(e.termsConditionsUrl),q.setPrivacyPolicyUrl(e.privacyPolicyUrl),q.setCustomWallets(e.customWallets),q.setFeatures(e.features),q.setAllowUnsupportedChain(e.allowUnsupportedChain),q.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),q.setPreferUniversalLinks(e.experimental_preferUniversalLinks),q.setDefaultAccountTypes(e.defaultAccountTypes);const r=J.getPreferredAccountTypes()||{},n={...q.state.defaultAccountTypes,...r};se.setPreferredAccountTypes(n);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),q.setMetadata(e.metadata),q.setDisableAppend(e.disableAppend),q.setEnableEmbedded(e.enableEmbedded),q.setSIWX(e.siwx),!e.projectId){Kt.open(Et.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===z.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");q.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,s;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=bn.getUnsupportedNetwork(`${r}:${e}`);T.setActiveCaipNetwork(n)}}getDefaultNetwork(){return bn.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return bn.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return bn.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return r?bn.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=T.state.activeChain,r=this.getAdapter(e),n=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!r)throw new Error("Adapter not found");const s=await r.connectWalletConnect(n);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),J.setConnectedNamespaces([...T.state.chains.keys()]),this.chainNamespaces.forEach(o=>{te.setConnectorId(Xe.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,m,w,b,v,C;const c=T.state.activeChain,u=i||c,l=this.getAdapter(u);if(i&&i!==c&&!o){const E=this.getCaipNetworks().find(y=>y.chainNamespace===i);E&&this.setCaipNetwork(E)}if(!l)throw new Error("Adapter not found");const d=this.getCaipNetwork(u),h=await l.connect({id:e,info:r,type:n,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(m=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:m.http)==null?void 0:w[0])||((C=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:C[0])});if(!h)return;J.addConnectedNamespace(u),this.syncProvider({...h,chainNamespace:u});const p=se.state.allAccounts,{accounts:f}=(p==null?void 0:p.length)>0?{accounts:[...p]}:await l.getAccounts({namespace:u,id:e});this.setAllAccounts(f,u),this.setStatus("connected",u),this.syncConnectedWalletInfo(u)},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{var a;const i=T.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),J.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const r=e||T.state.activeChain,n=this.getAdapter(r),s=qe.getProvider(r),i=qe.getProviderId(r);await(n==null?void 0:n.disconnect({provider:s,providerType:i})),J.removeConnectedNamespace(r),qe.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(void 0,r)},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(T.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:se.state.address,provider:qe.getProvider(T.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{const r=e.chainNamespace;if(ft.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(T.state.activeChain),s=qe.getProvider(r),i=await(n==null?void 0:n.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===z.CHAIN.EVM){const r=this.getAdapter(T.state.activeChain),n=qe.getProvider(T.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:se.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:T.state.activeChain}),se.state.profileImage||!1},getEnsAddress:async e=>await Ta.resolveReownName(e),writeContract:async e=>{const r=this.getAdapter(T.state.activeChain),n=this.getCaipNetwork(),s=this.getCaipAddress(),i=qe.getProvider(T.state.activeChain);if(!n||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(T.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(T.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(T.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(T.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(T.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(T.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}},updateBalance:e=>{const r=this.getCaipNetwork(e);!r||!se.state.address||this.updateNativeBalance(se.state.address,r==null?void 0:r.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},he.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,s,i,o;if(qe.getProviderId(T.state.activeChain)===Xe.CONNECTOR_TYPE_WALLET_CONNECT){const a=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=qe.getProvider(r),i=qe.getProviderId(r);if(e.chainNamespace===T.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Xe.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ts.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===n);return s?(s.construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),r[n]=s):r[n]=new V9({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=J.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(J.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id===i||u.caipNetworkId===i),a=T.state.activeChain===e,c=T.getAccountProp("address",e);if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=se.state.address,i=T.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=T.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=T.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=T.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var r,n,s;await this.getUniversalProvider(),this.universalProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||s.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=te.getConnectorId(e);switch(this.setStatus("connecting",e),r){case z.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case z.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,a,c;const r=this.getAdapter(e),n=te.getConnectorId(e),s=this.getCaipNetwork(e),i=te.getConnectors(e).find(u=>u.id===n);try{if(!r||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(r==null?void 0:r.syncConnection({namespace:e,id:i.id,chainId:s.id,rpcUrl:(c=(a=(o=s==null?void 0:s.rpcUrls)==null?void 0:o.default)==null?void 0:a.http)==null?void 0:c[0]}));if(u){const l=await(r==null?void 0:r.getAccounts({namespace:e,id:i.id}));l&&l.accounts.length>0?this.setAllAccounts(l.accounts,e):this.setAllAccounts([ue.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var a,c,u,l,d;const n=this.getAdapter(r),s=((l=(u=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:u[r])==null?void 0:l.accounts)||[],i=(d=T.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:p}=ts.parseCaipAddress(h);return p===(i==null?void 0:i.toString())})||s[0];if(o){const h=ts.validateCaipAddress(o),{chainId:p,address:f}=ts.parseCaipAddress(h);if(qe.setProviderId(r,Xe.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&T.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==z.CHAIN.EVM){const g=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:T.state.activeCaipNetwork});qe.setProvider(r,g)}else qe.setProvider(r,this.universalProvider);te.setConnectorId(z.CONNECTOR_ID.WALLET_CONNECT,r),J.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:f,chainId:p,chainNamespace:r})}else this.setStatus("disconnected",r);this.syncConnectedWalletInfo(r),await T.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,s,i,o,a;const r=(a=(o=(i=(s=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:u}=ts.parseCaipAddress(c);return u}).filter((c,u,l)=>l.indexOf(c)===u);r&&this.setAllAccounts(r.map(c=>ue.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){qe.setProviderId(s,e),qe.setProvider(s,r),te.setConnectorId(n,s)}async syncAllAccounts(e){const r=te.getConnectorId(e);if(!r)return;const n=this.getAdapter(e),s=await(n==null?void 0:n.getAccounts({namespace:e,id:r}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const r=e.chainNamespace===T.state.activeChain,n=T.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=J.getActiveNetworkProps(),c=i||a,u=((d=T.state.activeCaipNetwork)==null?void 0:d.name)===z.UNSUPPORTED_NETWORK_NAME,l=T.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let p=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),f=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!l&&!p&&!f){const m=this.getApprovedCaipNetworkIds()||[],w=m.find(v=>{var C;return((C=ts.parseCaipNetworkId(v))==null?void 0:C.chainId)===c.toString()}),b=m.find(v=>{var C;return((C=ts.parseCaipNetworkId(v))==null?void 0:C.chainNamespace)===o});p=this.getCaipNetworks().find(v=>v.caipNetworkId===w),f=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=p||f;(g==null?void 0:g.chainNamespace)===T.state.activeChain?q.state.enableNetworkSwitch&&!q.state.allowUnsupportedChain&&((h=T.state.activeCaipNetwork)==null?void 0:h.name)===z.UNSUPPORTED_NETWORK_NAME?T.showUnsupportedChainUI():this.setCaipNetwork(g):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),Rl.isLowerCaseMatch(s,se.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),r?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var s;const r=te.getConnectorId(e),n=qe.getProviderId(e);if(n===Xe.CONNECTOR_TYPE_ANNOUNCED||n===Xe.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>o.id===r);if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===Xe.CONNECTOR_TYPE_WALLET_CONNECT){const i=qe.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(r&&r===z.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===z.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!La.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>{var s;return n.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=T.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){var n,s,i,o,a,c,u,l,d,h;const e=n4.createLogger((p,...f)=>{p&&this.handleAlertError(p),console.error(...f)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(l=this.options)!=null&&l.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};q.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await FB.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{he.setUri(e)}),this.universalProvider.on("connect",he.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),he.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const r=this.getCaipNetworks().find(s=>s.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(Ta.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&ue.isCaipAddress(n[0])&&this.syncAccount(ts.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ue.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){et.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Et.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=Et.ALERT_ERRORS[o];a&&(Kt.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var s;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&he.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ut.open({...e,data:{swap:e.arguments}})}return ut.open(e)}async close(e=!1){await this.injectModalUi(),ut.close(e)}setLoading(e,r){ut.setLoading(e,r)}async disconnect(e){await he.disconnect(e)}getSIWX(){return q.state.siwx}getError(){return""}getChainId(){var e;return(e=T.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){Kt.open(Et.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await T.switchActiveNetwork(r)}getWalletProvider(){return T.state.activeChain?qe.state.providers[T.state.activeChain]:null}getWalletProviderType(){return qe.getProviderId(T.state.activeChain)}subscribeProviders(e){return qe.subscribeProviders(e)}getThemeMode(){return cr.state.themeMode}getThemeVariables(){return cr.state.themeVariables}setThemeMode(e){cr.setThemeMode(e),v_(cr.state.themeMode)}setTermsConditionsUrl(e){q.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){q.setPrivacyPolicyUrl(e)}setThemeVariables(e){cr.setThemeVariables(e),z9(cr.state.themeVariables)}subscribeTheme(e){return cr.subscribe(e)}getWalletInfo(){return se.state.connectedWalletInfo}getAccount(e){var o;const r=te.getAuthConnector(e),n=T.getAccountData(e),s=T.state.activeChain,i=J.getConnectedConnectorId(e);if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:ue.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r&&i===z.CONNECTOR_ID.AUTH?{user:n.user?{...n.user,username:J.getConnectedSocialUsername()}:void 0,authProvider:n.socialProvider||"email",accountType:(o=n.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?T.subscribeChainProp("accountState",n,r):T.subscribe(n),te.subscribe(n)}subscribeNetwork(e){return T.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return se.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){se.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){T.subscribeKey("activeCaipNetwork",e)}getState(){return En.state}subscribeState(e){return En.subscribe(e)}showErrorMessage(e){Jr.showError(e)}showSuccessMessage(e){Jr.showSuccess(e)}getEvent(){return{...et.state}}subscribeEvents(e){return et.subscribe(e)}replace(e){Se.replace(e)}redirect(e){Se.push(e)}popTransactionStack(e){Se.popTransactionStack(e)}isOpen(){return ut.state.open}isTransactionStackEmpty(){return Se.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=Se.state.transactionStack[Se.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){q.setFeatures(e)}updateOptions(e){const n={...q.state||{},...e};q.setOptions(n)}setConnectMethodsOrder(e){q.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){q.setWalletFeaturesOrder(e)}setCollapseWallets(e){q.setCollapseWallets(e)}setSocialsOrder(e){q.setSocialsOrder(e)}getConnectMethodsOrder(){return _f.getConnectOrderMethod(q.state.features,te.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||T.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&T.removeNetwork(e,r)}}let Uw=!1;class K9 extends G9{setupAuthConnectorListeners(e){e.onRpcRequest(r=>{br.checkIfRequestExists(r)?br.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(Dt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(Dt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close(!0):this.popTransactionStack(!0))}),e.onRpcSuccess((r,n)=>{const s=br.checkIfRequestIsSafe(n),i=se.state.address,o=T.state.activeCaipNetwork;s||(this.isTransactionStackEmpty()?(this.close(!0),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)):(this.popTransactionStack(),i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{const r=T.state.activeChain;te.getConnectorId(r)===z.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,r),this.setLoading(!1,r))}),e.onConnect(r=>{var u,l;const n=T.state.activeChain,s=n===z.CHAIN.EVM?`eip155:${r.chainId}:${r.address}`:`${r.chainId}:${r.address}`,i=q.state.defaultAccountTypes[n],o=(u=se.state.preferredAccountTypes)==null?void 0:u[n],a=r.preferredAccountType||o||i;Rl.isLowerCaseMatch(r.address,se.state.address)||this.syncIdentity({address:r.address,chainId:r.chainId,chainNamespace:n}),this.setCaipAddress(s,n),this.setUser({...se.state.user||{},...r},n),this.setSmartAccountDeployed(!!r.smartAccountDeployed,n),this.setPreferredAccountType(a,n);const c=(l=r.accounts)==null?void 0:l.map(d=>ue.createAccount(n,d.address,d.type||o||i));this.setAllAccounts(c||[ue.createAccount(n,r.address,r.preferredAccountType||a)],n),this.setLoading(!1,n)}),e.onSocialConnected(({userName:r})=>{this.setUser({...se.state.user||{},username:r},T.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(r=>{this.setSmartAccountEnabledNetworks(r,T.state.activeChain)}),e.onSetPreferredAccount(({address:r,type:n})=>{r&&this.setPreferredAccountType(n,T.state.activeChain)})}async syncAuthConnector(e,r){var l,d,h,p;const n=z.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!n)return;this.setLoading(!0,r);const s=e.getLoginEmailUsed();this.setLoading(s,r),s&&this.setStatus("connecting",r);const i=e.getEmail(),o=e.getUsername();this.setUser({...((l=se.state)==null?void 0:l.user)||{},username:o,email:i},T.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=cr.getSnapshot(),u=q.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:qn(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),r&&n&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:z.CONNECTOR_ID.AUTH,info:{name:z.CONNECTOR_ID.AUTH},type:Xe.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=T.state.activeCaipNetwork)==null?void 0:h.id,chain:r})),this.setStatus("connected",r)):te.getConnectorId(r)===z.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),J.removeConnectedNamespace(r))),this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){var r;try{if(!ue.isTelegram())return;const n=J.getTelegramSocialProvider();if(!n||typeof window>"u"||typeof document>"u")return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;se.setSocialProvider(n,e),await((r=this.authProvider)==null?void 0:r.init());const o=te.getAuthConnector();n&&o&&(this.setLoading(!0,e),await he.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),J.setConnectedSocialProvider(n),J.removeTelegramSocialProvider(),et.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){var o,a,c,u,l,d,h,p,f,g,m,w,b;if(!z.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=((a=(o=this.options)==null?void 0:o.features)==null?void 0:a.email)===void 0?ft.DEFAULT_FEATURES.email:(u=(c=this.options)==null?void 0:c.features)==null?void 0:u.email,s=(d=(l=this.options)==null?void 0:l.features)!=null&&d.socials?((f=(p=(h=this.options)==null?void 0:h.features)==null?void 0:p.socials)==null?void 0:f.length)>0:((m=(g=this.options)==null?void 0:g.features)==null?void 0:m.socials)??ft.DEFAULT_FEATURES.socials,i=n||s;!this.authProvider&&((w=this.options)!=null&&w.projectId)&&i&&(this.authProvider=oi.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(b=this.getCaipNetwork(e))==null?void 0:b.caipNetworkId,abortController:Et.EmbeddedWalletAbortController,onTimeout:v=>{v==="iframe_load_failed"?Kt.open(Et.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):v==="iframe_request_timeout"?Kt.open(Et.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):v==="unverified_domain"&&Kt.open(Et.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),En.subscribeOpen(v=>{var C;!v&&this.isTransactionStackEmpty()&&((C=this.authProvider)==null||C.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var r,n,s;this.createAuthProvider(e),this.authProvider&&((s=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setAuthProvider)==null||s.call(n,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&de.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var i,o;if(!e)return;const r=T.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===T.state.activeChain&&s){const a=this.getAdapter(n),c=qe.getProvider(n),u=qe.getProviderId(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:c,providerType:u})),this.setCaipNetwork(e)}else{const c=qe.getProviderId(r)===Xe.CONNECTOR_TYPE_AUTH,u=qe.getProviderId(n),l=u===Xe.CONNECTOR_TYPE_AUTH,d=z.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((c&&u===void 0||l)&&d)try{T.state.activeChain=e.chainNamespace,await((o=(i=this.connectionControllerClient)==null?void 0:i.connectExternal)==null?void 0:o.call(i,{id:z.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:Xe.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch{const p=this.getAdapter(n);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Xe.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:r,chainNamespace:n}){var o;const s=`${n}:${r}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(n!==z.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,n),this.setProfileImage(c,n)}catch{await this.syncReownName(e,n),r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=qe.getProviderId(e);if(r===Xe.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=J.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!Uw&&ue.isClient()){const e={...ft.DEFAULT_FEATURES,...this.options.features},r=[];if(e&&((e.email||e.socials&&e.socials.length)&&r.push(or(()=>import("./chunk.embedded-wallet-DVGm7-g7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),e.email&&r.push(or(()=>import("./chunk.email-B2cBLtDF.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),e.socials&&r.push(or(()=>import("./chunk.socials-DCYOWAeP.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),e.swaps&&r.push(or(()=>import("./chunk.swaps-DtXEwcHU.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(or(()=>import("./chunk.send-mf9F4b81.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(or(()=>import("./chunk.receive-CxraBBt8.js"),__vite__mapDeps([28,1,29,3,19]))),e.onramp&&r.push(or(()=>import("./chunk.onramp-Ci8c_WMp.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),e.history&&r.push(or(()=>import("./chunk.transactions-CHsmNtxd.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(or(()=>import("./chunk.index-DbhJyiJW.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18])))),await Promise.all([...r,or(()=>import("./chunk.index-ClBDkVN4.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),or(()=>import("./chunk.w3m-modal-s7bnvSM9.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))]),!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!q.state.disableAppend&&!q.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}Uw=!0}}}const Y9="1.7.6";function Z9(t){let e=[],r,n;function s(a){return La.parseEvmChainId(a)||1}function i(){return r||(r=oi.getInstance({projectId:t.options.projectId,enableLogger:t.options.enableAuthLogger,onTimeout:a=>{a==="iframe_load_failed"?Kt.open(Et.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?Kt.open(Et.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&Kt.open(Et.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Et.EmbeddedWalletAbortController})),r}async function o(a={}){var g,m;const c=i();let u=a.chainId;if(a.isReconnecting){const w=La.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(u=w||b,!u)throw new Error("ChainId not found in provider")}const l=(m=se.state.preferredAccountTypes)==null?void 0:m.eip155,{address:d,chainId:h,accounts:p}=await c.connect({chainId:u,preferredAccountType:l,socialUri:a.socialUri});e=(p==null?void 0:p.map(w=>w.address))||[d];const f=s(h);return{accounts:e,account:d,chainId:f,chain:{id:f,unsuported:!1}}}return a=>({id:z.CONNECTOR_ID.AUTH,name:z.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:z.CHAIN.EVM,async connect(c={}){if(n)return n;n||(n=new Promise(l=>{l(o(c))}));const u=await n;return n=void 0,u},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=oi.getInstance({projectId:t.options.projectId,enableLogger:t.options.enableAuthLogger,abortController:Et.EmbeddedWalletAbortController,onTimeout:c=>{c==="iframe_load_failed"?Kt.open(Et.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Kt.open(Et.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Kt.open(Et.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:u}=await c.getChainId();return s(u)},async isAuthorized(){const c=await this.getProvider();return Promise.resolve(c.getLoginEmailUsed())},async switchChain({chainId:c}){var u,l;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new xa(new Error("chain not found on connector."));const h=await this.getProvider(),p=(u=se.state.preferredAccountTypes)==null?void 0:u.eip155,f=await h.connect({chainId:c,preferredAccountType:p});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(g=>g.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new xa(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Xi)})},onChainChanged(c){const u=Number(c);a.emitter.emit("change",{chainId:u})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}Ip.type="walletConnect";function Ip(t,e){const r=t.isNewChainsStale??!0;let n,s,i,o,a,c,u;return l=>({id:"walletConnect",name:"WalletConnect",type:Ip.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,p,f;try{const g=T.getCaipNetworks(),m=await this.getProvider();if(!m)throw new us;a||(a=this.onDisplayUri,m.on("display_uri",a));const w=await this.isChainsStale();m.session&&w&&await m.disconnect();const b=q.state.universalProviderConfigOverride;if(!m.session||w){const I=Ta.createNamespaces(g,b);await m.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(x=>Number(x.id)))}const v=await this.getAccounts(),C=await this.getChainId(),E=(f=(p=(h=m.session)==null?void 0:h.namespaces)==null?void 0:p.eip155)==null?void 0:f.chains,y=E==null?void 0:E.some(I=>Number(I.split(":")[1])===C);let _=1;y?_=C:E!=null&&E[0]&&(_=Number(E[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),u||(u=this.onDisconnect.bind(this),m.on("disconnect",u)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const P=b==null?void 0:b.defaultChain;return m.setDefaultChain(P??`eip155:${_}`),{accounts:v,chainId:_}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new xr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),u&&(d==null||d.removeListener("disconnect",u),u=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var f,g,m;const d=await this.getProvider();if(!((f=d==null?void 0:d.session)!=null&&f.namespaces))return[];const h=(m=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[z.CHAIN.EVM])==null?void 0:m.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var f,g;n||(n=await e.getUniversalProvider(),n==null||n.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=J.getActiveNamespace(),p=(f=e.getCaipNetwork())==null?void 0:f.id;if(d&&p!==d&&h){const m=J.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),b=w==null?void 0:w.find(v=>v.id===m);b&&b.chainNamespace===z.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return n},async getChainId(){var g,m,w,b;const d=(g=e.getCaipNetwork(z.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const p=(b=(w=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[z.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:b[0],f=T.getCaipNetworks().find(v=>v.id===p);return f==null?void 0:f.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,m,w,b;const p=await this.getProvider();if(!p)throw new us;const f=T.getCaipNetworks().find(v=>v.id===h);if(!f)throw new xa(new ka);try{await p.request({method:"wallet_switchEthereumChain",params:[{chainId:Pu(h)}]}),f!=null&&f.caipNetworkId&&p.setDefaultChain(f==null?void 0:f.caipNetworkId),l.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...f,id:f.id}}catch(v){const C=v;if(/(?:user rejected)/iu.test(C.message))throw new xr(C);try{let E;d!=null&&d.blockExplorerUrls?E=d.blockExplorerUrls:E=(g=f.blockExplorers)!=null&&g.default.url?[(m=f.blockExplorers)==null?void 0:m.default.url]:[];const y=((b=(w=f.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:b.http)||[],_={blockExplorerUrls:E,chainId:Pu(h),chainName:f.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:f.nativeCurrency,rpcUrls:y};await p.request({method:"wallet_addEthereumChain",params:[_]});const P=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...P,h]),{...f,id:f.id}}catch(E){throw new xr(E)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:d.map(h=>Xi(h))})},onChainChanged(d){const h=Number(d);l.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(T.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),u&&(h.removeListener("disconnect",u),u=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){l.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var p,f,g;if(!((p=n==null?void 0:n.session)!=null&&p.namespaces))return[];const d=(g=(f=n==null?void 0:n.session)==null?void 0:f.namespaces[z.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=l.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!r)return!1;const d=l.chains.map(f=>f.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(f=>d.includes(f)))return!1;const p=await this.getRequestedChainsIds();return!d.every(f=>p.includes(Number(f)))},async setRequestedChainsIds(d){var h;await((h=l.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const la=tt({pendingTransactions:0}),Mw={state:la,subscribeKey(t,e){return qt(la,t,e)},increase(t){la[t]+=1},decrease(t){la[t]-=1},reset(t){la[t]=0}};function J9(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}const Q9={enable:!1,pollingInterval:3e4};class X9 extends E_{constructor(e){const r=bn.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=z.CHAIN.EVM,this.adapterType=z.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Q9,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:r})}construct(e){this.setupWatchers()}async getAccounts(e){var i;const r=this.getWagmiConnector(e.id);if(!r)return{accounts:[]};if(r.id===z.CONNECTOR_ID.AUTH){const o=await r.getProvider();if(!(o!=null&&o.user))return{accounts:[]};const{address:a,accounts:c}=o.user;return Promise.resolve({accounts:(c||[{address:a,type:"eoa"}]).map(u=>ue.createAccount("eip155",u.address,u.type))})}const{addresses:n,address:s}=$a(this.wagmiConfig);return Promise.resolve({accounts:(i=n||[s])==null?void 0:i.map(o=>ue.createAccount("eip155",o||"","eoa"))})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(r=>r.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===z.CHAIN.EVM);const r={},n=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=bn.getCaipNetworkId(s);i?r[s.id]=bn.extendWagmiTransports(s,e.projectId,i):r[s.id]=bn.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=iP({...e,chains:this.wagmiChains,connectors:n,transports:r})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=MN(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),Mw.increase("pendingTransactions")}});const e=Mw.subscribeKey("pendingTransactions",r=>{var n;r>=z.LIMITS.PENDING_TRANSACTIONS&&((n=this.unwatchPendingTransactions)==null||n.call(this),e())})}setupWatchers(){H0(this.wagmiConfig,{onChange:(e,r)=>{e.status==="disconnected"&&r.address&&this.emit("disconnect"),e.status==="connected"&&((e.address!==(r==null?void 0:r.address)||r.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId})),e.chainId!==(r==null?void 0:r.chainId)&&this.emit("switchNetwork",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){var n,s;const r=[];if(e.enableCoinbase!==!1)try{const{coinbaseWallet:i}=await or(async()=>{const{coinbaseWallet:o}=await import("./chunk.index-r3el-hAz.js");return{coinbaseWallet:o}},[]);i&&r.push(i({version:"4",appName:((n=e.metadata)==null?void 0:n.name)??"Unknown",appLogoUrl:((s=e.metadata)==null?void 0:s.icons[0])??"Unknown",preference:e.coinbasePreference??"all"}))}catch(i){console.error("Failed to import Coinbase Wallet SDK:",i)}r.forEach(i=>{const o=this.wagmiConfig._internal.connectors.setup(i);this.wagmiConfig._internal.connectors.setState(a=>[...a,o])})}addWagmiConnectors(e,r){var o,a,c,u,l,d;const n=[];e.enableWalletConnect!==!1&&n.push(Ip(e,r)),e.enableInjected!==!1&&n.push(ml({shimDisconnect:!0}));const s=((o=e.features)==null?void 0:o.email)===void 0?ft.DEFAULT_FEATURES.email:(a=e.features)==null?void 0:a.email,i=(c=e.features)!=null&&c.socials?((l=(u=e.features)==null?void 0:u.socials)==null?void 0:l.length)>0:((d=e.features)==null?void 0:d.socials)??ft.DEFAULT_FEATURES.socials;(s||i)&&n.push(Z9({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),n.forEach(h=>{const p=this.wagmiConfig._internal.connectors.setup(h);this.wagmiConfig._internal.connectors.setState(f=>[...f,p])})}async signMessage(e){try{return{signature:await kN(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:r,address:n}=$a(this.wagmiConfig),s={account:n,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:r,type:"legacy",parameters:["nonce"]};await RN(this.wagmiConfig,s);const i=await DN(this.wagmiConfig,s);return await LN(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:r,...n}=e,s=Number(La.caipNetworkIdToNumber(r.caipNetworkId));return{hash:await BN(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:n.tokenAddress,account:n.fromAddress,abi:n.abi,functionName:n.method,args:n.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await NN(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Z_(e.value,e.decimals)}formatUnits(e){return rl(e.value,e.decimals)}async addWagmiConnector(e,r){var s;if(e.id===z.CONNECTOR_ID.AUTH||e.id===z.CONNECTOR_ID.WALLET_CONNECT)return;const n=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:_s.ConnectorExplorerIds[e.id],imageUrl:((s=r==null?void 0:r.connectorImages)==null?void 0:s[e.id])??e.icon,name:_s.ConnectorNamesMap[e.id]??e.name,imageId:_s.ConnectorImageIds[e.id],type:_s.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===z.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:n,chain:this.namespace,chains:[]})}async syncConnectors(e,r){UN(this.wagmiConfig,{onChange:n=>n.forEach(s=>this.addWagmiConnector(s,e))}),await Promise.all(this.wagmiConfig.connectors.map(n=>this.addWagmiConnector(n,e))),this.addWagmiConnectors(e,r),await this.addThirdPartyConnectors(e)}async syncConnection(e){var a;const{id:r}=e,s=Us(this.wagmiConfig).find(c=>c.connector.id===r),i=this.getWagmiConnector(r),o=await(i==null?void 0:i.getProvider());return{chainId:Number(s==null?void 0:s.chainId),address:s==null?void 0:s.accounts[0],provider:o,type:(a=s==null?void 0:s.connector.type)==null?void 0:a.toUpperCase(),id:s==null?void 0:s.connector.id}}async connectWalletConnect(e){const r=this.getWalletConnectConnector();await r.authenticate();const n=this.getWagmiConnector("walletConnect");if(!n)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await yg(this.wagmiConfig,{connector:n,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await bg(this.wagmiConfig,{chainId:s.chainId}),{clientId:await r.provider.client.core.crypto.getClientId()}}async connect(e){var l,d,h,p,f;const{id:r,provider:n,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(r);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(n&&i&&c.id===z.CONNECTOR_ID.EIP6963&&((l=c.setEip6963Wallet)==null||l.call(c,{provider:n,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(f=(p=this.wagmiConfig.state)==null?void 0:p.connections)==null?void 0:f.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:n,type:s,id:r}}const u=await yg(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:u.accounts[0],chainId:u.chainId,provider:n,type:s,id:r}}async reconnect(e){const{id:r}=e,n=this.getWagmiConnector(r);if(!n)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Th(this.wagmiConfig,{connectors:[n]})}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&this.wagmiConfig){const s=`${n.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=J.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,u;try{const l=Number(e.chainId),d=await ON(this.wagmiConfig,{address:e.address,chainId:l,token:(u=(c=e.tokens)==null?void 0:c[n.caipNetworkId])==null?void 0:u.address});J.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(l){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",l),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Us(this.wagmiConfig);await Promise.all(e.map(async r=>{const n=this.getWagmiConnector(r.connector.id);n&&await SN(this.wagmiConfig,{connector:n})}))}async switchNetwork(e){await bg(this.wagmiConfig,{chainId:e.caipNetwork.id}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const n=Us(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const l=J9(o)[e];if(l)return l}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const n=Us(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const n=Us(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const n=Us(this.wagmiConfig)[0],s=n?this.getWagmiConnector(n.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const r=Us(this.wagmiConfig),n=this.getWagmiConnector("walletConnect");n&&!r.find(s=>s.connector.id===n.id)&&Th(this.wagmiConfig,{connectors:[n]})}),this.addConnector(new Ap({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const ej=cb(),__=[sS,F1,j1,q1,z1,H1,W1,G1,K1,Y1,aA,cA,uA,dA,hA,fA,pA,mA,nS,iS,oS,aS,cS,uS,lS,dS,hS,fS,pS,gS,mS,yS,gA],Sp=new X9({networks:__,projectId:ej,ssr:!1,autoConnect:!1}),tj=Sp.wagmiConfig;function rj(){async function t(e){await he.disconnect(e==null?void 0:e.namespace)}return{disconnect:t}}let Gt;function nj(t){t&&(Gt=t)}function sj(){if(!Gt)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(r){await(Gt==null?void 0:Gt.open(r))}async function e(){await(Gt==null?void 0:Gt.close())}return{open:t,close:e}}function ij(){if(!Gt)throw new Error('Please call "createAppKit" before using "useAppKitState" hook');const[t,e]=ch({...Gt.getState(),initialized:!1});return Nu(()=>{if(Gt){e({...Gt.getState()});const r=Gt==null?void 0:Gt.subscribeState(n=>{e({...n})});return()=>{r==null||r()}}return()=>null},[]),t}let du;function oj(t){return du||(du=new K9({...t,sdkVersion:ue.generateSdkVersion(t.adapters??[],"react",Y9)}),nj(du)),du}function aj(t){const{children:e,config:r,initialState:n,reconnectOnMount:s=!0}=t,{onMount:i}=oP(r,{initialState:n,reconnectOnMount:s});r._internal.ssr||i();const o=ib(!0);return Nu(()=>{if(o.current&&r._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const C_=L_(void 0);function cj(t){const{children:e,config:r}=t,n={value:r};return Mp(aj,t,Mp(C_.Provider,n,e))}const uj="2.15.4",lj=()=>`wagmi@${uj}`;class dj extends Qn{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return lj()}}class hj extends dj{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function fj(t={}){const e=t.config??B_(C_);if(!e)throw new hj;return e}var rh={exports:{}},nh={},sh={exports:{}},ih={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function pj(){if(Lw)return ih;Lw=1;var t=If;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var p=h(),f=n({inst:{value:p,getSnapshot:h}}),g=f[0].inst,m=f[1];return i(function(){g.value=p,g.getSnapshot=h,c(g)&&m({inst:g})},[d,p,h]),s(function(){return c(g)&&m({inst:g}),d(function(){c(g)&&m({inst:g})})},[d]),o(p),p}function c(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!r(d,p)}catch{return!0}}function u(d,h){return h()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return ih.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:l,ih}var Bw;function gj(){return Bw||(Bw=1,sh.exports=pj()),sh.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function mj(){if(Fw)return nh;Fw=1;var t=If,e=gj();function r(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,i=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return nh.useSyncExternalStoreWithSelector=function(u,l,d,h,p){var f=i(null);if(f.current===null){var g={hasValue:!1,value:null};f.current=g}else g=f.current;f=a(function(){function w(y){if(!b){if(b=!0,v=y,y=h(y),p!==void 0&&g.hasValue){var _=g.value;if(p(_,y))return C=_}return C=y}if(_=C,n(v,y))return _;var P=h(y);return p!==void 0&&p(_,P)?(v=y,_):(v=y,C=P)}var b=!1,v,C,E=d===void 0?null:d;return[function(){return w(l())},E===null?void 0:function(){return w(E())}]},[l,d,h,p]);var m=s(u,f[0],f[1]);return o(function(){g.hasValue=!0,g.value=m},[m]),c(m),m},nh}var jw;function yj(){return jw||(jw=1,rh.exports=mj()),rh.exports}var wj=yj();const oh=t=>typeof t=="object"&&!Array.isArray(t);function bj(t,e,r=e,n=Ua){const s=ib([]),i=wj.useSyncExternalStoreWithSelector(t,e,r,o=>o,(o,a)=>{if(oh(o)&&oh(a)&&s.current.length){for(const c of s.current)if(!n(o[c],a[c]))return!1;return!0}return n(o,a)});return F_(()=>{if(oh(i)){const o={...i};let a={};for(const[c,u]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),u)}};return Object.defineProperties(o,a),o}return i},[i])}function vj(t={}){const e=fj(t);return bj(r=>H0(e,{onChange:r}),()=>$a(e))}var $l=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ul=typeof window>"u"||"Deno"in globalThis;function Vr(){}function Ej(t,e){return typeof t=="function"?t(e):t}function _j(t){return typeof t=="number"&&t>=0&&t!==1/0}function Cj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function qw(t,e){return typeof t=="function"?t(e):t}function Aj(t,e){return typeof t=="function"?t(e):t}function zw(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(n){if(e.queryHash!==Np(o,e.options))return!1}else if(!uc(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Hw(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(cc(e.options.mutationKey)!==cc(i))return!1}else if(!uc(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Np(t,e){return((e==null?void 0:e.queryKeyHashFn)||cc)(t)}function cc(t){return JSON.stringify(t,(e,r)=>Af(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function uc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>uc(t[r],e[r])):!1}function A_(t,e){if(t===e)return t;const r=Ww(t)&&Ww(e);if(r||Af(t)&&Af(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),o=i.length,a=r?[]:{};let c=0;for(let u=0;u<o;u++){const l=r?u:i[u];(!r&&n.includes(l)||r)&&t[l]===void 0&&e[l]===void 0?(a[l]=void 0,c++):(a[l]=A_(t[l],e[l]),a[l]===t[l]&&t[l]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function Ww(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Af(t){if(!Vw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Vw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Vw(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ij(t){return new Promise(e=>{setTimeout(e,t)})}function Sj(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?A_(t,e):e}function Nj(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Pj(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Pp=Symbol();function I_(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Pp?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Qs,gs,co,Zw,Tj=(Zw=class extends $l{constructor(){super();xe(this,Qs);xe(this,gs);xe(this,co);we(this,co,e=>{if(!Ul&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){L(this,gs)||this.setEventListener(L(this,co))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,gs))==null||e.call(this),we(this,gs,void 0))}setEventListener(e){var r;we(this,co,e),(r=L(this,gs))==null||r.call(this),we(this,gs,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){L(this,Qs)!==e&&(we(this,Qs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof L(this,Qs)=="boolean"?L(this,Qs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qs=new WeakMap,gs=new WeakMap,co=new WeakMap,Zw),S_=new Tj,uo,ms,lo,Jw,xj=(Jw=class extends $l{constructor(){super();xe(this,uo,!0);xe(this,ms);xe(this,lo);we(this,lo,e=>{if(!Ul&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){L(this,ms)||this.setEventListener(L(this,lo))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,ms))==null||e.call(this),we(this,ms,void 0))}setEventListener(e){var r;we(this,lo,e),(r=L(this,ms))==null||r.call(this),we(this,ms,e(this.setOnline.bind(this)))}setOnline(e){L(this,uo)!==e&&(we(this,uo,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return L(this,uo)}},uo=new WeakMap,ms=new WeakMap,lo=new WeakMap,Jw),tl=new xj;function Oj(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function Rj(t){return Math.min(1e3*2**t,3e4)}function N_(t){return(t??"online")==="online"?tl.isOnline():!0}var P_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ah(t){return t instanceof P_}function T_(t){let e=!1,r=0,n=!1,s;const i=Oj(),o=g=>{var m;n||(h(new P_(g)),(m=t.abort)==null||m.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>S_.isFocused()&&(t.networkMode==="always"||tl.isOnline())&&t.canRun(),l=()=>N_(t.networkMode)&&t.canRun(),d=g=>{var m;n||(n=!0,(m=t.onSuccess)==null||m.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var m;n||(n=!0,(m=t.onError)==null||m.call(t,g),s==null||s(),i.reject(g))},p=()=>new Promise(g=>{var m;s=w=>{(n||u())&&g(w)},(m=t.onPause)==null||m.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),f=()=>{if(n)return;let g;const m=r===0?t.initialPromise:void 0;try{g=m??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var y;if(n)return;const b=t.retry??(Ul?0:3),v=t.retryDelay??Rj,C=typeof v=="function"?v(r,w):v,E=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,w);if(e||!E){h(w);return}r++,(y=t.onFail)==null||y.call(t,r,w),Ij(C).then(()=>u()?void 0:p()).then(()=>{e?h(w):f()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:l,start:()=>(l()?f():p().then(f),i)}}var Dj=t=>setTimeout(t,0);function kj(){let t=[],e=0,r=a=>{a()},n=a=>{a()},s=Dj;const i=a=>{e?t.push(a):s(()=>{r(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{n(()=>{a.forEach(c=>{r(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Yt=kj(),Xs,Qw,x_=(Qw=class{constructor(){xe(this,Xs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_j(this.gcTime)&&we(this,Xs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ul?1/0:5*60*1e3))}clearGcTimeout(){L(this,Xs)&&(clearTimeout(L(this,Xs)),we(this,Xs,void 0))}},Xs=new WeakMap,Qw),ho,fo,Or,ei,Ft,lc,ti,Gr,Mn,Xw,$j=(Xw=class extends x_{constructor(e){super();xe(this,Gr);xe(this,ho);xe(this,fo);xe(this,Or);xe(this,ei);xe(this,Ft);xe(this,lc);xe(this,ti);we(this,ti,!1),we(this,lc,e.defaultOptions),this.setOptions(e.options),this.observers=[],we(this,ei,e.client),we(this,Or,L(this,ei).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,we(this,ho,Mj(this.options)),this.state=e.state??L(this,ho),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=L(this,Ft))==null?void 0:e.promise}setOptions(e){this.options={...L(this,lc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,Or).remove(this)}setData(e,r){const n=Sj(this.state.data,e,this.options);return Lt(this,Gr,Mn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Lt(this,Gr,Mn).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=L(this,Ft))==null?void 0:n.promise;return(s=L(this,Ft))==null||s.cancel(e),r?r.then(Vr).catch(Vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,ho))}isActive(){return this.observers.some(e=>Aj(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Cj(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=L(this,Ft))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=L(this,Ft))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),L(this,Or).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(L(this,Ft)&&(L(this,ti)?L(this,Ft).cancel({revert:!0}):L(this,Ft).cancelRetry()),this.scheduleGc()),L(this,Or).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lt(this,Gr,Mn).call(this,{type:"invalidate"})}fetch(e,r){var c,u,l;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,Ft))return L(this,Ft).continueRetry(),L(this,Ft).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(we(this,ti,!0),n.signal)})},i=()=>{const d=I_(this.options,r),h={client:L(this,ei),queryKey:this.queryKey,meta:this.meta};return s(h),we(this,ti,!1),this.options.persister?this.options.persister(d,h,this):d(h)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:L(this,ei),state:this.state,fetchFn:i};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),we(this,fo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Lt(this,Gr,Mn).call(this,{type:"fetch",meta:(l=o.fetchOptions)==null?void 0:l.meta});const a=d=>{var h,p,f,g;ah(d)&&d.silent||Lt(this,Gr,Mn).call(this,{type:"error",error:d}),ah(d)||((p=(h=L(this,Or).config).onError)==null||p.call(h,d,this),(g=(f=L(this,Or).config).onSettled)==null||g.call(f,this.state.data,d,this)),this.scheduleGc()};return we(this,Ft,T_({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var h,p,f,g;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(m){a(m);return}(p=(h=L(this,Or).config).onSuccess)==null||p.call(h,d,this),(g=(f=L(this,Or).config).onSettled)==null||g.call(f,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,h)=>{Lt(this,Gr,Mn).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{Lt(this,Gr,Mn).call(this,{type:"pause"})},onContinue:()=>{Lt(this,Gr,Mn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),L(this,Ft).start()}},ho=new WeakMap,fo=new WeakMap,Or=new WeakMap,ei=new WeakMap,Ft=new WeakMap,lc=new WeakMap,ti=new WeakMap,Gr=new WeakSet,Mn=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Uj(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return ah(s)&&s.revert&&L(this,fo)?{...L(this,fo),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Yt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),L(this,Or).notify({query:this,type:"updated",action:e})})},Xw);function Uj(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:N_(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Mj(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var pn,eb,Lj=(eb=class extends $l{constructor(e={}){super();xe(this,pn);this.config=e,we(this,pn,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??Np(s,r);let o=this.get(i);return o||(o=new $j({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,pn).has(e.queryHash)||(L(this,pn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=L(this,pn).get(e.queryHash);r&&(e.destroy(),r===e&&L(this,pn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,pn).get(e)}getAll(){return[...L(this,pn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>zw(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>zw(e,n)):r}notify(e){Yt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},pn=new WeakMap,eb),gn,Vt,ri,mn,cs,tb,Bj=(tb=class extends x_{constructor(e){super();xe(this,mn);xe(this,gn);xe(this,Vt);xe(this,ri);this.mutationId=e.mutationId,we(this,Vt,e.mutationCache),we(this,gn,[]),this.state=e.state||Fj(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){L(this,gn).includes(e)||(L(this,gn).push(e),this.clearGcTimeout(),L(this,Vt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){we(this,gn,L(this,gn).filter(r=>r!==e)),this.scheduleGc(),L(this,Vt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){L(this,gn).length||(this.state.status==="pending"?this.scheduleGc():L(this,Vt).remove(this))}continue(){var e;return((e=L(this,ri))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,u,l,d,h,p,f,g,m,w,b,v,C,E,y,_,P;const r=()=>{Lt(this,mn,cs).call(this,{type:"continue"})};we(this,ri,T_({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,x)=>{Lt(this,mn,cs).call(this,{type:"failed",failureCount:I,error:x})},onPause:()=>{Lt(this,mn,cs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,Vt).canRun(this)}));const n=this.state.status==="pending",s=!L(this,ri).canStart();try{if(n)r();else{Lt(this,mn,cs).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=L(this,Vt).config).onMutate)==null?void 0:o.call(i,e,this));const x=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));x!==this.state.context&&Lt(this,mn,cs).call(this,{type:"pending",context:x,variables:e,isPaused:s})}const I=await L(this,ri).start();return await((l=(u=L(this,Vt).config).onSuccess)==null?void 0:l.call(u,I,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,e,this.state.context)),await((f=(p=L(this,Vt).config).onSettled)==null?void 0:f.call(p,I,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,I,null,e,this.state.context)),Lt(this,mn,cs).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(w=L(this,Vt).config).onError)==null?void 0:b.call(w,I,e,this.state.context,this)),await((C=(v=this.options).onError)==null?void 0:C.call(v,I,e,this.state.context)),await((y=(E=L(this,Vt).config).onSettled)==null?void 0:y.call(E,void 0,I,this.state.variables,this.state.context,this)),await((P=(_=this.options).onSettled)==null?void 0:P.call(_,void 0,I,e,this.state.context)),I}finally{Lt(this,mn,cs).call(this,{type:"error",error:I})}}finally{L(this,Vt).runNext(this)}}},gn=new WeakMap,Vt=new WeakMap,ri=new WeakMap,mn=new WeakSet,cs=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Yt.batch(()=>{L(this,gn).forEach(n=>{n.onMutationUpdate(e)}),L(this,Vt).notify({mutation:this,type:"updated",action:e})})},tb);function Fj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fn,Kr,dc,rb,jj=(rb=class extends $l{constructor(e={}){super();xe(this,Fn);xe(this,Kr);xe(this,dc);this.config=e,we(this,Fn,new Set),we(this,Kr,new Map),we(this,dc,0)}build(e,r,n){const s=new Bj({mutationCache:this,mutationId:++Lc(this,dc)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){L(this,Fn).add(e);const r=hu(e);if(typeof r=="string"){const n=L(this,Kr).get(r);n?n.push(e):L(this,Kr).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,Fn).delete(e)){const r=hu(e);if(typeof r=="string"){const n=L(this,Kr).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&L(this,Kr).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=hu(e);if(typeof r=="string"){const n=L(this,Kr).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=hu(e);if(typeof r=="string"){const s=(n=L(this,Kr).get(r))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yt.batch(()=>{L(this,Fn).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,Fn).clear(),L(this,Kr).clear()})}getAll(){return Array.from(L(this,Fn))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Hw(r,n))}findAll(e={}){return this.getAll().filter(r=>Hw(e,r))}notify(e){Yt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Yt.batch(()=>Promise.all(e.map(r=>r.continue().catch(Vr))))}},Fn=new WeakMap,Kr=new WeakMap,dc=new WeakMap,rb);function hu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Gw(t){return{onFetch:(e,r)=>{var l,d,h,p,f;const n=e.options,s=(h=(d=(l=e.fetchOptions)==null?void 0:l.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((f=e.state.data)==null?void 0:f.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const m=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=I_(e.options,e.fetchOptions),b=async(v,C,E)=>{if(g)return Promise.reject();if(C==null&&v.pages.length)return Promise.resolve(v);const y={client:e.client,queryKey:e.queryKey,pageParam:C,direction:E?"backward":"forward",meta:e.options.meta};m(y);const _=await w(y),{maxPages:P}=e.options,I=E?Pj:Nj;return{pages:I(v.pages,_,P),pageParams:I(v.pageParams,C,P)}};if(s&&i.length){const v=s==="backward",C=v?qj:Kw,E={pages:i,pageParams:o},y=C(n,E);a=await b(E,y,v)}else{const v=t??i.length;do{const C=c===0?o[0]??n.initialPageParam:Kw(n,a);if(c>0&&C==null)break;a=await b(a,C),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,m;return(m=(g=e.options).persister)==null?void 0:m.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Kw(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function qj(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var it,ys,ws,po,go,bs,mo,yo,nb,zj=(nb=class{constructor(t={}){xe(this,it);xe(this,ys);xe(this,ws);xe(this,po);xe(this,go);xe(this,bs);xe(this,mo);xe(this,yo);we(this,it,t.queryCache||new Lj),we(this,ys,t.mutationCache||new jj),we(this,ws,t.defaultOptions||{}),we(this,po,new Map),we(this,go,new Map),we(this,bs,0)}mount(){Lc(this,bs)._++,L(this,bs)===1&&(we(this,mo,S_.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,it).onFocus())})),we(this,yo,tl.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,it).onOnline())})))}unmount(){var t,e;Lc(this,bs)._--,L(this,bs)===0&&((t=L(this,mo))==null||t.call(this),we(this,mo,void 0),(e=L(this,yo))==null||e.call(this),we(this,yo,void 0))}isFetching(t){return L(this,it).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,ys).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=L(this,it).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=L(this,it).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(qw(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return L(this,it).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=L(this,it).get(n.queryHash),i=s==null?void 0:s.state.data,o=Ej(e,i);if(o!==void 0)return L(this,it).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return Yt.batch(()=>L(this,it).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=L(this,it).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=L(this,it);Yt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=L(this,it);return Yt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Yt.batch(()=>L(this,it).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Vr).catch(Vr)}invalidateQueries(t,e={}){return Yt.batch(()=>(L(this,it).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Yt.batch(()=>L(this,it).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Vr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Vr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=L(this,it).build(this,e);return r.isStaleByTime(qw(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Vr).catch(Vr)}fetchInfiniteQuery(t){return t.behavior=Gw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Vr).catch(Vr)}ensureInfiniteQueryData(t){return t.behavior=Gw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tl.isOnline()?L(this,ys).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,it)}getMutationCache(){return L(this,ys)}getDefaultOptions(){return L(this,ws)}setDefaultOptions(t){we(this,ws,t)}setQueryDefaults(t,e){L(this,po).set(cc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,po).values()],r={};return e.forEach(n=>{uc(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){L(this,go).set(cc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,go).values()],r={};return e.forEach(n=>{uc(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,ws).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Np(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Pp&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,ws).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,it).clear(),L(this,ys).clear()}},it=new WeakMap,ys=new WeakMap,ws=new WeakMap,po=new WeakMap,go=new WeakMap,bs=new WeakMap,mo=new WeakMap,yo=new WeakMap,nb),Hj=sb.createContext(void 0),Wj=({client:t,children:e})=>(sb.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),ci.jsx(Hj.Provider,{value:t,children:e}));const Vj=()=>{const[t,e]=ch(!1),[r,n]=ch(!1),s=vj({config:tj}),{disconnect:i}=rj(),{open:o,close:a}=sj(),{open:c}=ij();Nu(()=>{s.isConnected&&!r?(qc("onWalletConnected",{adapterName:Ho,modalName:jc,walletAddress:s.address,walletName:s.connector.name||"Reown AppKit",chainId:s.chainId,connector:s.connector}),n(!0)):s.isDisconnected&&r&&(qc("onWalletDisconnected",{adapterName:Ho,modalName:jc}),n(!1))},[s,r]),Nu(()=>(e(!0),qc("onModalMounted",{adapterName:Ho,modalName:jc}),()=>{e(!1),qc("onModalUnMounted",{adapterName:Ho,modalName:jc})}),[]),window[Ho]={isReady:t,account:s,modal:{isOpen:c,open:()=>o(),close:()=>a(),toggle:()=>c?a():o(),disconnect:()=>i()}}},Gj=new zj,Kj=cb(),{title:Yj,url:Zj,description:Jj,favicon:Qj}=rC(),Xj={name:Yj,description:Jj,url:Zj,icons:[Qj]};oj({adapters:[Sp],networks:__,projectId:Kj,metadata:Xj,features:{email:!1,socials:!1,analytics:!1},featuredWalletIds:["c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96","4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0","38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","1ae92b26df02f0abca6304df07debccd18262fdf5fe82daa81593582dac9a369","ecc4036f814562b41a5268adc86270fba1365471402006302e70169465b7ac18","18388be9ac2d02726dbac9777c96efaac06d744b2f6d580fccdd4127a6d01fd1","971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709"]});function e7({children:t}){return ci.jsx(cj,{reconnectOnMount:!1,config:Sp.wagmiConfig,children:ci.jsx(Wj,{client:Gj,children:t})})}const t7=()=>ci.jsx(e7,{children:ci.jsx(Vj,{})});tC.createRoot(nC("reown-app-kit-root")).render(ci.jsx(j_,{children:ci.jsx(t7,{})}));export{nl as $,se as A,pe as B,ka as C,yw as D,Ia as E,qt as F,Qt as G,y7 as H,de as I,w7 as J,ya as K,Yr as L,ut as M,_P as N,q as O,ts as P,SP as Q,Se as R,Jr as S,cr as T,qe as U,fq as V,Dt as W,_f as X,Au as Y,Aa as Z,or as _,oo as a,uq as a0,Ct as a1,lq as a2,p_ as a3,Cf as a4,Oo as a5,Oa as a6,Ff as a7,Os as a8,f7 as a9,u7 as aA,jC as aB,ZN as aC,J_ as aD,VP as aE,yn as aF,KN as aG,dl as aa,Wf as ab,h7 as ac,d7 as ad,w0 as ae,nn as af,Ou as ag,SA as ah,xA as ai,g7 as aj,wA as ak,F as al,E0 as am,li as an,zI as ao,oN as ap,M0 as aq,wo as ar,p7 as as,Ts as at,Tb as au,c7 as av,$f as aw,xu as ax,il as ay,l7 as az,Su as b,m7 as c,te as d,ft as e,z as f,qn as g,ue as h,ml as i,T as j,et as k,hq as l,br as m,he as n,Xe as o,A9 as p,Kt as q,dq as r,I9 as s,J as t,Et as u,Ue as v,K0 as w,cq as x,Mr as y,tt as z};
